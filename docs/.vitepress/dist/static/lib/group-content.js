import{defineComponent as e,computed as t,ref as n,onMounted as i,nextTick as r,watch as o,watchEffect as a,openBlock as s,createElementBlock as l,renderSlot as u,createCommentVNode as c,onUnmounted as d,onBeforeUnmount as p,getCurrentInstance as f,reactive as h,createBlock as v,resolveDynamicComponent as g,createElementVNode as y,inject as m,resolveComponent as b,createVNode as w,mergeProps as x,withCtx as S,Fragment as _,renderList as O,createTextVNode as k,toDisplayString as I,pushScopeId as E,popScopeId as P,normalizeClass as j,normalizeProps as M,provide as T,unref as C,normalizeStyle as z,createSlots as A,withDirectives as D,vShow as R,useCssVars as N,toRef as H,guardReactiveProps as B}from"vue";import W from"pubsub-js";import{useElementSize as $,useVModel as L}from"@vueuse/core";import{isNumber as G,get as F,cloneDeep as Y,set as X,isEqual as q}from"lodash-es";import{useRouter as U,useRoute as Z}from"vue-router";import{useStore as V}from"vuex";import{dayjs as J}from"element-plus";function K(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}function Q(e,t){const n=t.width,i=t.height,r=Array.isArray(e)?e[1]:e,o=Array.isArray(e)?e[0]:e;return{xGap:String(r).indexOf("%")>0?parseFloat(r)*n/100:r,yGap:String(o).indexOf("%")>0?parseFloat(o)*i/100:o}}Node.prototype.styled=function(e,t="ele"){const n=function(e){let t="";for(let n in e)t+=K(n)+":"+e[n]+";";return t}(e),i=window.$style;let r="",o=!1;Object.keys(i).map((e=>{n===i[e]&&(r=e.split("|")[1],o=!0)})),o||(r="style_"+t+"_"+function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=t.toLocaleLowerCase(),i=t+n+"0123456789",r=[];for(let e=0;e<i.length;e++)r[e]=i.charAt(e);let o="";for(let t=0;t<e;t++)o+=r[Math.floor(Math.random()*r.length)];return o}(8),this.className?i[this.className.split(" ")[0]+"|"+r]=n.replace(/\n\r|\n./g,""):i["|"+r]=n.replace(/\n\r|\n./g,"")),this.setAttribute("data-style",r),function(e){let t=document.getElementById("style-style");t||(t=document.createElement("style"),t.id="style-style");let n="";for(let t in e){const i=t.split("|")[0];n+=i?`.${i}[data-style=${t.split("|")[1]}]{${e[t]}}`:`[data-style=${t.split("|")[1]}]{${e[t]}}`}t.innerHTML=n,document.head.appendChild(t)}(i)},window.$style||(window.$style={});var ee=(e,t)=>{const n=e.__vccOpts||e;for(const[e,i]of t)n[e]=i;return n};const te=e({props:{config:{type:Object,default:()=>({})}},setup(e){const s=t((()=>e.config)),l=n(),{width:u,height:c}=$(l);async function d(){await async function(){if(await r(),l.value){if(s.value.cols){const{xGrid:e,yGrid:t}=function(e,t){const{xGap:n,yGap:i}=Q(t.gap,e);if(t.auto)return{xGrid:(e.width-n*(t.cols-1))/t.cols,yGrid:(e.height-i*(t.rows-1))/t.rows};{let i=0,r=0;return i="string"==typeof t.xGrid&&t.xGrid?.indexOf("px")>=0?t.xGrid?.indexOf("px")>=0?parseFloat(t.xGrid):Number(t.xGrid):(e.width-n*(t.cols-1))/t.cols,"number"==typeof t.yGrid?r=t.yGrid:t.yGrid?.indexOf("px")>=0&&(r=t.yGrid?.indexOf("px")>=0?parseFloat(t.yGrid):Number(t.yGrid)),{xGrid:i,yGrid:r}}}({width:u.value,height:c.value},s.value);p.value.xGrid=e,p.value.yGrid=t}}else f.value=!1}();const{xGap:n,yGap:i}=Q(e.config.gap,{width:u.value,height:c.value}),o=t((()=>n+"px")),a=t((()=>i+"px")),d=t((()=>`repeat(${s.value.cols}, ${p.value.xGrid}px)`)),h=t((()=>`repeat(${s.value.rows}, ${p.value.yGrid}px)`));p.value.xGrid&&p.value.yGrid?(l.value&&l.value.styled({gridRowGap:a.value,gridColumnGap:o.value,gridTemplateColumns:d.value,gridTemplateRows:h.value,gridAutoColumns:`${p.value.xGrid}px`,gridAutoRows:`${p.value.yGrid}px`}),f.value=!0):f.value=!1}i((async()=>{await r(),d()})),o(s,(()=>{d()}),{deep:!0}),a((()=>{u.value&&c.value&&d()}));const p=n({xGrid:0,yGrid:0}),f=n(!1);return{layoutDom:l,show:f}}}),ne={ref:"layoutDom",class:"SGridLayout"};var ie=ee(te,[["render",function(e,t,n,i,r,o){return s(),l("div",ne,[e.show?u(e.$slots,"default",{key:0},void 0,!0):c("v-if",!0)],512)}],["__scopeId","data-v-754613dd"]]);const re=e({props:{itemConfig:{type:Object,default:()=>({})}},setup(e){const o=t((()=>e.itemConfig)),a=t((()=>o.value.auto?`auto /span ${o.value.w}`:`${G(o.value.x)?o.value.x+1:o.value.x} / span ${o.value.w}`)),s=t((()=>o.value.auto?`auto /span ${o.value.h}`:`${G(o.value.y)?o.value.y+1:o.value.y} / span ${o.value.h}`)),l=n();return i((async()=>{await r(),l.value&&l.value.styled({gridColumn:a.value,gridRow:s.value})})),{itemDom:l}}}),oe=["id"];var ae=ee(re,[["render",function(e,t,n,i,r,o){return s(),l("div",{id:"layout-item"+e.itemConfig.i,ref:"itemDom",class:"layout-item"},[u(e.$slots,"default")],8,oe)}]]);const se=Object.prototype.toString;function le(e,t){return se.call(e)===`[object ${t}]`}function ue(e){return le(e,"Number")}function ce(e){return e&&Array.isArray(e)}function de(e){return le(e,"String")&&["[","{"].includes(String(e).substring(0,1))}function pe(e){const{request:t,proxy:n}=window.globalProperties.async;return t({url:`${n.node||""}/file/base64/${e}`,type:"GET"})}function fe(e){const{request:t,proxy:n}=window.globalProperties.async;return t({url:`${n.node||""}/menu/query/`+e,type:"GET"})}var he=Object.freeze({__proto__:null,asyncConf:function(e={}){const{request:t,proxy:n}=window.globalProperties.async,i=e.apiType;let r=e.url;return"mock"===i?(e.type="GET","development"!==process.env.VUE_APP_CURRENTMODE&&(r="/web-screen/"+r)):(r&&"/"!==r.substring(0,1)&&(r="/"+r),r=n.java+r),t({url:r,type:e.type||"POST",params:e.params||{},suffix:e.suffix||""})},asyncMock:function(e={}){const{request:t,proxy:n}=window.globalProperties.async,{url:i,method:r,params:o}=e;return t({url:`${n.node||""}/${i}`,type:r||"POST",params:o||{}})},nFileBase64ById:pe,nPageViewQuery:function(e){const{request:t,proxy:n}=window.globalProperties.async;return t({url:`${n.node||""}/page-view/query`,type:"POST",params:e||{}})},nPageViewById:function(e){const{request:t,proxy:n}=window.globalProperties.async;return t({url:`${n.node||""}/page-view/id/`+e,type:"GET"})},nPageViewUpdate:function(e){const{request:t,proxy:n}=window.globalProperties.async;return t({url:`${n.node||""}/page-view/update`,type:"PUT",params:e||{}})},nMenuDeep:fe,nMenuUpdate:function(e){const{request:t,proxy:n}=window.globalProperties.async;return t({url:`${n.node||""}/menu/update`,type:"PUT",params:e||{}})}});function ve(e){let t,n;const i=()=>t&&W.unsubscribe(t);return new Promise(((r,o)=>{e||o("key is required!"),t=W.subscribe(e,((e,t)=>{"function"==typeof n&&n(t)})),r(),p((()=>i()))})),{subscribe:e=>n=e,unsubscribe:i}}function ge(){const{async:e,hooks:t,app:n,router:i}=window.globalProperties||{},r=n?.config?.globalProperties?.$store||V()||{};return r.getters||(r.getters={}),{app:n,store:r,router:i||n?.config?.globalProperties?.$router||U()||{},async:e,hooks:t||{useRoute:Z}}}const ye={FieldUIMapper:{e6:"text",e7:"input",e8:"select",e9:"cascader",e10:"checkbox-group",e11:"radio-group",e12:"switch",e13:"date",e14:"rate",e15:"slider",e16:"tag",e17:"image",e18:"colorPicker",e19:"link",e20:"slot",e24:"input-number",e25:"date-picker",e99:"custom"}};function me(e){return`dict_${e}`}function be(e,i){const r=f(),{id:s,menuTypes:l,useArgData:u,menus:c,viewKey:d,labels:p}=e||{},{menus:v}=Oe({viewKey:d}),g=c||v.value,{jsonMenus:y}=g,{menu:m}=function(e={}){const{app:n}=ge(),{router:i,basePath:r,microApps:o}=e,a=t((()=>n.config.globalProperties.$route||{})),s=t((()=>{let e=a.value;const t=r+a.value.path,n=o&&o.find((e=>t.includes(e.activeRule)));if(n){const t=i.getRoutes().find((e=>`${r}${e.path}`===n.activeRule));t&&(e=t)}return e})),l=t((()=>s.value.meta.data)),u=t((()=>JSON.parse(l.value?.options||"{}"))),c=t((()=>void 0===u.value.hiddenHeader?s.value.meta.showHeader:1!==u.value.hiddenHeader)),d=t((()=>void 0===u.value.hiddenHeader?s.value.meta.showSide:1!==u.value.hiddenSide)),p=["/home"],f=t((()=>!p.includes(s.value.path)));return{route:s,menu:l,options:u,showHeader:c,showSide:d,showBreadcrumb:f}}(),b=y?.[3]||[],w=ce(r?.props?.data)?[]:{},x=t((()=>{const t=e?.dataPath,n=r?.props?.data,o=t?F(i?.value,t,""):i?.value,a=(t?F(n,t,""):n)||w;return!0===u||(!a||!Object.keys(a).length)&&!!o?o:a})),S=t((()=>r?.props?.group||{})),_=t((()=>S.value.currentAna||{})),O=t((()=>_.value.fieldConf||{})),k=t((()=>b.find((e=>{const t=String(e.sid);return s?t===String(s):t===String(O.value.parentId)})))),I=t((()=>{let e=[];return e=s?(k.value?.children||[]).map((e=>String(e.sid))):(_.value.fieldConf?.ids||[]).map((e=>String(e))),e})),E=t((()=>O.value.type)),P=h({fields:[],btns:[],modules:[]});function j(){if(!I.value||!I.value.length)return;let e=[];if(!0==("database"===E.value||!!s))e=k.value?.children?.filter((e=>I.value.includes(String(e.sid))))||[];const t=Y(p||[]),n=t.map((e=>String(e.sid)));e.map((e=>{n.includes(String(e.sid))||t.push(e)})),e=t;const{fields:i,btns:r,modules:o}=xe(e,l);P.fields=i,P.modules=o,P.btns=r}j(),o(I,(()=>j()));const M=t((()=>P)),T=n(M.value.fields||[]),C=n([]),z=n(M.value.btns),A=n(M.value.modules),D=n(),{useFields:R,useJsonFields:N,useBtns:H,useModules:B,useResultData:W}=we(M,x);return T.value=R.value,C.value=N.value,z.value=H.value,A.value=B.value,D.value=W.value,a((()=>{const{useFields:e,useJsonFields:t,useBtns:n,useModules:i,useResultData:r}=we(M,x);T.value=e.value,C.value=t.value,z.value=n.value,A.value=i.value,D.value=r.value})),{menu:m,module:k,fieldConf:O,fields:T,jsonFields:C,btns:z,modules:A,transformData:D,asyncData:x}}function we(e,t){const i=n(e.value.fields||[]),r=n([]),o=n(e.value.btns),a=n(e.value.modules),s=n();return function(e,t,n,i){if(ce(e.value))if(n.value=[],i.value=[],e.value.length)e.value.map(((e,r)=>{const o={},a={};t.value.map((t=>{t.type||(t.type=ye.FieldUIMapper[`e${t.componentType}`]),_e(t,e,o),a[t.key]=Y(t)})),n.value.splice(r,0,o),i.value.push(a)}));else{const n={};t.value.map((t=>{t.type||(t.type=ye.FieldUIMapper[`e${t.componentType}`]),_e(t,e.value,{}),n[t.key]=Y(t)})),i.value.push(n)}else{n.value={},i.value=[];const r={};t.value.map((t=>{t.type||(t.type=ye.FieldUIMapper[`e${t.componentType}`]),_e(t,e.value,n.value),r[t.key]=Y(t)})),i.value.push(r)}}(t,i,s,r),a.value&&a.value.length&&a.value.map((e=>{if(!e.fields||!e.fields.length)return;const{useFields:i,useJsonFields:r,useBtns:o,useModules:a,useResultData:s}=we(n(e),t);e.fields=i.value,e.transformData=s.value,e.jsonFields=r.value,e.btns=o.value,e.useModules=a.value})),{useFields:i,useBtns:o,useModules:a,useJsonFields:r,useResultData:s}}function xe(e,t){const{fields:n,btns:i,modules:r}=function(e,t){const n=h({fields:[],btns:[],modules:[]});return e&&e.length?(n.fields=[],n.btns=[],n.modules=[],e.map((e=>{const i=Number(e.menuType);if(!(t||[3,4,5]).includes(i))return;const r=de(e.options)?JSON.parse(e.options||"{}"):e.options,o=ye.FieldUIMapper[`e${e.componentType}`],a=Object.assign({},{label:String(e.name),key:String(e.key),type:o,component:e.component,componentType:e.componentType,children:e.children,icon:e.icon,picture:e.picture,remark:e.remark,path:e.path,link:e.link,_config:e,_options:r});switch(!0){case[5].includes(i):(function(e){return["select","cascader","radio-group","checkbox-group"].includes(e)})(o)&&function(e){const{store:t}=ge(),{open:n,props:i}=F(e,"_options.fieldConf",{});if(1!==Number(n)||!i||i.length<1)return;const r=i.find((e=>"options"===e.type));if(!r)return;const o=r.option;let a=[];const s=t.getters.dictData||{},l=String(e.type),u={label:o.label||"label",value:o.value||"value",children:o.children||"children"};switch(o.sourceType){case"chooseType":a=s[me(o.id)]?.tree||[];break;case"node":a=s[me(`n${o.id}`)]?.tree||[],u.label="label",u.value="value";break;case"api":a=s[me(`${o.id}`)]?.list||[]}"cascader"===l?e.props=Object.assign({placeholder:"请选择"},e.props||{},{options:a,props:u}):e.options=a.map((e=>{const t={label:e[u.label],value:e[u.value]};return["radio-group"].includes(l)&&(t.text=t.label,t.label=t.value,t.props||(t.props={}),t.props.border=!0),t}));if(!0===["cascader"].includes(String(e.type)))e.options?.map((e=>e.text=e[u.label]));e.mapper=u}(a),function(e){const{open:t,props:n}=F(e,"_options.fieldConf",{});if(1!==Number(t)||!n||n.length<1)return;const i=n.find((e=>"props"===e.type));if(!i)return;const r=Object.assign(e.props||{},i.option||{});e.props=r,Object.keys(r).map((t=>{let n=F(r,t);const i=le(o=n,"String")&&(String(o).startsWith("function")||String(o).includes("=>"));var o;switch(!0){case"true"===n:n=!0;break;case"false"===n:n=!1;break;case de(n):n=JSON.parse(n);break;case i:n=new Function(`return ${n}`)();break;default:/^(-?\d+)\.?(\d*)$/.test(n)&&(n=parseFloat(n))}const a=`${i?"":"props."}${t}`;delete e.props[t],X(e,a,n)}))}(a),n.fields.push(a);break;case 4===i:!function(e){const{open:t,options:n}=F(e,"_options.btnConf",{});if(1!==Number(t)||!n||n.length<1)return;let i={};const r=n.find((e=>"props"===e.type));r&&(i=r.option||{});e.props=i}(a),n.btns.push(a);break;case 3===i:n.modules.push(a)}})),n):n}(e,t);return[].concat(n||[],i||[]).map((e=>{const t=e.picture;t&&"["===t.substring(0,1)&&(e.picture="",pe(JSON.parse(t)[0].url).then((t=>{e.picture=t})))})),r&&r.length&&r.map((e=>{const n=e.children||[],{fields:i,btns:r,modules:o}=xe(n,t);e.fields=i,e.btns=r,e.modules=o})),{fields:n,btns:i,modules:r}}const Se=["defaultValue","substring","number","time","dict","raise","unit"];function _e(e,t={},n){const i=F(t,e.key,"");if(e.value=i,X(n,e.key,i),!e._options){const t=de(e.options)?JSON.parse(e.options||"{}"):e.options;e._options=t}const{open:r,transform:o}=F(e,"_options.fieldConf",{});if(1!==Number(r)||!o||o.length<1)return;const a=[],s=[],l=[];Se.map((e=>o.findIndex((t=>t.type===e)))).filter((e=>e>-1)).map((e=>l.push(o[e]))),l.map((t=>{const n=t.option||{};if(!0==("dict"===t.type))n.options=e.options,n.byKey="value",n.getKey="label";a.push(t.type),s.push(n)}));const{value:u,unit:c,defaultValue:d}=function(e,t,n){if(!t)return e;let i=t;ce(t)||(i=[t]);let r=n;ce(n)||(r=[n]);let o=(ue(e)?Number(e):e)??"",a="",s=o,l="";return i.map(((e,t)=>{const n=r[t],i=void 0!==n.fixed?n.fixed:2;switch(e){case"defaultValue":u=n.value,s=le(u,"String")&&["[","{"].includes(n.value.substring(0,1))?JSON.parse(n.value):n.value,o=void 0===o||""===o?n.value:o;break;case"substring":o=String(o).substring(n.start||0,n.end||String(o).length);break;case"raise":l=o>=0?"+":"-",o=l+o;break;case"time":o=function(e,t){if(!e)return"";if(t&&t.indexOf("{")>-1){if(!e)return"";if(0===arguments.length)return null;10===(e+"").length&&(e=1e3*+e);const n=t||"{y}-{m}-{d} {h}:{i}:{s}";let i;i="object"==typeof e?e:new Date(parseInt(String(e)));const r={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},o=n.replace(/{(y|m|d|h|i|s|a)+}/g,((e,t)=>{let n=r[t];return"a"===t?["一","二","三","四","五","六","日"][n-1]:(e.length>0&&n<10&&(n="0"+n),n||0)}));return o}return J(e).format(t||"YYYY-MM-DD")}(o,n.value);break;case"number":if(ue(o)){switch(n.value){case"+":o=(o+n.number).toFixed(i);break;case"-":o=(o-n.number).toFixed(i);break;case"*":o=(o*n.number).toFixed(i);break;case"/":o=(o/n.number).toFixed(i)}o*=1}else o="";break;case"dict":o=function(e,t){const{options:n,dictName:i,byKey:r,getKey:o,split:a,returnType:s}=t;if(!String(e)||!i&&!n)return;let l;const u={};l=n||u[i];if(!l||Object.keys(l).length<1)return e;const c=r||"code",d=o||"name",p=a||"、";let f=e;Array.isArray(e)||(f=(e+"").split(p));let h,v="";"array"===s?(h=[],f.map((e=>{const t=l.find((t=>t[c]+""==e+""));if(!t)return"";h.push(t[d])}))):(v=f.reduce(((e,t,n)=>{const i=l.find((e=>e[c]+""==t+""));if(!i)return"";return e+(n<=f.length-1&&n>0?p+i[d]:i[d])}),""),h=v||f.join(p));return h}(o,n);break;case"unit":a=n.value,o+=n.value}var u})),{value:o,unit:a,defaultValue:s}}(i,a,s);e.value=void 0===i||""===i?d:i,e.tValue=u,e.unit=c,X(n,e.key,u),e.defaultValue=d}function Oe(e){const{store:n}=ge(),{viewKey:i}=e||{},{menus:r,projectId:o}=n.getters||{},a=n.getters["view/viewMenus"]||{},s=i||o;return{menus:t((()=>a[s]||r))}}function ke(e,t){const{router:n}=ge(),i=window.origin,r=String(e.path);switch(!0){case r.includes("/micro/"):n.push({path:r});break;case 1===e.pageType&&2===e.menuType||4===e.menuType&&r&&"#"!==r&&(!e.link||"#"===e.link):let o=String(4===e.menuType?r:e.routerPath);o="/"===o.substring(0,1)?o:"/"+o,n.push({path:o});break;case 3===e.pageType&&2===e.menuType||4===e.menuType&&(!r||"#"===r):if(!e.link||"#"===e.link)return;!function(e,t){let n=e&&"http"===e.substring(0,4)?e:"http://"+e;const i=e.indexOf("?")>=0?"&":"?";1==("auth"===t)&&(n=`${n}${i}_auth=1&_un=`);window.open(n)}(("http"===e.link.substring(0,4)?"":i)+e.link,t);break;default:if(!e?.path)return;n.push({path:r})}}function Ie(e,t=["picture"]){let i;i=Array.isArray(e)?e:[e];const r=n([]);return i.map((e=>{e&&t.map((t=>{const i=e[t],o=n(e);i&&"["===i.substring(0,1)&&(e[t]=void 0,pe(JSON.parse(i)[0].url).then((e=>{o.value[t]=e}))),r.value.push(o.value)}))})),r.value}function Ee(e){const{data:t,key:n,source:i}=e||{},r=n||"name";let o={};switch(function(e){let t="String";return"[object Object]"===Object.prototype.toString.call(e)?t="Object":"[object Array]"===Object.prototype.toString.call(e)?t="Array":"string"==typeof e?t="String":"number"==typeof e&&(t="Number"),t}(i)){case"String":o[r]=i;break;case"Object":if(o=i,t&&Object.keys(t).length>0){const e=i.path;i.path&&(o[r]=F(t||{},e)),i.formatter&&i.formatter instanceof Function&&(i[r]=i.formatter(t,e?F(t,e):"")||"")}}return{data:o}}function Pe(e=18,t){const n=[],i="0123456789abcdef";for(let t=0;t<e;t++)n[t]=i.substr(Math.floor(16*Math.random()),1);n[7]="4",n[9]=i.substr(3&n[9]|8,1),n[8]=n[11]="-";return(t||"")+n.join("")}const je=e({name:"ItemBox",props:{options:{type:Object,default:()=>({})},item:{type:Object,default:()=>({})}},setup(e){const n=t((()=>e.options.borderBox||{})),i=t((()=>e.item.options||{})),r=t((()=>Ie([i.value])));return{borderBox:n,itemOptions:i,images:r}}}),Me={class:"gc-component"},Te={class:"content"};var Ce=ee(je,[["render",function(e,t,n,i,r,o){return s(),l("section",Me,[e.borderBox.options?(s(),v(g(e.borderBox.options.component),{key:0})):c("v-if",!0),y("section",Te,[u(e.$slots,"default",{},void 0,!0)])])}],["__scopeId","data-v-3c2f17b8"]]);const ze={class:"gc-component"},Ae=[(e=>(E("data-v-1aa03a64"),e=e(),P(),e))((()=>y("i",{class:"el-icon-edit"},null,-1)))];var De=ee(e({__name:"operator",props:{options:{type:Object,default:()=>({})}},setup(e){const i=e,{store:r}=ge(),o=t((()=>r.getters.mode)),a=t((()=>i.options.dimensions||[])),u=n(a?.value?.[0]?.code),d=t((()=>i.options.dimensionsProps||{})),p=t((()=>i.options.animate?.dimension||{})),f=n(),h=t((()=>a?.value?.find((e=>!0===e.initChecked))));h.value&&(u.value=h.value.code);const{group:g}=m(Cn);function y(e){u.value=e;const t=F(g,"pubsub.header.pubs.toggleDimension");t&&W.publish(t.key,{item:a.value.find((t=>t.code===e))})}function E(){console.log("无权限.")}return function(){f.value&&clearInterval(f.value);const e=p.value.time>0?p.value.time:6e3;if(1!==Number(p.value.open))return;let t=a.value.findIndex((e=>e.code===u.value));f.value=setInterval((()=>{t>=a.value.length?t=0:t++;const e=a.value[t];e&&y(e.code)}),Number(e))}(),(e,t)=>{const n=b("el-radio-button"),i=b("el-radio-group");return s(),l("section",ze,[w(i,x({modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e)},d.value,{"button-style":"solid",size:"small",onChange:y}),{default:S((()=>[(s(!0),l(_,null,O(a.value,((e,t)=>(s(),v(n,{key:t,label:e.code},{default:S((()=>[k(I(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},16,["modelValue"]),a.value.length&&"active"===o.value?(s(),l("span",{key:0,class:"active-operator",onClick:E},Ae)):c("v-if",!0)])}}}),[["__scopeId","data-v-1aa03a64"]]);const Re="SINGLE_FIELD",Ne=(Symbol("FIELD_ACTIVE"),e({name:"HeaderExtra",props:{options:{type:Object,default:()=>({})},data:[Object,Array]},setup(e){const{menus:n}=Oe(),i=t((()=>{const t=e.options.extra||{},i=[].concat(n.value.jsonMenus?.[4]||[],n.value.jsonMenus?.[5]||[]).find((e=>e.sid===t.id));return i?("string"==typeof i.options&&(i.options=JSON.parse(i.options||"{}")),i):{}}));return{extra:t((()=>{const t=Ie(i.value)[0],n=Number(t.menuType),r={id:t.id,component:"",props:{},text:"",options:t.options,icon:t.icon,picture:t.picture};switch(!0){case 4===n:const i=F(t.options,"btnConf.options",[]).find((e=>"props"===e.type));r.props=i?.option||{},r.component="el-button",r.text=String(t.name);break;case 5===n:r.component="text",r.text=`${t.name}：${F(e.data,String(t.key),"")}`}return r})),onClick:function(){const e=i.value;if(!0==(4===Number(e.menuType))){const t=F(e,"options.btnConf.options",[]),n=t.find((e=>"events"===e.type))?.option;n&&1===n.pubsub?W.publish(`${Re}_${e.sid}`,{field:e}):ke(e)}}}}})),He={key:0},Be={key:0,class:"text-row"},We=["src"];var $e=ee(Ne,[["render",function(e,t,n,i,r,o){return"text"===e.extra.component?(s(),l("span",He,I(e.extra.text),1)):(s(),v(g(e.extra.component),x({key:1},e.extra.props,{onClick:e.onClick}),{default:S((()=>[e.extra.text?(s(),l("span",Be,[e.extra.picture?(s(),l("img",{key:0,src:e.extra.picture},null,8,We)):e.extra.icon?(s(),l("i",{key:1,class:j(e.extra.icon)},null,2)):c("v-if",!0),k(" "+I(e.extra.text),1)])):c("v-if",!0)])),_:1},16,["onClick"]))}],["__scopeId","data-v-457c7e56"]]);const Le={class:"gc-component"},Ge={class:"h-content full"},Fe={class:"left"},Ye={class:"h-title"},Xe=["id"],qe=["src"],Ue={class:"right"},Ze={key:0,class:"h-dimensions"},Ve={class:"h-extra"};var Je=ee(e({__name:"index",props:{layoutIndex:{type:[Number,String],default:0},group:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})},data:{type:[Object,Array],default:()=>[]}},setup(e){const n=e;Ie(n.options.style,["suffix","prefix"]);const i=t((()=>{const{data:e}=Ee({data:n.data,source:n.options.title});return e})),r=t((()=>{const{data:e}=Ee({data:n.data,source:n.options.sub});return e})),o=t((()=>n.options.dimensions||[]));function a(e){const t=F(n.group,"pubsub.header.key","");t&&W.publish(t,{type:e,options:n.options})}return(t,n)=>(s(),l("section",Le,[y("section",Ge,[y("section",Fe,[u(t.$slots,`header${e.layoutIndex}-left`,{},(()=>[y("section",Ye,[i.value.name?(s(),l("section",{key:0,id:i.value.name,class:"main",onClick:n[0]||(n[0]=e=>a("title"))},[e.options?.style?.prefix?(s(),l("img",{key:0,class:"icon",src:e.options?.style?.prefix,alt:""},null,8,qe)):c("v-if",!0),y("span",null,I(i.value.name),1)],8,Xe)):c("v-if",!0),r.value.name?(s(),l("section",{key:1,class:"sub",onClick:n[1]||(n[1]=e=>a("subtitle"))},[y("span",null,I(r.value.name),1)])):c("v-if",!0)])]),!0)]),y("section",Ue,[u(t.$slots,`header${e.layoutIndex}-right`,{},(()=>[o.value.length>0?(s(),l("section",Ze,[w(De,{options:e.options},null,8,["options"])])):c("v-if",!0),y("section",Ve,[w($e,{data:e.data,options:e.options},null,8,["data","options"])])]),!0)])])]))}}),[["__scopeId","data-v-2473e218"]]);const Ke={class:"gc-component gc-ui"},Qe=e({__name:"ui",props:{componentOption:{type:Object,default:()=>({})},group:{type:Object,default:()=>({})},data:{type:[Object,Array],default:()=>[]}},setup(e){const n=e,{viewKeyRef:r}=m(Tn),o=t((()=>{const e=n.componentOption.options?.component||{};return de(e)?JSON.parse(e):Y(e)})),a=t((()=>n.componentOption.name)),u=t((()=>{let e=n.data;const t=0===Object.keys(e).length;switch(!0){case"ui-table"===a.value&&t:e=[];break;case"ui-form"===a.value&&t:case"ui-descriptions"===a.value&&t:e={}}return e})),{menus:d}=Oe({viewKey:r.value}),{fields:p,btns:f,transformData:h}=be({menus:d.value,dataPath:o.value.options?.dataPath,labels:o.value.labels,useArgData:!0},u),y=t((()=>{const e=Y(o.value);switch(!0){case"ui-table"===a.value:e.columns=p.value,e.btns=f.value;break;case"ui-form"===a.value:e.labels=p.value;break;case"ui-descriptions"===a.value:e.fields=p.value}return console.log("uo: ",a.value,e),e.data=h?.value,e}));return i((()=>{console.log("hello, onMounted in GC, component subType is ui!")})),(e,t)=>(s(),l("section",Ke,[a.value?(s(),v(g(a.value),M(x({key:0},y.value)),null,16)):c("v-if",!0)]))}}),et={class:"gc-component gc-chart"},tt=e({__name:"echarts",props:{componentOption:{type:Object,default:()=>({})}},setup(e){const n=e,r=t((()=>"s-chart")),o=t((()=>n.componentOption.options||{}));return i((()=>{console.log("hello, onMounted in GC, component subType is echarts!")})),(e,t)=>(s(),l("section",et,[r.value?(s(),v(g(r.value),M(x({key:0},o.value)),null,16)):c("v-if",!0)]))}}),nt={class:"gc__content--container"};var it=ee(e({__name:"content",props:{options:{type:Object,default:()=>({})},group:{type:Object,default:()=>({})},data:{type:[Object,Array],default:()=>({})}},setup(e){const n=e,i=[{name:"ui",component:Qe,description:"公用ui库入库"},{name:"echarts",component:tt,description:"公用echarts库入库"}],r=t((()=>{const e=n.options;return e._options=e.options,e.options=de(e.options)?JSON.parse(e.options):e.options,e})),a=t((()=>`${r.value.subType}`)),u=t((()=>`${r.value.name}`)),c=t((()=>i.find((e=>e.name===a.value))?.component||u.value));return o(r,(()=>{u.value}),{immediate:!0}),(t,n)=>(s(),l("section",nt,[c.value?(s(),v(g(c.value),{key:1,"component-option":r.value,group:e.group,data:e.data},null,8,["component-option","group","data"])):(s(),l(_,{key:0},[k("Component is not defined!")],64))]))}}),[["__scopeId","data-v-15cebef4"]]);const rt={class:"gc-component gc-engine"},ot={key:0,class:"gc-header"},at={class:"gc-main"};var st=ee(e({__name:"index",props:{layoutIndex:{type:Number,default:0},group:{type:Object,default:()=>({})},data:{type:[Array,Object],default:()=>({})}},emits:["change"],setup(e,{emit:n}){const i=e,{apis:r}=m(Tn),o=t((()=>i.data)),a=t((()=>i.group)),d=F(a.value,"currentAna.asyncConf.uniques",[]),p=t((()=>i.group.currentAna.components||[])),f=t((()=>0===F(i.group.header,"hidden"))),h=t((()=>r.value?.find((e=>d.includes(e.base.unique))))),v=t((()=>h.value?.options?.params));return T(Cn,{group:i.group,data:i.data,dataRef:o,paramsRef:v}),function(){const e=F(i.group,"pubsub.header.pubs.toggleDimension");if(!e)return;ve(e.key).subscribe((e=>{const t=e.item;n("change",{btn:t,type:"module"})}))}(),(t,n)=>(s(),l("section",rt,[f.value?(s(),l("section",ot,[u(t.$slots,`header${e.layoutIndex}`,{},(()=>[w(Je,{group:a.value,options:a.value.header,"layout-index":e.layoutIndex,data:e.data},null,8,["group","options","layout-index","data"])]),!0)])):c("v-if",!0),y("section",at,[(s(!0),l(_,null,O(p.value,((n,i)=>(s(),l("section",{key:i,class:"main-content"},[c(" diy "),"slot"===n.type?u(t.$slots,n.slot,{key:0,data:e.data,group:a.value},void 0,!0):(s(),l(_,{key:1},[c(" common "),w(it,{options:n,data:e.data,group:a.value},null,8,["options","data","group"])],64))])))),128))])]))}}),[["__scopeId","data-v-51d89b8d"]]);const lt={class:"gc__content--container"},ut={style:{color:"#ff9a4c"}},ct=(e=>(E("data-v-8b357b74"),e=e(),P(),e))((()=>y("h4",null,"数据为:",-1)));var dt=ee(e({__name:"slot",props:{data:{type:[Array,Object],default:()=>({})},group:{type:Object,defaut:()=>({})},options:{type:Object,default:()=>({})}},setup:e=>(t,n)=>(s(),l("section",lt,[y("p",null,[k(" 插槽位： "),y("span",ut,I(e.options.slot||e.options.i),1),k(" , 请添加组件 ")]),ct,y("p",null,I(e.data),1)]))}),[["__scopeId","data-v-8b357b74"]]);const pt="GC_ITEM_CLICK",ft="GC_LAYOUT_UPDATED",ht="GC_REMOVE_ITEM",vt="GC_ENGINE_CHANGE",gt={class:"float-box"};var yt=ee(e({__name:"view",props:{layout:{type:Object,default:()=>({})},group:{type:Object,default:()=>({})},base:{type:Object,default:()=>({})},dataJson:{type:Object,default:()=>({})},slots:{type:Array,default:()=>[]}},emits:["update:slots"],setup(e,{emit:n}){const i=e,{gcUnique:r}=m(Tn)||{},a=L(i,"slots",n),c=t((()=>i.base||{})),d=t((()=>c.value.layout||{})),p=t((()=>i.dataJson||{})),f=t((()=>i.layout||{})),h=t((()=>i.group||{})),g=t((()=>{const e=f.value.layout||[];return e.map((e=>e.i=Number(e.i))),e})),b=t((()=>c.value.options?.activeRowHeight)),x=t((()=>{const e=[];return g.value.map((t=>{const n=h.value[t.i]||{},i=p.value[t.i];(n._slots?.length?n._slots:[{slot:t.i}]).map((t=>{e.push({name:t.slot,props:{data:i,group:n}})}))})),e})),k=t((()=>(c.value.layout?.controlIgnore||[]).map((e=>String(e))))),I=t((()=>({cols:f.value.base.colNum,rows:f.value.base.maxRows,gap:f.value.base.margin,auto:f.value.base.options?.activeRowHeight,yGrid:f.value.base.rowHeight})));function E(e){const t={};return!0===e.hAuto&&(t.height="fit-content"),t}return o(x,(e=>{a.value=e}),{immediate:!0,deep:!0}),(e,t)=>(s(),l("section",{class:j(["gc-layout gc-grid",[{controlItem:d.value.controlItem,activeRowHeight:!0===b.value}]])},[w(C(ie),{layout:f.value.layout,"onUpdate:layout":t[0]||(t[0]=e=>f.value.layout=e),class:"gridLayout",config:I.value},{default:S((()=>[(s(!0),l(_,null,O(g.value,((t,n)=>(s(),v(C(ae),{key:t.i,class:j(["gridItem",[`grid-item-${t.i}`,{noControl:k.value.includes(String(t.i)),control:!k.value.includes(String(t.i))}].concat(t.classList||[])]),"data-index":n,"item-config":t,style:z(E(t)),onClick:e=>function(e){W.publish(pt,{item:e})}(t)},{default:S((()=>[w(Ce,{class:"group-content",options:c.value.style,item:t},{default:S((()=>[h.value[t.i]?(s(),v(st,{key:1,"layout-index":t.i,group:h.value[t.i],data:p.value[t.i],onChange:({btn:e,type:n})=>{return i={layout:t,group:h.value[t.i],btn:e,type:n},void W.publish(r+vt,i);var i}},A({_:2},[O(h.value[t.i]._slots||[],((n,i)=>({name:n.slot,fn:S((()=>[y("section",{class:"engine-child",style:z(n.style||{})},[u(e.$slots,n.slot,{data:p.value[t.i],group:h.value[t.i]},(()=>[w(dt,{group:h.value[t.i],options:n,data:p.value[t.i]},null,8,["group","options","data"])]),!0)],4)]))})))]),1032,["layout-index","group","data","onChange"])):u(e.$slots,t.i,{key:0,data:p.value[t.i]},(()=>[w(dt,{options:t,data:p.value[t.i]},null,8,["options","data"])]),!0)])),_:2},1032,["options","item"]),y("section",gt,[u(e.$slots,`float-${n}`,{},void 0,!0)])])),_:2},1032,["class","data-index","item-config","style","onClick"])))),128))])),_:3},8,["layout","config"])],2))}}),[["__scopeId","data-v-caf29c1e"]]);const mt=["data-index"],bt={class:"grid-item-child"},wt=e({__name:"waterfall",props:{base:{type:Object,default:()=>({})},layoutBase:{type:Object,default:()=>({})},layout:{type:Array,default:()=>[]}},emits:[],setup(e,{emit:r}){const a=e,c=L(a,"layout",r),d=n(null),{width:p}=$(d),f=n([]),v=t((()=>a.base||{})),g=t((()=>{const e={...a.layoutBase};return delete e.groups,e})),m=t((()=>a.layoutBase.groups||[])),b=t((()=>(v.value.layout?.controlIgnore||[]).map((e=>String(e))))),x=t((()=>a.layoutBase)),k=t((()=>Q(x.value.margin,{width:0,height:0}))),I=t((()=>k.value.xGap+"px")),E=t((()=>k.value.yGap+"px")),P=h({xRanges:[],yRanges:[],filterXRanges:[],filterYRanges:[],points:[],items:[]});async function M(){p.value<=0||(function(){f.value=[];let e=[];m.value.map((t=>{e=e.concat(t.indexs||[])})),c.value.map((t=>{const n=m.value.find((e=>String(e.i)===String(t.i)));n&&(t.type="group",t.layout=Y(n.indexs.map((e=>c.value.find((t=>String(t.i)===String(e))))))),e.includes(String(t.i))||f.value.push(t)}))}(),function(){const e=[],t=[];f.value.map((n=>{const i=n.x,r=n.x+n.w,o=n.y,a=n.y+n.h;n.rangeX=[i,r],n.rangeY=[o,a],e.push([i,r]),t.push([o,a])})),P.xRanges=e.sort(((e,t)=>e[1]-t[1])),P.yRanges=t.sort(((e,t)=>e[1]-t[1]));const n=[],i=[];P.xRanges.map((e=>{n.find((t=>{if(e[0]>=t[0]&&e[1]<=t[1])return!0}))||n.push([0,e[1]])})),P.yRanges.map((e=>{i.find((t=>{if(e[0]>=t[0]&&e[1]<=t[1])return!0}))||i.push([0,e[1]])})),P.filterXRanges=n.sort(((e,t)=>e[1]-t[1])),P.filterYRanges=i.sort(((e,t)=>e[1]-t[1]))}(),function(){P.points=[];const e=P.filterXRanges,t=P.filterYRanges;f.value.map((n=>{const i=n.rangeX,r=n.rangeY,o=e.findIndex((e=>{if(i[0]>=e[0]&&i[1]<=e[1])return!0})),a=t.findIndex((e=>{if(r[0]>=e[0]&&r[1]<=e[1])return!0}));n.point=[e[o],t[a]],P.points.push(n.point)}))}(),function(){const e=Y(f.value).sort(((e,t)=>e.rangeX[1]-t.rangeX[1]));let t=0;e.map((e=>{const n=e.rangeX;n[1]>t&&(t=n[1])}));const n=Array.from(new Set(e.map((e=>e.rangeX[0]))));n.push(t);const i=n.filter((t=>{let n=!0;return e.find((e=>{const i=e.rangeX;if(t>i[0]&&t<i[1])return n=!1,!0})),n})),r=[];i.map(((e,t)=>{t+1!==i.length&&r.push([e,i[t+1]])})),e.map((e=>{const t=e.rangeX,n=r.findIndex((e=>t[0]>=e[0]&&t[1]<=e[1]));f.value.find((t=>t.i===e.i)).colIndex=n}))}(),function(){const e=[],t=f.value.sort(((e,t)=>e.rangeY[0]-t.rangeY[0]));t.map((t=>{const n=t.colIndex;e[n]||(e[n]={style:{flexWrap:"wrap",gap:`${E.value} ${I.value}`},items:[]});const i=Number(String(e[n].style.width||"0vw").replace("vw","").replace("px","")||0),r=100*t.w/x.value.colNum;i<r&&(e[n].style.width=D(r+"vw")),t.style={width:D(r+"vw"),minHeight:t.h*x.value.rowHeight+"px"},e[n].items.push(t)})),e.map(((t,n)=>{const i=t.style;n>0&&(i.marginLeft=I.value);const r=Number(String(i.width||0).replace("vw","").replace("px","")||0),o=t.items.sort(((e,t)=>Number(e.x)-Number(t.x))).sort(((e,t)=>Number(e.y)-Number(t.y)));let a=0,s=0;const l={};o.map(((e,t)=>{if(l[e.y]?l[e.y].items.push(e):l[e.y]={items:[e]},0===t||0===a)a=100*e.w/x.value.colNum;else{const n=o[t-1],i=e.w;n.rangeX[1]===e.rangeX[0]?a+=100*i/x.value.colNum:a=100*i/x.value.colNum}a>s&&(s=a)})),function(e,t,n){const i=Number(I.value.replace("px","")),r=Number(E.value.replace("px","")),o=Object.keys(e).length,a=r*(o-1)/o,s=t>0?(n-1)*i/n:0;Object.keys(e).map((t=>{const n=e[t].items,r=n.length||0,o=(s+i*(r-1))/r;n.map((e=>{e.style.minHeight=`calc(${e.style.minHeight} - ${a}px)`,e.style.width=`calc(${e.style.width} - ${o}px)`}))}))}(l,n,e.length),s>r&&(i.width=D(s+"vw")),i.width=`calc(${D(s+"vw")} - ${I.value} * ${(e.length-1)/e.length})`})),P.items=e}())}i((()=>{M()})),o(f,(()=>{})),o(p,(()=>{M()}));const T=new RegExp(/^[\d.]+vw$/);function D(e){if(!T.test(e))return e;return Number(e.replace("vw",""))*p.value/100+"px"}return(t,n)=>(s(),l("section",{ref_key:"waterfall",ref:d,class:"waterfall-box"},[(s(!0),l(_,null,O(P.items,((n,i)=>(s(),l("section",{key:i,class:"waterfall-column",style:z(n.style)},[(s(!0),l(_,null,O(n.items,((n,i)=>(s(),l("section",{key:i,class:j(["waterfall-item gridItem",[`grid-item-${n.i}`,{noControl:b.value.includes(String(n.i)),control:!b.value.includes(String(n.i)),isGroup:"group"===n.type}].concat(n.classList||[])]),"data-index":i,style:z(n.style)},["group"===n.type?(s(),l(_,{key:0},[u(t.$slots,n.i,{},void 0,!0),y("section",bt,[w(C(xt),{base:e.base,layoutBase:{...g.value,colNum:n.w},layout:n.layout},A({_:2},[O(n.layout,((e,n)=>({name:String(e.i),fn:S((()=>[u(t.$slots,e.i,{},void 0,!0)]))})))]),1032,["base","layoutBase","layout"])])],64)):u(t.$slots,n.i,{key:1},void 0,!0)],14,mt)))),128))],4)))),128))],512))}});var xt=ee(wt,[["__scopeId","data-v-0829bd4d"]]);var St=ee(e({__name:"view",props:{layout:{type:Object,default:()=>({})},group:{type:Object,default:()=>({})},base:{type:Object,default:()=>({})},dataJson:{type:Object,default:()=>({})},slots:{type:Array,default:()=>[]}},emits:["update:slots"],setup(e,{emit:n}){const i=e,{gcUnique:r}=m(Tn)||{},a=L(i,"slots",n),d=t((()=>i.base||{})),p=t((()=>d.value.layout||{})),f=t((()=>i.dataJson||{})),h=t((()=>i.layout||{})),g=t((()=>F(h.value,"base.groups",[]))),b=t((()=>g.value.map((e=>String(e.i))))),x=t((()=>i.group||{})),_=t((()=>{const e=h.value.layout||[];return e.map((e=>e.i=Number(e.i))),e})),k=t((()=>d.value.options?.activeRowHeight)),I=t((()=>{const e=[];return _.value.map((t=>{const n=x.value[t.i]||{},i=f.value?.[t.i];(n._slots?.length?n._slots:[{slot:t.i}]).map((t=>{e.push({name:t.slot,props:{data:i,group:n}})}))})),e}));return o(I,(e=>{a.value=e}),{immediate:!0,deep:!0}),(e,t)=>(s(),l("section",{class:j(["gc-layout gc-waterfall",[{controlItem:p.value.controlItem,activeRowHeight:!0===k.value}]])},[w(C(xt),{base:d.value,"layout-base":h.value.base,layout:_.value},A({_:2},[O(_.value,((t,n)=>({name:t.i,fn:S((()=>[w(Ce,{class:j(["group-content",[{gcGroupBox:b.value.includes(String(t.i))}]]),options:d.value.style,item:t,onClick:e=>function(e){W.publish(r+pt,{item:e})}(t)},{default:S((()=>[x.value[t.i]?(s(),v(st,{key:1,"layout-index":t.i,group:x.value[t.i],data:f.value[t.i],onChange:({btn:e,type:n})=>{return i={layout:t,group:x.value[t.i],btn:e,type:n},void W.publish(r+vt,i);var i}},A({_:2},[O(x.value[t.i]._slots||[],((n,i)=>({name:n.slot,fn:S((()=>[y("section",{class:"engine-child",style:z(n.style||{})},[u(e.$slots,n.slot,{data:f.value[t.i],group:x.value[t.i]},(()=>[b.value.includes(String(t.i))?c("v-if",!0):(s(),v(dt,{key:0,group:x.value[t.i],options:n,data:f.value[t.i]},null,8,["group","options","data"]))]),!0)],4)]))})))]),1032,["layout-index","group","data","onChange"])):u(e.$slots,t.i,{key:0,data:f.value[t.i]},(()=>[b.value.includes(String(t.i))?c("v-if",!0):(s(),v(dt,{key:0,options:t,data:f.value[t.i]},null,8,["options","data"]))]),!0)])),_:2},1032,["class","options","item","onClick"])]))})))]),1032,["base","layout-base","layout"])],2))}}),[["__scopeId","data-v-51bab36f"]]);function _t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var Ot,kt=(Ot=_t((function(e,t){e.exports=function(){var e={};Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(e){return!(!e||!e.Window)&&e instanceof e.Window};var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.getWindow=function(t){return(0,e.default)(t)?t:(t.ownerDocument||t).defaultView||i.window},t.init=r,t.window=t.realWindow=void 0;var n=void 0;t.realWindow=n;var i=void 0;function r(e){t.realWindow=n=e;var r=e.document.createTextNode("");r.ownerDocument!==e.document&&"function"==typeof e.wrap&&e.wrap(r)===r&&(e=e.wrap(e)),t.window=i=e}t.window=i,"undefined"!=typeof window&&window&&r(window);var o={};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s=function(e){return!!e&&"object"===a(e)},l=function(e){return"function"==typeof e},u={window:function(n){return n===t.window||(0,e.default)(n)},docFrag:function(e){return s(e)&&11===e.nodeType},object:s,func:l,number:function(e){return"number"==typeof e},bool:function(e){return"boolean"==typeof e},string:function(e){return"string"==typeof e},element:function(e){if(!e||"object"!==a(e))return!1;var n=t.getWindow(e)||t.window;return/object|function/.test("undefined"==typeof Element?"undefined":a(Element))?e instanceof Element||e instanceof n.Element:1===e.nodeType&&"string"==typeof e.nodeName},plainObject:function(e){return s(e)&&!!e.constructor&&/function Object\b/.test(e.constructor.toString())},array:function(e){return s(e)&&void 0!==e.length&&l(e.splice)}};o.default=u;var c={};function d(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.prepared.axis;"x"===n?(t.coords.cur.page.y=t.coords.start.page.y,t.coords.cur.client.y=t.coords.start.client.y,t.coords.velocity.client.y=0,t.coords.velocity.page.y=0):"y"===n&&(t.coords.cur.page.x=t.coords.start.page.x,t.coords.cur.client.x=t.coords.start.client.x,t.coords.velocity.client.x=0,t.coords.velocity.page.x=0)}}function p(e){var t=e.iEvent,n=e.interaction;if("drag"===n.prepared.name){var i=n.prepared.axis;if("x"===i||"y"===i){var r="x"===i?"y":"x";t.page[r]=n.coords.start.page[r],t.client[r]=n.coords.start.client[r],t.delta[r]=0}}}Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var f={id:"actions/drag",install:function(e){var t=e.actions,n=e.Interactable,i=e.defaults;n.prototype.draggable=f.draggable,t.map.drag=f,t.methodDict.drag="draggable",i.actions.drag=f.defaults},listeners:{"interactions:before-action-move":d,"interactions:action-resume":d,"interactions:action-move":p,"auto-start:check":function(e){var t=e.interaction,n=e.interactable,i=e.buttons,r=n.options.drag;if(r&&r.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(i&n.options.drag.mouseButtons)))return e.action={name:"drag",axis:"start"===r.lockAxis?r.startAxis:r.lockAxis},!1}},draggable:function(e){return o.default.object(e)?(this.options.drag.enabled=!1!==e.enabled,this.setPerAction("drag",e),this.setOnEvents("drag",e),/^(xy|x|y|start)$/.test(e.lockAxis)&&(this.options.drag.lockAxis=e.lockAxis),/^(xy|x|y)$/.test(e.startAxis)&&(this.options.drag.startAxis=e.startAxis),this):o.default.bool(e)?(this.options.drag.enabled=e,this):this.options.drag},beforeMove:d,move:p,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},h=f;c.default=h;var v={};Object.defineProperty(v,"__esModule",{value:!0}),v.default=void 0;var g={init:function(e){var t=e;g.document=t.document,g.DocumentFragment=t.DocumentFragment||y,g.SVGElement=t.SVGElement||y,g.SVGSVGElement=t.SVGSVGElement||y,g.SVGElementInstance=t.SVGElementInstance||y,g.Element=t.Element||y,g.HTMLElement=t.HTMLElement||g.Element,g.Event=t.Event,g.Touch=t.Touch||y,g.PointerEvent=t.PointerEvent||t.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function y(){}var m=g;v.default=m;var b={};Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var w={init:function(e){var t=v.default.Element,n=e.navigator||{};w.supportsTouch="ontouchstart"in e||o.default.func(e.DocumentTouch)&&v.default.document instanceof e.DocumentTouch,w.supportsPointerEvent=!1!==n.pointerEnabled&&!!v.default.PointerEvent,w.isIOS=/iP(hone|od|ad)/.test(n.platform),w.isIOS7=/iP(hone|od|ad)/.test(n.platform)&&/OS 7[^\d]/.test(n.appVersion),w.isIe9=/MSIE 9/.test(n.userAgent),w.isOperaMobile="Opera"===n.appName&&w.supportsTouch&&/Presto/.test(n.userAgent),w.prefixedMatchesSelector="matches"in t.prototype?"matches":"webkitMatchesSelector"in t.prototype?"webkitMatchesSelector":"mozMatchesSelector"in t.prototype?"mozMatchesSelector":"oMatchesSelector"in t.prototype?"oMatchesSelector":"msMatchesSelector",w.pEventTypes=w.supportsPointerEvent?v.default.PointerEvent===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,w.wheelEvent=v.default.document&&"onmousewheel"in v.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},x=w;b.default=x;var S={};function _(e){var t=e.parentNode;if(o.default.docFrag(t)){for(;(t=t.host)&&o.default.docFrag(t););return t}return t}function O(e,n){return t.window!==t.realWindow&&(n=n.replace(/\/deep\//g," ")),e[b.default.prefixedMatchesSelector](n)}Object.defineProperty(S,"__esModule",{value:!0}),S.closest=function(e,t){for(;o.default.element(e);){if(O(e,t))return e;e=_(e)}return null},S.getActualElement=function(e){return e.correspondingUseElement||e},S.getElementClientRect=P,S.getElementRect=function(e){var n=P(e);if(!b.default.isIOS7&&n){var i=E(t.getWindow(e));n.left+=i.x,n.right+=i.x,n.top+=i.y,n.bottom+=i.y}return n},S.getPath=function(e){for(var t=[];e;)t.push(e),e=_(e);return t},S.getScrollXY=E,S.indexOfDeepestElement=function(e){for(var n,i=[],r=0;r<e.length;r++){var o=e[r],a=e[n];if(o&&r!==n)if(a){var s=k(o),l=k(a);if(s!==o.ownerDocument)if(l!==o.ownerDocument)if(s!==l){i=i.length?i:I(a);var u=void 0;if(a instanceof v.default.HTMLElement&&o instanceof v.default.SVGElement&&!(o instanceof v.default.SVGSVGElement)){if(o===l)continue;u=o.ownerSVGElement}else u=o;for(var c=I(u,a.ownerDocument),d=0;c[d]&&c[d]===i[d];)d++;var p=[c[d-1],c[d],i[d]];if(p[0])for(var f=p[0].lastChild;f;){if(f===p[1]){n=r,i=c;break}if(f===p[2])break;f=f.previousSibling}}else h=o,g=a,(parseInt(t.getWindow(h).getComputedStyle(h).zIndex,10)||0)>=(parseInt(t.getWindow(g).getComputedStyle(g).zIndex,10)||0)&&(n=r);else n=r}else n=r}var h,g;return n},S.matchesSelector=O,S.matchesUpTo=function(e,t,n){for(;o.default.element(e);){if(O(e,t))return!0;if((e=_(e))===n)return O(e,t)}return!1},S.nodeContains=function(e,t){if(e.contains)return e.contains(t);for(;t;){if(t===e)return!0;t=t.parentNode}return!1},S.parentNode=_,S.trySelector=function(e){return!!o.default.string(e)&&(v.default.document.querySelector(e),!0)};var k=function(e){return e.parentNode||e.host};function I(e,t){for(var n,i=[],r=e;(n=k(r))&&r!==t&&n!==r.ownerDocument;)i.unshift(r),r=n;return i}function E(e){return{x:(e=e||t.window).scrollX||e.document.documentElement.scrollLeft,y:e.scrollY||e.document.documentElement.scrollTop}}function P(e){var t=e instanceof v.default.SVGElement?e.getBoundingClientRect():e.getClientRects()[0];return t&&{left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width||t.right-t.left,height:t.height||t.bottom-t.top}}var j={};Object.defineProperty(j,"__esModule",{value:!0}),j.default=function(e,t){for(var n in t)e[n]=t[n];return e};var M={};function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function C(e,t,n){return"parent"===e?(0,S.parentNode)(n):"self"===e?t.getRect(n):(0,S.closest)(n,e)}Object.defineProperty(M,"__esModule",{value:!0}),M.addEdges=function(e,t,n){e.left&&(t.left+=n.x),e.right&&(t.right+=n.x),e.top&&(t.top+=n.y),e.bottom&&(t.bottom+=n.y),t.width=t.right-t.left,t.height=t.bottom-t.top},M.getStringOptionResult=C,M.rectToXY=function(e){return e&&{x:"x"in e?e.x:e.left,y:"y"in e?e.y:e.top}},M.resolveRectLike=function(e,t,n,i){var r,a=e;return o.default.string(a)?a=C(a,t,n):o.default.func(a)&&(a=a.apply(void 0,function(e){if(Array.isArray(e))return T(e)}(r=i)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),o.default.element(a)&&(a=(0,S.getElementRect)(a)),a},M.tlbrToXywh=function(e){return!e||"x"in e&&"y"in e||((e=(0,j.default)({},e)).x=e.left||0,e.y=e.top||0,e.width=e.width||(e.right||0)-e.x,e.height=e.height||(e.bottom||0)-e.y),e},M.xywhToTlbr=function(e){return!e||"left"in e&&"top"in e||((e=(0,j.default)({},e)).left=e.x||0,e.top=e.y||0,e.right=e.right||e.left+e.width,e.bottom=e.bottom||e.top+e.height),e};var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.default=function(e,t,n){var i=e.options[n],r=i&&i.origin||e.options.origin,o=(0,M.resolveRectLike)(r,e,t,[e&&t]);return(0,M.rectToXY)(o)||{x:0,y:0}};var A={};function D(e){return e.trim().split(/ +/)}Object.defineProperty(A,"__esModule",{value:!0}),A.default=function e(t,n,i){if(i=i||{},o.default.string(t)&&-1!==t.search(" ")&&(t=D(t)),o.default.array(t))return t.reduce((function(t,r){return(0,j.default)(t,e(r,n,i))}),i);if(o.default.object(t)&&(n=t,t=""),o.default.func(n))i[t]=i[t]||[],i[t].push(n);else if(o.default.array(n))for(var r=0;r<n.length;r++){var a;a=n[r],e(t,a,i)}else if(o.default.object(n))for(var s in n){var l=D(s).map((function(e){return"".concat(t).concat(e)}));e(l,n[s],i)}return i};var R={};Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0,R.default=function(e,t){return Math.sqrt(e*e+t*t)};var N={};Object.defineProperty(N,"__esModule",{value:!0}),N.default=function(e,t){e.__set||(e.__set={});var n=function(n){"function"!=typeof e[n]&&"__set"!==n&&Object.defineProperty(e,n,{get:function(){return n in e.__set?e.__set[n]:e.__set[n]=t[n]},set:function(t){e.__set[n]=t},configurable:!0})};for(var i in t)n(i);return e};var H={};function B(e){return e instanceof v.default.Event||e instanceof v.default.Touch}function W(e,t,n){return e=e||"page",(n=n||{}).x=t[e+"X"],n.y=t[e+"Y"],n}function $(e,t){return t=t||{x:0,y:0},b.default.isOperaMobile&&B(e)?(W("screen",e,t),t.x+=window.scrollX,t.y+=window.scrollY):W("page",e,t),t}function L(e,t){return t=t||{},b.default.isOperaMobile&&B(e)?W("screen",e,t):W("client",e,t),t}function G(e){var t=[];return o.default.array(e)?(t[0]=e[0],t[1]=e[1]):"touchend"===e.type?1===e.touches.length?(t[0]=e.touches[0],t[1]=e.changedTouches[0]):0===e.touches.length&&(t[0]=e.changedTouches[0],t[1]=e.changedTouches[1]):(t[0]=e.touches[0],t[1]=e.touches[1]),t}function F(e){for(var t={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<e.length;n++){var i=e[n];for(var r in t)t[r]+=i[r]}for(var o in t)t[o]/=e.length;return t}Object.defineProperty(H,"__esModule",{value:!0}),H.coordsToEvent=function(e){return{coords:e,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},H.copyCoords=function(e,t){e.page=e.page||{},e.page.x=t.page.x,e.page.y=t.page.y,e.client=e.client||{},e.client.x=t.client.x,e.client.y=t.client.y,e.timeStamp=t.timeStamp},H.getClientXY=L,H.getEventTargets=function(e){var t=o.default.func(e.composedPath)?e.composedPath():e.path;return[S.getActualElement(t?t[0]:e.target),S.getActualElement(e.currentTarget)]},H.getPageXY=$,H.getPointerId=function(e){return o.default.number(e.pointerId)?e.pointerId:e.identifier},H.getPointerType=function(e){return o.default.string(e.pointerType)?e.pointerType:o.default.number(e.pointerType)?[void 0,void 0,"touch","pen","mouse"][e.pointerType]:/touch/.test(e.type||"")||e instanceof v.default.Touch?"touch":"mouse"},H.getTouchPair=G,H.getXY=W,H.isNativePointer=B,H.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},H.pointerAverage=F,Object.defineProperty(H,"pointerExtend",{enumerable:!0,get:function(){return N.default}}),H.setCoordDeltas=function(e,t,n){e.page.x=n.page.x-t.page.x,e.page.y=n.page.y-t.page.y,e.client.x=n.client.x-t.client.x,e.client.y=n.client.y-t.client.y,e.timeStamp=n.timeStamp-t.timeStamp},H.setCoordVelocity=function(e,t){var n=Math.max(t.timeStamp/1e3,.001);e.page.x=t.page.x/n,e.page.y=t.page.y/n,e.client.x=t.client.x/n,e.client.y=t.client.y/n,e.timeStamp=n},H.setCoords=function(e,t,n){var i=t.length>1?F(t):t[0];$(i,e.page),L(i,e.client),e.timeStamp=n},H.setZeroCoords=function(e){e.page.x=0,e.page.y=0,e.client.x=0,e.client.y=0},H.touchAngle=function(e,t){var n=t+"X",i=t+"Y",r=G(e),o=r[1][n]-r[0][n],a=r[1][i]-r[0][i];return 180*Math.atan2(a,o)/Math.PI},H.touchBBox=function(e){if(!e.length)return null;var t=G(e),n=Math.min(t[0].pageX,t[1].pageX),i=Math.min(t[0].pageY,t[1].pageY),r=Math.max(t[0].pageX,t[1].pageX),o=Math.max(t[0].pageY,t[1].pageY);return{x:n,y:i,left:n,top:i,right:r,bottom:o,width:r-n,height:o-i}},H.touchDistance=function(e,t){var n=t+"X",i=t+"Y",r=G(e),o=r[0][n]-r[1][n],a=r[0][i]-r[1][i];return(0,R.default)(o,a)};var Y={};function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Y,"__esModule",{value:!0}),Y.BaseEvent=void 0;var q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),X(this,"immediatePropagationStopped",!1),X(this,"propagationStopped",!1),this._interaction=t}var t,n;return t=e,(n=[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Y.BaseEvent=q,Object.defineProperty(q.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.remove=U.merge=U.from=U.findIndex=U.find=U.contains=void 0,U.contains=function(e,t){return-1!==e.indexOf(t)},U.remove=function(e,t){return e.splice(e.indexOf(t),1)};var Z=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}return e};U.merge=Z,U.from=function(e){return Z([],e)};var V=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1};U.findIndex=V,U.find=function(e,t){return e[V(e,t)]};var J={};function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(J,"__esModule",{value:!0}),J.DropEvent=void 0;var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(a,e);var t,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=te(i);if(r){var n=te(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}(this,e)});function a(e,t,n){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),ne(ee(i=o.call(this,t._interaction)),"dropzone",void 0),ne(ee(i),"dragEvent",void 0),ne(ee(i),"relatedTarget",void 0),ne(ee(i),"draggable",void 0),ne(ee(i),"propagationStopped",!1),ne(ee(i),"immediatePropagationStopped",!1);var r="dragleave"===n?e.prev:e.cur,s=r.element,l=r.dropzone;return i.type=n,i.target=s,i.currentTarget=s,i.dropzone=l,i.dragEvent=t,i.relatedTarget=t.target,i.draggable=t.interactable,i.timeStamp=t.timeStamp,i}return t=a,(n=[{key:"reject",value:function(){var e=this,t=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&t.cur.dropzone===this.dropzone&&t.cur.element===this.target)if(t.prev.dropzone=this.dropzone,t.prev.element=this.target,t.rejected=!0,t.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var n=t.activeDrops,i=U.findIndex(n,(function(t){var n=t.dropzone,i=t.element;return n===e.dropzone&&i===e.target}));t.activeDrops.splice(i,1);var r=new a(t,this.dragEvent,"dropdeactivate");r.dropzone=this.dropzone,r.target=this.target,this.dropzone.fire(r)}else this.dropzone.fire(new a(t,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y.BaseEvent);J.DropEvent=ie;var re={};function oe(e,t){for(var n=0;n<e.slice().length;n++){var i=e.slice()[n],r=i.dropzone,o=i.element;t.dropzone=r,t.target=o,r.fire(t),t.propagationStopped=t.immediatePropagationStopped=!1}}function ae(e,t){for(var n=function(e,t){for(var n=e.interactables,i=[],r=0;r<n.list.length;r++){var a=n.list[r];if(a.options.drop.enabled){var s=a.options.drop.accept;if(!(o.default.element(s)&&s!==t||o.default.string(s)&&!S.matchesSelector(t,s)||o.default.func(s)&&!s({dropzone:a,draggableElement:t})))for(var l=o.default.string(a.target)?a._context.querySelectorAll(a.target):o.default.array(a.target)?a.target:[a.target],u=0;u<l.length;u++){var c=l[u];c!==t&&i.push({dropzone:a,element:c,rect:a.getRect(c)})}}}return i}(e,t),i=0;i<n.length;i++){var r=n[i];r.rect=r.dropzone.getRect(r.element)}return n}function se(e,t,n){for(var i=e.dropState,r=e.interactable,o=e.element,a=[],s=0;s<i.activeDrops.length;s++){var l=i.activeDrops[s],u=l.dropzone,c=l.element,d=l.rect;a.push(u.dropCheck(t,n,r,o,c,d)?c:null)}var p=S.indexOfDeepestElement(a);return i.activeDrops[p]||null}function le(e,t,n){var i=e.dropState,r={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===n.type&&(r.activate=new J.DropEvent(i,n,"dropactivate"),r.activate.target=null,r.activate.dropzone=null),"dragend"===n.type&&(r.deactivate=new J.DropEvent(i,n,"dropdeactivate"),r.deactivate.target=null,r.deactivate.dropzone=null),i.rejected||(i.cur.element!==i.prev.element&&(i.prev.dropzone&&(r.leave=new J.DropEvent(i,n,"dragleave"),n.dragLeave=r.leave.target=i.prev.element,n.prevDropzone=r.leave.dropzone=i.prev.dropzone),i.cur.dropzone&&(r.enter=new J.DropEvent(i,n,"dragenter"),n.dragEnter=i.cur.element,n.dropzone=i.cur.dropzone)),"dragend"===n.type&&i.cur.dropzone&&(r.drop=new J.DropEvent(i,n,"drop"),n.dropzone=i.cur.dropzone,n.relatedTarget=i.cur.element),"dragmove"===n.type&&i.cur.dropzone&&(r.move=new J.DropEvent(i,n,"dropmove"),r.move.dragmove=n,n.dropzone=i.cur.dropzone)),r}function ue(e,t){var n=e.dropState,i=n.activeDrops,r=n.cur,o=n.prev;t.leave&&o.dropzone.fire(t.leave),t.enter&&r.dropzone.fire(t.enter),t.move&&r.dropzone.fire(t.move),t.drop&&r.dropzone.fire(t.drop),t.deactivate&&oe(i,t.deactivate),n.prev.dropzone=r.dropzone,n.prev.element=r.element}function ce(e,t){var n=e.interaction,i=e.iEvent,r=e.event;if("dragmove"===i.type||"dragend"===i.type){var o=n.dropState;t.dynamicDrop&&(o.activeDrops=ae(t,n.element));var a=i,s=se(n,a,r);o.rejected=o.rejected&&!!s&&s.dropzone===o.cur.dropzone&&s.element===o.cur.element,o.cur.dropzone=s&&s.dropzone,o.cur.element=s&&s.element,o.events=le(n,0,a)}}Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var de={id:"actions/drop",install:function(e){var t=e.actions,n=e.interactStatic,i=e.Interactable,r=e.defaults;e.usePlugin(c.default),i.prototype.dropzone=function(e){return function(e,t){if(o.default.object(t)){if(e.options.drop.enabled=!1!==t.enabled,t.listeners){var n=(0,A.default)(t.listeners),i=Object.keys(n).reduce((function(e,t){return e[/^(enter|leave)/.test(t)?"drag".concat(t):/^(activate|deactivate|move)/.test(t)?"drop".concat(t):t]=n[t],e}),{});e.off(e.options.drop.listeners),e.on(i),e.options.drop.listeners=i}return o.default.func(t.ondrop)&&e.on("drop",t.ondrop),o.default.func(t.ondropactivate)&&e.on("dropactivate",t.ondropactivate),o.default.func(t.ondropdeactivate)&&e.on("dropdeactivate",t.ondropdeactivate),o.default.func(t.ondragenter)&&e.on("dragenter",t.ondragenter),o.default.func(t.ondragleave)&&e.on("dragleave",t.ondragleave),o.default.func(t.ondropmove)&&e.on("dropmove",t.ondropmove),/^(pointer|center)$/.test(t.overlap)?e.options.drop.overlap=t.overlap:o.default.number(t.overlap)&&(e.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(e.options.drop.accept=t.accept),"checker"in t&&(e.options.drop.checker=t.checker),e}return o.default.bool(t)?(e.options.drop.enabled=t,e):e.options.drop}(this,e)},i.prototype.dropCheck=function(e,t,n,i,r,a){return function(e,t,n,i,r,a,s){var l=!1;if(!(s=s||e.getRect(a)))return!!e.options.drop.checker&&e.options.drop.checker(t,n,l,e,a,i,r);var u=e.options.drop.overlap;if("pointer"===u){var c=(0,z.default)(i,r,"drag"),d=H.getPageXY(t);d.x+=c.x,d.y+=c.y;var p=d.x>s.left&&d.x<s.right,f=d.y>s.top&&d.y<s.bottom;l=p&&f}var h=i.getRect(r);if(h&&"center"===u){var v=h.left+h.width/2,g=h.top+h.height/2;l=v>=s.left&&v<=s.right&&g>=s.top&&g<=s.bottom}return h&&o.default.number(u)&&(l=Math.max(0,Math.min(s.right,h.right)-Math.max(s.left,h.left))*Math.max(0,Math.min(s.bottom,h.bottom)-Math.max(s.top,h.top))/(h.width*h.height)>=u),e.options.drop.checker&&(l=e.options.drop.checker(t,n,l,e,a,i,r)),l}(this,e,t,n,i,r,a)},n.dynamicDrop=function(t){return o.default.bool(t)?(e.dynamicDrop=t,n):e.dynamicDrop},(0,j.default)(t.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),t.methodDict.drop="dropzone",e.dynamicDrop=!1,r.actions.drop=de.defaults},listeners:{"interactions:before-action-start":function(e){var t=e.interaction;"drag"===t.prepared.name&&(t.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(e,t){var n=e.interaction,i=(e.event,e.iEvent);if("drag"===n.prepared.name){var r=n.dropState;r.activeDrops=null,r.events=null,r.activeDrops=ae(t,n.element),r.events=le(n,0,i),r.events.activate&&(oe(r.activeDrops,r.events.activate),t.fire("actions/drop:start",{interaction:n,dragEvent:i}))}},"interactions:action-move":ce,"interactions:after-action-move":function(e,t){var n=e.interaction,i=e.iEvent;"drag"===n.prepared.name&&(ue(n,n.dropState.events),t.fire("actions/drop:move",{interaction:n,dragEvent:i}),n.dropState.events={})},"interactions:action-end":function(e,t){if("drag"===e.interaction.prepared.name){var n=e.interaction,i=e.iEvent;ce(e,t),ue(n,n.dropState.events),t.fire("actions/drop:end",{interaction:n,dragEvent:i})}},"interactions:stop":function(e){var t=e.interaction;if("drag"===t.prepared.name){var n=t.dropState;n&&(n.activeDrops=null,n.events=null,n.cur.dropzone=null,n.cur.element=null,n.prev.dropzone=null,n.prev.element=null,n.rejected=!1)}}},getActiveDrops:ae,getDrop:se,getDropEvents:le,fireDropEvents:ue,defaults:{enabled:!1,accept:null,overlap:"pointer"}},pe=de;re.default=pe;var fe={};function he(e){var t=e.interaction,n=e.iEvent,i=e.phase;if("gesture"===t.prepared.name){var r=t.pointers.map((function(e){return e.pointer})),a="start"===i,s="end"===i,l=t.interactable.options.deltaSource;if(n.touches=[r[0],r[1]],a)n.distance=H.touchDistance(r,l),n.box=H.touchBBox(r),n.scale=1,n.ds=0,n.angle=H.touchAngle(r,l),n.da=0,t.gesture.startDistance=n.distance,t.gesture.startAngle=n.angle;else if(s){var u=t.prevEvent;n.distance=u.distance,n.box=u.box,n.scale=u.scale,n.ds=0,n.angle=u.angle,n.da=0}else n.distance=H.touchDistance(r,l),n.box=H.touchBBox(r),n.scale=n.distance/t.gesture.startDistance,n.angle=H.touchAngle(r,l),n.ds=n.scale-t.gesture.scale,n.da=n.angle-t.gesture.angle;t.gesture.distance=n.distance,t.gesture.angle=n.angle,o.default.number(n.scale)&&n.scale!==1/0&&!isNaN(n.scale)&&(t.gesture.scale=n.scale)}}Object.defineProperty(fe,"__esModule",{value:!0}),fe.default=void 0;var ve={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(e){var t=e.actions,n=e.Interactable,i=e.defaults;n.prototype.gesturable=function(e){return o.default.object(e)?(this.options.gesture.enabled=!1!==e.enabled,this.setPerAction("gesture",e),this.setOnEvents("gesture",e),this):o.default.bool(e)?(this.options.gesture.enabled=e,this):this.options.gesture},t.map.gesture=ve,t.methodDict.gesture="gesturable",i.actions.gesture=ve.defaults},listeners:{"interactions:action-start":he,"interactions:action-move":he,"interactions:action-end":he,"interactions:new":function(e){e.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(e){if(!(e.interaction.pointers.length<2)){var t=e.interactable.options.gesture;if(t&&t.enabled)return e.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""}},ge=ve;fe.default=ge;var ye={};function me(e,t,n,i,r,a,s){if(!t)return!1;if(!0===t){var l=o.default.number(a.width)?a.width:a.right-a.left,u=o.default.number(a.height)?a.height:a.bottom-a.top;if(s=Math.min(s,Math.abs(("left"===e||"right"===e?l:u)/2)),l<0&&("left"===e?e="right":"right"===e&&(e="left")),u<0&&("top"===e?e="bottom":"bottom"===e&&(e="top")),"left"===e){var c=l>=0?a.left:a.right;return n.x<c+s}if("top"===e){var d=u>=0?a.top:a.bottom;return n.y<d+s}if("right"===e)return n.x>(l>=0?a.right:a.left)-s;if("bottom"===e)return n.y>(u>=0?a.bottom:a.top)-s}return!!o.default.element(i)&&(o.default.element(t)?t===i:S.matchesUpTo(i,t,r))}function be(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.resizeAxes){var i=t;n.interactable.options.resize.square?("y"===n.resizeAxes?i.delta.x=i.delta.y:i.delta.y=i.delta.x,i.axes="xy"):(i.axes=n.resizeAxes,"x"===n.resizeAxes?i.delta.y=0:"y"===n.resizeAxes&&(i.delta.x=0))}}Object.defineProperty(ye,"__esModule",{value:!0}),ye.default=void 0;var we={id:"actions/resize",before:["actions/drag"],install:function(e){var t=e.actions,n=e.browser,i=e.Interactable,r=e.defaults;we.cursors=function(e){return e.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(n),we.defaultMargin=n.supportsTouch||n.supportsPointerEvent?20:10,i.prototype.resizable=function(t){return function(e,t,n){return o.default.object(t)?(e.options.resize.enabled=!1!==t.enabled,e.setPerAction("resize",t),e.setOnEvents("resize",t),o.default.string(t.axis)&&/^x$|^y$|^xy$/.test(t.axis)?e.options.resize.axis=t.axis:null===t.axis&&(e.options.resize.axis=n.defaults.actions.resize.axis),o.default.bool(t.preserveAspectRatio)?e.options.resize.preserveAspectRatio=t.preserveAspectRatio:o.default.bool(t.square)&&(e.options.resize.square=t.square),e):o.default.bool(t)?(e.options.resize.enabled=t,e):e.options.resize}(this,t,e)},t.map.resize=we,t.methodDict.resize="resizable",r.actions.resize=we.defaults},listeners:{"interactions:new":function(e){e.interaction.resizeAxes="xy"},"interactions:action-start":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t,r=n.rect;n._rects={start:(0,j.default)({},r),corrected:(0,j.default)({},r),previous:(0,j.default)({},r),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}}(e),be(e)},"interactions:action-move":function(e){!function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t,r=n.interactable.options.resize.invert,o="reposition"===r||"negate"===r,a=n.rect,s=n._rects,l=s.start,u=s.corrected,c=s.delta,d=s.previous;if((0,j.default)(d,u),o){if((0,j.default)(u,a),"reposition"===r){if(u.top>u.bottom){var p=u.top;u.top=u.bottom,u.bottom=p}if(u.left>u.right){var f=u.left;u.left=u.right,u.right=f}}}else u.top=Math.min(a.top,l.bottom),u.bottom=Math.max(a.bottom,l.top),u.left=Math.min(a.left,l.right),u.right=Math.max(a.right,l.left);for(var h in u.width=u.right-u.left,u.height=u.bottom-u.top,u)c[h]=u[h]-d[h];i.edges=n.prepared.edges,i.rect=u,i.deltaRect=c}}(e),be(e)},"interactions:action-end":function(e){var t=e.iEvent,n=e.interaction;if("resize"===n.prepared.name&&n.prepared.edges){var i=t;i.edges=n.prepared.edges,i.rect=n._rects.corrected,i.deltaRect=n._rects.delta}},"auto-start:check":function(e){var t=e.interaction,n=e.interactable,i=e.element,r=e.rect,a=e.buttons;if(r){var s=(0,j.default)({},t.coords.cur.page),l=n.options.resize;if(l&&l.enabled&&(!t.pointerIsDown||!/mouse|pointer/.test(t.pointerType)||0!=(a&l.mouseButtons))){if(o.default.object(l.edges)){var u={left:!1,right:!1,top:!1,bottom:!1};for(var c in u)u[c]=me(c,l.edges[c],s,t._latestPointer.eventTarget,i,r,l.margin||we.defaultMargin);u.left=u.left&&!u.right,u.top=u.top&&!u.bottom,(u.left||u.right||u.top||u.bottom)&&(e.action={name:"resize",edges:u})}else{var d="y"!==l.axis&&s.x>r.right-we.defaultMargin,p="x"!==l.axis&&s.y>r.bottom-we.defaultMargin;(d||p)&&(e.action={name:"resize",axes:(d?"x":"")+(p?"y":"")})}return!e.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(e){var t=e.edges,n=e.axis,i=e.name,r=we.cursors,o=null;if(n)o=r[i+n];else if(t){for(var a="",s=["top","bottom","left","right"],l=0;l<s.length;l++){var u=s[l];t[u]&&(a+=u)}o=r[a]}return o},defaultMargin:null},xe=we;ye.default=xe;var Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Se.default=void 0;var _e={id:"actions",install:function(e){e.usePlugin(fe.default),e.usePlugin(ye.default),e.usePlugin(c.default),e.usePlugin(re.default)}};Se.default=_e;var Oe={};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.default=void 0;var ke,Ie,Ee=0,Pe={request:function(e){return ke(e)},cancel:function(e){return Ie(e)},init:function(e){if(ke=e.requestAnimationFrame,Ie=e.cancelAnimationFrame,!ke)for(var t=["ms","moz","webkit","o"],n=0;n<t.length;n++){var i=t[n];ke=e["".concat(i,"RequestAnimationFrame")],Ie=e["".concat(i,"CancelAnimationFrame")]||e["".concat(i,"CancelRequestAnimationFrame")]}ke=ke&&ke.bind(e),Ie=Ie&&Ie.bind(e),ke||(ke=function(t){var n=Date.now(),i=Math.max(0,16-(n-Ee)),r=e.setTimeout((function(){t(n+i)}),i);return Ee=n+i,r},Ie=function(e){return clearTimeout(e)})}};Oe.default=Pe;var je={};Object.defineProperty(je,"__esModule",{value:!0}),je.default=void 0,je.getContainer=Te,je.getScroll=Ce,je.getScrollSize=function(e){return o.default.window(e)&&(e=window.document.body),{x:e.scrollWidth,y:e.scrollHeight}},je.getScrollSizeDelta=function(e,t){var n=e.interaction,i=e.element,r=n&&n.interactable.options[n.prepared.name].autoScroll;if(!r||!r.enabled)return t(),{x:0,y:0};var o=Te(r.container,n.interactable,i),a=Ce(o);t();var s=Ce(o);return{x:s.x-a.x,y:s.y-a.y}};var Me={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(e){Me.isScrolling=!0,Oe.default.cancel(Me.i),e.autoScroll=Me,Me.interaction=e,Me.prevTime=Me.now(),Me.i=Oe.default.request(Me.scroll)},stop:function(){Me.isScrolling=!1,Me.interaction&&(Me.interaction.autoScroll=null),Oe.default.cancel(Me.i)},scroll:function(){var e=Me.interaction,t=e.interactable,n=e.element,i=e.prepared.name,r=t.options[i].autoScroll,a=Te(r.container,t,n),s=Me.now(),l=(s-Me.prevTime)/1e3,u=r.speed*l;if(u>=1){var c={x:Me.x*u,y:Me.y*u};if(c.x||c.y){var d=Ce(a);o.default.window(a)?a.scrollBy(c.x,c.y):a&&(a.scrollLeft+=c.x,a.scrollTop+=c.y);var p=Ce(a),f={x:p.x-d.x,y:p.y-d.y};(f.x||f.y)&&t.fire({type:"autoscroll",target:n,interactable:t,delta:f,interaction:e,container:a})}Me.prevTime=s}Me.isScrolling&&(Oe.default.cancel(Me.i),Me.i=Oe.default.request(Me.scroll))},check:function(e,t){var n;return null==(n=e.options[t].autoScroll)?void 0:n.enabled},onInteractionMove:function(e){var t=e.interaction,n=e.pointer;if(t.interacting()&&Me.check(t.interactable,t.prepared.name))if(t.simulation)Me.x=Me.y=0;else{var i,r,a,s,l=t.interactable,u=t.element,c=t.prepared.name,d=l.options[c].autoScroll,p=Te(d.container,l,u);if(o.default.window(p))s=n.clientX<Me.margin,i=n.clientY<Me.margin,r=n.clientX>p.innerWidth-Me.margin,a=n.clientY>p.innerHeight-Me.margin;else{var f=S.getElementClientRect(p);s=n.clientX<f.left+Me.margin,i=n.clientY<f.top+Me.margin,r=n.clientX>f.right-Me.margin,a=n.clientY>f.bottom-Me.margin}Me.x=r?1:s?-1:0,Me.y=a?1:i?-1:0,Me.isScrolling||(Me.margin=d.margin,Me.speed=d.speed,Me.start(t))}}};function Te(e,n,i){return(o.default.string(e)?(0,M.getStringOptionResult)(e,n,i):e)||(0,t.getWindow)(i)}function Ce(e){return o.default.window(e)&&(e=window.document.body),{x:e.scrollLeft,y:e.scrollTop}}var ze={id:"auto-scroll",install:function(e){var t=e.defaults,n=e.actions;e.autoScroll=Me,Me.now=function(){return e.now()},n.phaselessTypes.autoscroll=!0,t.perAction.autoScroll=Me.defaults},listeners:{"interactions:new":function(e){e.interaction.autoScroll=null},"interactions:destroy":function(e){e.interaction.autoScroll=null,Me.stop(),Me.interaction&&(Me.interaction=null)},"interactions:stop":Me.stop,"interactions:action-move":function(e){return Me.onInteractionMove(e)}}},Ae=ze;je.default=Ae;var De={};Object.defineProperty(De,"__esModule",{value:!0}),De.copyAction=function(e,t){return e.name=t.name,e.axis=t.axis,e.edges=t.edges,e},De.sign=void 0,De.warnOnce=function(e,n){var i=!1;return function(){return i||(t.window.console.warn(n),i=!0),e.apply(this,arguments)}},De.sign=function(e){return e>=0?1:-1};var Re={};function Ne(e){return o.default.bool(e)?(this.options.styleCursor=e,this):null===e?(delete this.options.styleCursor,this):this.options.styleCursor}function He(e){return o.default.func(e)?(this.options.actionChecker=e,this):null===e?(delete this.options.actionChecker,this):this.options.actionChecker}Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=void 0;var Be={id:"auto-start/interactableMethods",install:function(e){var t=e.Interactable;t.prototype.getAction=function(t,n,i,r){var o=function(e,t,n,i,r){var o=e.getRect(i),a={action:null,interactable:e,interaction:n,element:i,rect:o,buttons:t.buttons||{0:1,1:4,3:8,4:16}[t.button]};return r.fire("auto-start:check",a),a.action}(this,n,i,r,e);return this.options.actionChecker?this.options.actionChecker(t,n,o,this,r,i):o},t.prototype.ignoreFrom=(0,De.warnOnce)((function(e){return this._backCompatOption("ignoreFrom",e)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),t.prototype.allowFrom=(0,De.warnOnce)((function(e){return this._backCompatOption("allowFrom",e)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),t.prototype.actionChecker=He,t.prototype.styleCursor=Ne}};Re.default=Be;var We={};function $e(e,t,n,i,r){return t.testIgnoreAllow(t.options[e.name],n,i)&&t.options[e.name].enabled&&Ye(t,n,e,r)?e:null}function Le(e,t,n,i,r,o,a){for(var s=0,l=i.length;s<l;s++){var u=i[s],c=r[s],d=u.getAction(t,n,e,c);if(d){var p=$e(d,u,c,o,a);if(p)return{action:p,interactable:u,element:c}}}return{action:null,interactable:null,element:null}}function Ge(e,t,n,i,r){var a=[],s=[],l=i;function u(e){a.push(e),s.push(l)}for(;o.default.element(l);){a=[],s=[],r.interactables.forEachMatch(l,u);var c=Le(e,t,n,a,s,i,r);if(c.action&&!c.interactable.options[c.action.name].manualStart)return c;l=S.parentNode(l)}return{action:null,interactable:null,element:null}}function Fe(e,t,n){var i=t.action,r=t.interactable,o=t.element;i=i||{name:null},e.interactable=r,e.element=o,(0,De.copyAction)(e.prepared,i),e.rect=r&&i.name?r.getRect(o):null,Ue(e,n),n.fire("autoStart:prepared",{interaction:e})}function Ye(e,t,n,i){var r=e.options,o=r[n.name].max,a=r[n.name].maxPerElement,s=i.autoStart.maxInteractions,l=0,u=0,c=0;if(!(o&&a&&s))return!1;for(var d=0;d<i.interactions.list.length;d++){var p=i.interactions.list[d],f=p.prepared.name;if(p.interacting()){if(++l>=s)return!1;if(p.interactable===e){if((u+=f===n.name?1:0)>=o)return!1;if(p.element===t&&(c++,f===n.name&&c>=a))return!1}}}return s>0}function Xe(e,t){return o.default.number(e)?(t.autoStart.maxInteractions=e,this):t.autoStart.maxInteractions}function qe(e,t,n){var i=n.autoStart.cursorElement;i&&i!==e&&(i.style.cursor=""),e.ownerDocument.documentElement.style.cursor=t,e.style.cursor=t,n.autoStart.cursorElement=t?e:null}function Ue(e,t){var n=e.interactable,i=e.element,r=e.prepared;if("mouse"===e.pointerType&&n&&n.options.styleCursor){var a="";if(r.name){var s=n.options[r.name].cursorChecker;a=o.default.func(s)?s(r,n,i,e._interacting):t.actions.map[r.name].getCursor(r)}qe(e.element,a||"",t)}else t.autoStart.cursorElement&&qe(t.autoStart.cursorElement,"",t)}Object.defineProperty(We,"__esModule",{value:!0}),We.default=void 0;var Ze={id:"auto-start/base",before:["actions"],install:function(e){var t=e.interactStatic,n=e.defaults;e.usePlugin(Re.default),n.base.actionChecker=null,n.base.styleCursor=!0,(0,j.default)(n.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),t.maxInteractions=function(t){return Xe(t,e)},e.autoStart={maxInteractions:1/0,withinInteractionLimit:Ye,cursorElement:null}},listeners:{"interactions:down":function(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget;n.interacting()||Fe(n,Ge(n,i,r,o,t),t)},"interactions:move":function(e,t){!function(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget;"mouse"!==n.pointerType||n.pointerIsDown||n.interacting()||Fe(n,Ge(n,i,r,o,t),t)}(e,t),function(e,t){var n=e.interaction;if(n.pointerIsDown&&!n.interacting()&&n.pointerWasMoved&&n.prepared.name){t.fire("autoStart:before-start",e);var i=n.interactable,r=n.prepared.name;r&&i&&(i.options[r].manualStart||!Ye(i,n.element,n.prepared,t)?n.stop():(n.start(n.prepared,i,n.element),Ue(n,t)))}}(e,t)},"interactions:stop":function(e,t){var n=e.interaction,i=n.interactable;i&&i.options.styleCursor&&qe(n.element,"",t)}},maxInteractions:Xe,withinInteractionLimit:Ye,validateAction:$e},Ve=Ze;We.default=Ve;var Je={};Object.defineProperty(Je,"__esModule",{value:!0}),Je.default=void 0;var Ke={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(e,t){var n=e.interaction,i=e.eventTarget,r=e.dx,a=e.dy;if("drag"===n.prepared.name){var s=Math.abs(r),l=Math.abs(a),u=n.interactable.options.drag,c=u.startAxis,d=s>l?"x":s<l?"y":"xy";if(n.prepared.axis="start"===u.lockAxis?d[0]:u.lockAxis,"xy"!==d&&"xy"!==c&&c!==d){n.prepared.name=null;for(var p=i,f=function(e){if(e!==n.interactable){var r=n.interactable.options.drag;if(!r.manualStart&&e.testIgnoreAllow(r,p,i)){var o=e.getAction(n.downPointer,n.downEvent,n,p);if(o&&"drag"===o.name&&function(e,t){if(!t)return!1;var n=t.options.drag.startAxis;return"xy"===e||"xy"===n||n===e}(d,e)&&We.default.validateAction(o,e,p,i,t))return e}}};o.default.element(p);){var h=t.interactables.forEachMatch(p,f);if(h){n.prepared.name="drag",n.interactable=h,n.element=p;break}p=(0,S.parentNode)(p)}}}}}};Je.default=Ke;var Qe={};function et(e){var t=e.prepared&&e.prepared.name;if(!t)return null;var n=e.interactable.options;return n[t].hold||n[t].delay}Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.default=void 0;var tt={id:"auto-start/hold",install:function(e){var t=e.defaults;e.usePlugin(We.default),t.perAction.hold=0,t.perAction.delay=0},listeners:{"interactions:new":function(e){e.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(e){var t=e.interaction,n=et(t);n>0&&(t.autoStartHoldTimer=setTimeout((function(){t.start(t.prepared,t.interactable,t.element)}),n))},"interactions:move":function(e){var t=e.interaction,n=e.duplicate;t.autoStartHoldTimer&&t.pointerWasMoved&&!n&&(clearTimeout(t.autoStartHoldTimer),t.autoStartHoldTimer=null)},"autoStart:before-start":function(e){var t=e.interaction;et(t)>0&&(t.prepared.name=null)}},getHoldDuration:et},nt=tt;Qe.default=nt;var it={};Object.defineProperty(it,"__esModule",{value:!0}),it.default=void 0;var rt={id:"auto-start",install:function(e){e.usePlugin(We.default),e.usePlugin(Qe.default),e.usePlugin(Je.default)}};it.default=rt;var ot={};function at(e){return/^(always|never|auto)$/.test(e)?(this.options.preventDefault=e,this):o.default.bool(e)?(this.options.preventDefault=e?"always":"never",this):this.options.preventDefault}function st(e){var t=e.interaction,n=e.event;t.interactable&&t.interactable.checkAndPreventDefault(n)}function lt(e){var n=e.Interactable;n.prototype.preventDefault=at,n.prototype.checkAndPreventDefault=function(n){return function(e,n,i){var r=e.options.preventDefault;if("never"!==r)if("always"!==r){if(n.events.supportsPassive&&/^touch(start|move)$/.test(i.type)){var a=(0,t.getWindow)(i.target).document,s=n.getDocOptions(a);if(!s||!s.events||!1!==s.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(i.type)||o.default.element(i.target)&&(0,S.matchesSelector)(i.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||i.preventDefault()}else i.preventDefault()}(this,e,n)},e.interactions.docEvents.push({type:"dragstart",listener:function(t){for(var n=0;n<e.interactions.list.length;n++){var i=e.interactions.list[n];if(i.element&&(i.element===t.target||(0,S.nodeContains)(i.element,t.target)))return void i.interactable.checkAndPreventDefault(t)}}})}Object.defineProperty(ot,"__esModule",{value:!0}),ot.default=void 0,ot.install=lt;var ut={id:"core/interactablePreventDefault",install:lt,listeners:["down","move","up","cancel"].reduce((function(e,t){return e["interactions:".concat(t)]=st,e}),{})};ot.default=ut;var ct={};Object.defineProperty(ct,"__esModule",{value:!0}),ct.default=void 0,ct.default={};var dt,pt={};Object.defineProperty(pt,"__esModule",{value:!0}),pt.default=void 0,function(e){e.touchAction="touchAction",e.boxSizing="boxSizing",e.noListeners="noListeners"}(dt||(dt={})),dt.touchAction,dt.boxSizing,dt.noListeners,pt.default={id:"dev-tools",install:function(){}};var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.default=function e(t){var n={};for(var i in t){var r=t[i];o.default.plainObject(r)?n[i]=e(r):o.default.array(r)?n[i]=U.from(r):n[i]=r}return n};var ht={};function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(ht,"__esModule",{value:!0}),ht.default=void 0,ht.getRectOffset=wt;var mt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yt(this,"states",[]),yt(this,"startOffset",{left:0,right:0,top:0,bottom:0}),yt(this,"startDelta",void 0),yt(this,"result",void 0),yt(this,"endResult",void 0),yt(this,"edges",void 0),yt(this,"interaction",void 0),this.interaction=t,this.result=bt()}var t,n;return t=e,(n=[{key:"start",value:function(e,t){var n=e.phase,i=this.interaction,r=function(e){var t=e.interactable.options[e.prepared.name],n=t.modifiers;return n&&n.length?n:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((function(e){var n=t[e];return n&&n.enabled&&{options:n,methods:n._methods}})).filter((function(e){return!!e}))}(i);this.prepareStates(r),this.edges=(0,j.default)({},i.edges),this.startOffset=wt(i.rect,t),this.startDelta={x:0,y:0};var o=this.fillArg({phase:n,pageCoords:t,preEnd:!1});return this.result=bt(),this.startAll(o),this.result=this.setAll(o)}},{key:"fillArg",value:function(e){var t=this.interaction;return e.interaction=t,e.interactable=t.interactable,e.element=t.element,e.rect=e.rect||t.rect,e.edges=this.edges,e.startOffset=this.startOffset,e}},{key:"startAll",value:function(e){for(var t=0;t<this.states.length;t++){var n=this.states[t];n.methods.start&&(e.state=n,n.methods.start(e))}}},{key:"setAll",value:function(e){var t=e.phase,n=e.preEnd,i=e.skipModifiers,r=e.rect;e.coords=(0,j.default)({},e.pageCoords),e.rect=(0,j.default)({},r);for(var o=i?this.states.slice(i):this.states,a=bt(e.coords,e.rect),s=0;s<o.length;s++){var l,u=o[s],c=u.options,d=(0,j.default)({},e.coords),p=null;null!=(l=u.methods)&&l.set&&this.shouldDo(c,n,t)&&(e.state=u,p=u.methods.set(e),M.addEdges(this.interaction.edges,e.rect,{x:e.coords.x-d.x,y:e.coords.y-d.y})),a.eventProps.push(p)}a.delta.x=e.coords.x-e.pageCoords.x,a.delta.y=e.coords.y-e.pageCoords.y,a.rectDelta.left=e.rect.left-r.left,a.rectDelta.right=e.rect.right-r.right,a.rectDelta.top=e.rect.top-r.top,a.rectDelta.bottom=e.rect.bottom-r.bottom;var f=this.result.coords,h=this.result.rect;if(f&&h){var v=a.rect.left!==h.left||a.rect.right!==h.right||a.rect.top!==h.top||a.rect.bottom!==h.bottom;a.changed=v||f.x!==a.coords.x||f.y!==a.coords.y}return a}},{key:"applyToInteraction",value:function(e){var t=this.interaction,n=e.phase,i=t.coords.cur,r=t.coords.start,o=this.result,a=this.startDelta,s=o.delta;"start"===n&&(0,j.default)(this.startDelta,o.delta);for(var l=0;l<2;l++){var u=vt([[r,a],[i,s]][l],2),c=u[0],d=u[1];c.page.x+=d.x,c.page.y+=d.y,c.client.x+=d.x,c.client.y+=d.y}var p=this.result.rectDelta,f=e.rect||t.rect;f.left+=p.left,f.right+=p.right,f.top+=p.top,f.bottom+=p.bottom,f.width=f.right-f.left,f.height=f.bottom-f.top}},{key:"setAndApply",value:function(e){var t=this.interaction,n=e.phase,i=e.preEnd,r=e.skipModifiers,o=this.setAll(this.fillArg({preEnd:i,phase:n,pageCoords:e.modifiedCoords||t.coords.cur.page}));if(this.result=o,!o.changed&&(!r||r<this.states.length)&&t.interacting())return!1;if(e.modifiedCoords){var a=t.coords.cur.page,s={x:e.modifiedCoords.x-a.x,y:e.modifiedCoords.y-a.y};o.coords.x+=s.x,o.coords.y+=s.y,o.delta.x+=s.x,o.delta.y+=s.y}this.applyToInteraction(e)}},{key:"beforeEnd",value:function(e){var t=e.interaction,n=e.event,i=this.states;if(i&&i.length){for(var r=!1,o=0;o<i.length;o++){var a=i[o];e.state=a;var s=a.options,l=a.methods,u=l.beforeEnd&&l.beforeEnd(e);if(u)return this.endResult=u,!1;r=r||!r&&this.shouldDo(s,!0,e.phase,!0)}r&&t.move({event:n,preEnd:!0})}}},{key:"stop",value:function(e){var t=e.interaction;if(this.states&&this.states.length){var n=(0,j.default)({states:this.states,interactable:t.interactable,element:t.element,rect:null},e);this.fillArg(n);for(var i=0;i<this.states.length;i++){var r=this.states[i];n.state=r,r.methods.stop&&r.methods.stop(n)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(e){this.states=[];for(var t=0;t<e.length;t++){var n=e[t],i=n.options,r=n.methods,o=n.name;this.states.push({options:i,methods:r,index:t,name:o})}return this.states}},{key:"restoreInteractionCoords",value:function(e){var t=e.interaction,n=t.coords,i=t.rect,r=t.modification;if(r.result){for(var o=r.startDelta,a=r.result,s=a.delta,l=a.rectDelta,u=[[n.start,o],[n.cur,s]],c=0;c<u.length;c++){var d=vt(u[c],2),p=d[0],f=d[1];p.page.x-=f.x,p.page.y-=f.y,p.client.x-=f.x,p.client.y-=f.y}i.left-=l.left,i.right-=l.right,i.top-=l.top,i.bottom-=l.bottom}}},{key:"shouldDo",value:function(e,t,n,i){return!(!e||!1===e.enabled||i&&!e.endOnly||e.endOnly&&!t||"start"===n&&!e.setStart)}},{key:"copyFrom",value:function(e){this.startOffset=e.startOffset,this.startDelta=e.startDelta,this.edges=e.edges,this.states=e.states.map((function(e){return(0,ft.default)(e)})),this.result=bt((0,j.default)({},e.result.coords),(0,j.default)({},e.result.rect))}},{key:"destroy",value:function(){for(var e in this)this[e]=null}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function bt(e,t){return{rect:t,coords:e,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function wt(e,t){return e?{left:t.x-e.left,top:t.y-e.top,right:e.right-t.x,bottom:e.bottom-t.y}:{left:0,top:0,right:0,bottom:0}}ht.default=mt;var xt={};function St(e){var t=e.iEvent,n=e.interaction.modification.result;n&&(t.modifiers=n.eventProps)}Object.defineProperty(xt,"__esModule",{value:!0}),xt.addEventModifiers=St,xt.default=void 0,xt.makeModifier=function(e,t){var n=e.defaults,i={start:e.start,set:e.set,beforeEnd:e.beforeEnd,stop:e.stop},r=function(e){var r=e||{};for(var o in r.enabled=!1!==r.enabled,n)o in r||(r[o]=n[o]);var a={options:r,methods:i,name:t,enable:function(){return r.enabled=!0,a},disable:function(){return r.enabled=!1,a}};return a};return t&&"string"==typeof t&&(r._defaults=n,r._methods=i),r};var _t={id:"modifiers/base",before:["actions"],install:function(e){e.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(e){var t=e.interaction;t.modification=new ht.default(t)},"interactions:before-action-start":function(e){var t=e.interaction.modification;t.start(e,e.interaction.coords.start.page),e.interaction.edges=t.edges,t.applyToInteraction(e)},"interactions:before-action-move":function(e){return e.interaction.modification.setAndApply(e)},"interactions:before-action-end":function(e){return e.interaction.modification.beforeEnd(e)},"interactions:action-start":St,"interactions:action-move":St,"interactions:action-end":St,"interactions:after-action-start":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-move":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:stop":function(e){return e.interaction.modification.stop(e)}}},Ot=_t;xt.default=Ot;var kt={};Object.defineProperty(kt,"__esModule",{value:!0}),kt.defaults=void 0,kt.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};var It={};function Et(e){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Et(e)}function Pt(e,t){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pt(e,t)}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(It,"__esModule",{value:!0}),It.InteractEvent=void 0;var Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pt(e,t)}(a,e);var t,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mt(i);if(r){var n=Mt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jt(e)}(this,e)});function a(e,t,n,i,r,s,l){var u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Tt(jt(u=o.call(this,e)),"relatedTarget",null),Tt(jt(u),"screenX",void 0),Tt(jt(u),"screenY",void 0),Tt(jt(u),"button",void 0),Tt(jt(u),"buttons",void 0),Tt(jt(u),"ctrlKey",void 0),Tt(jt(u),"shiftKey",void 0),Tt(jt(u),"altKey",void 0),Tt(jt(u),"metaKey",void 0),Tt(jt(u),"page",void 0),Tt(jt(u),"client",void 0),Tt(jt(u),"delta",void 0),Tt(jt(u),"rect",void 0),Tt(jt(u),"x0",void 0),Tt(jt(u),"y0",void 0),Tt(jt(u),"t0",void 0),Tt(jt(u),"dt",void 0),Tt(jt(u),"duration",void 0),Tt(jt(u),"clientX0",void 0),Tt(jt(u),"clientY0",void 0),Tt(jt(u),"velocity",void 0),Tt(jt(u),"speed",void 0),Tt(jt(u),"swipe",void 0),Tt(jt(u),"axes",void 0),Tt(jt(u),"preEnd",void 0),r=r||e.element;var c=e.interactable,d=(c&&c.options||kt.defaults).deltaSource,p=(0,z.default)(c,r,n),f="start"===i,h="end"===i,v=f?jt(u):e.prevEvent,g=f?e.coords.start:h?{page:v.page,client:v.client,timeStamp:e.coords.cur.timeStamp}:e.coords.cur;return u.page=(0,j.default)({},g.page),u.client=(0,j.default)({},g.client),u.rect=(0,j.default)({},e.rect),u.timeStamp=g.timeStamp,h||(u.page.x-=p.x,u.page.y-=p.y,u.client.x-=p.x,u.client.y-=p.y),u.ctrlKey=t.ctrlKey,u.altKey=t.altKey,u.shiftKey=t.shiftKey,u.metaKey=t.metaKey,u.button=t.button,u.buttons=t.buttons,u.target=r,u.currentTarget=r,u.preEnd=s,u.type=l||n+(i||""),u.interactable=c,u.t0=f?e.pointers[e.pointers.length-1].downTime:v.t0,u.x0=e.coords.start.page.x-p.x,u.y0=e.coords.start.page.y-p.y,u.clientX0=e.coords.start.client.x-p.x,u.clientY0=e.coords.start.client.y-p.y,u.delta=f||h?{x:0,y:0}:{x:u[d].x-v[d].x,y:u[d].y-v[d].y},u.dt=e.coords.delta.timeStamp,u.duration=u.timeStamp-u.t0,u.velocity=(0,j.default)({},e.coords.velocity[d]),u.speed=(0,R.default)(u.velocity.x,u.velocity.y),u.swipe=h||"inertiastart"===i?u.getSwipe():null,u}return t=a,(n=[{key:"getSwipe",value:function(){var e=this._interaction;if(e.prevEvent.speed<600||this.timeStamp-e.prevEvent.timeStamp>150)return null;var t=180*Math.atan2(e.prevEvent.velocityY,e.prevEvent.velocityX)/Math.PI;t<0&&(t+=360);var n=112.5<=t&&t<247.5,i=202.5<=t&&t<337.5;return{up:i,down:!i&&22.5<=t&&t<157.5,left:n,right:!n&&(292.5<=t||t<67.5),angle:t,speed:e.prevEvent.speed,velocity:{x:e.prevEvent.velocityX,y:e.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y.BaseEvent);It.InteractEvent=Ct,Object.defineProperties(Ct.prototype,{pageX:{get:function(){return this.page.x},set:function(e){this.page.x=e}},pageY:{get:function(){return this.page.y},set:function(e){this.page.y=e}},clientX:{get:function(){return this.client.x},set:function(e){this.client.x=e}},clientY:{get:function(){return this.client.y},set:function(e){this.client.y=e}},dx:{get:function(){return this.delta.x},set:function(e){this.delta.x=e}},dy:{get:function(){return this.delta.y},set:function(e){this.delta.y=e}},velocityX:{get:function(){return this.velocity.x},set:function(e){this.velocity.x=e}},velocityY:{get:function(){return this.velocity.y},set:function(e){this.velocity.y=e}}});var zt={};function At(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(zt,"__esModule",{value:!0}),zt.PointerInfo=void 0;var Rt=function(e,t,n){return t&&At(e.prototype,t),n&&At(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Dt(this,"id",void 0),Dt(this,"pointer",void 0),Dt(this,"event",void 0),Dt(this,"downTime",void 0),Dt(this,"downTarget",void 0),this.id=t,this.pointer=n,this.event=i,this.downTime=r,this.downTarget=o}));zt.PointerInfo=Rt;var Nt,Ht,Bt={};function Wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.Interaction=void 0,Object.defineProperty(Bt,"PointerInfo",{enumerable:!0,get:function(){return zt.PointerInfo}}),Bt.default=Bt._ProxyValues=Bt._ProxyMethods=void 0,Bt._ProxyValues=Nt,function(e){e.interactable="",e.element="",e.prepared="",e.pointerIsDown="",e.pointerWasMoved="",e._proxy=""}(Nt||(Bt._ProxyValues=Nt={})),Bt._ProxyMethods=Ht,function(e){e.start="",e.move="",e.end="",e.stop="",e.interacting=""}(Ht||(Bt._ProxyMethods=Ht={}));var $t=0,Lt=function(){function e(t){var n=this,i=t.pointerType,r=t.scopeFire;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Wt(this,"interactable",null),Wt(this,"element",null),Wt(this,"rect",null),Wt(this,"_rects",void 0),Wt(this,"edges",null),Wt(this,"_scopeFire",void 0),Wt(this,"prepared",{name:null,axis:null,edges:null}),Wt(this,"pointerType",void 0),Wt(this,"pointers",[]),Wt(this,"downEvent",null),Wt(this,"downPointer",{}),Wt(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),Wt(this,"prevEvent",null),Wt(this,"pointerIsDown",!1),Wt(this,"pointerWasMoved",!1),Wt(this,"_interacting",!1),Wt(this,"_ending",!1),Wt(this,"_stopped",!0),Wt(this,"_proxy",null),Wt(this,"simulation",null),Wt(this,"doMove",(0,De.warnOnce)((function(e){this.move(e)}),"The interaction.doMove() method has been renamed to interaction.move()")),Wt(this,"coords",{start:H.newCoords(),prev:H.newCoords(),cur:H.newCoords(),delta:H.newCoords(),velocity:H.newCoords()}),Wt(this,"_id",$t++),this._scopeFire=r,this.pointerType=i;var o=this;this._proxy={};var a=function(e){Object.defineProperty(n._proxy,e,{get:function(){return o[e]}})};for(var s in Nt)a(s);var l=function(e){Object.defineProperty(n._proxy,e,{value:function(){return o[e].apply(o,arguments)}})};for(var u in Ht)l(u);this._scopeFire("interactions:new",{interaction:this})}var t,n;return t=e,n=[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(e,t,n){var i=this.updatePointer(e,t,n,!0),r=this.pointers[i];this._scopeFire("interactions:down",{pointer:e,event:t,eventTarget:n,pointerIndex:i,pointerInfo:r,type:"down",interaction:this})}},{key:"start",value:function(e,t,n){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===e.name?2:1)||!t.options[e.name].enabled)&&((0,De.copyAction)(this.prepared,e),this.interactable=t,this.element=n,this.rect=t.getRect(n),this.edges=this.prepared.edges?(0,j.default)({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(e,t,n){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(e,t,n,!1);var i,r,o=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(i=this.coords.cur.client.x-this.coords.start.client.x,r=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=(0,R.default)(i,r)>this.pointerMoveTolerance);var a=this.getPointerIndex(e),s={pointer:e,pointerIndex:a,pointerInfo:this.pointers[a],event:t,type:"move",eventTarget:n,dx:i,dy:r,duplicate:o,interaction:this};o||H.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",s),o||this.simulation||(this.interacting()&&(s.type=null,this.move(s)),this.pointerWasMoved&&H.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(e){e&&e.event||H.setZeroCoords(this.coords.delta),(e=(0,j.default)({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},e||{})).phase="move",this._doPhase(e)}},{key:"pointerUp",value:function(e,t,n,i){var r=this.getPointerIndex(e);-1===r&&(r=this.updatePointer(e,t,n,!1));var o=/cancel$/i.test(t.type)?"cancel":"up";this._scopeFire("interactions:".concat(o),{pointer:e,pointerIndex:r,pointerInfo:this.pointers[r],event:t,eventTarget:n,type:o,curEventTarget:i,interaction:this}),this.simulation||this.end(t),this.removePointer(e,t)}},{key:"documentBlur",value:function(e){this.end(e),this._scopeFire("interactions:blur",{event:e,type:"blur",interaction:this})}},{key:"end",value:function(e){var t;this._ending=!0,e=e||this._latestPointer.event,this.interacting()&&(t=this._doPhase({event:e,interaction:this,phase:"end"})),this._ending=!1,!0===t&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(e){var t=H.getPointerId(e);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:U.findIndex(this.pointers,(function(e){return e.id===t}))}},{key:"getPointerInfo",value:function(e){return this.pointers[this.getPointerIndex(e)]}},{key:"updatePointer",value:function(e,t,n,i){var r=H.getPointerId(e),o=this.getPointerIndex(e),a=this.pointers[o];return i=!1!==i&&(i||/(down|start)$/i.test(t.type)),a?a.pointer=e:(a=new zt.PointerInfo(r,e,t,null,null),o=this.pointers.length,this.pointers.push(a)),H.setCoords(this.coords.cur,this.pointers.map((function(e){return e.pointer})),this._now()),H.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),i&&(this.pointerIsDown=!0,a.downTime=this.coords.cur.timeStamp,a.downTarget=n,H.pointerExtend(this.downPointer,e),this.interacting()||(H.copyCoords(this.coords.start,this.coords.cur),H.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=t,this.pointerWasMoved=!1)),this._updateLatestPointer(e,t,n),this._scopeFire("interactions:update-pointer",{pointer:e,event:t,eventTarget:n,down:i,pointerInfo:a,pointerIndex:o,interaction:this}),o}},{key:"removePointer",value:function(e,t){var n=this.getPointerIndex(e);if(-1!==n){var i=this.pointers[n];this._scopeFire("interactions:remove-pointer",{pointer:e,event:t,eventTarget:null,pointerIndex:n,pointerInfo:i,interaction:this}),this.pointers.splice(n,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(e,t,n){this._latestPointer.pointer=e,this._latestPointer.event=t,this._latestPointer.eventTarget=n}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(e,t,n,i){return new It.InteractEvent(this,e,this.prepared.name,t,this.element,n,i)}},{key:"_fireEvent",value:function(e){var t;null==(t=this.interactable)||t.fire(e),(!this.prevEvent||e.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=e)}},{key:"_doPhase",value:function(e){var t=e.event,n=e.phase,i=e.preEnd,r=e.type,o=this.rect;if(o&&"move"===n&&(M.addEdges(this.edges,o,this.coords.delta[this.interactable.options.deltaSource]),o.width=o.right-o.left,o.height=o.bottom-o.top),!1===this._scopeFire("interactions:before-action-".concat(n),e))return!1;var a=e.iEvent=this._createPreparedEvent(t,n,i,r);return this._scopeFire("interactions:action-".concat(n),e),"start"===n&&(this.prevEvent=a),this._fireEvent(a),this._scopeFire("interactions:after-action-".concat(n),e),!0}},{key:"_now",value:function(){return Date.now()}}],n&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();Bt.Interaction=Lt;var Gt=Lt;Bt.default=Gt;var Ft={};function Yt(e){e.pointerIsDown&&(Zt(e.coords.cur,e.offset.total),e.offset.pending.x=0,e.offset.pending.y=0)}function Xt(e){qt(e.interaction)}function qt(e){if(!function(e){return!(!e.offset.pending.x&&!e.offset.pending.y)}(e))return!1;var t=e.offset.pending;return Zt(e.coords.cur,t),Zt(e.coords.delta,t),M.addEdges(e.edges,e.rect,t),t.x=0,t.y=0,!0}function Ut(e){var t=e.x,n=e.y;this.offset.pending.x+=t,this.offset.pending.y+=n,this.offset.total.x+=t,this.offset.total.y+=n}function Zt(e,t){var n=e.page,i=e.client,r=t.x,o=t.y;n.x+=r,n.y+=o,i.x+=r,i.y+=o}Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.addTotal=Yt,Ft.applyPending=qt,Ft.default=void 0,Bt._ProxyMethods.offsetBy="";var Vt={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(e){e.Interaction.prototype.offsetBy=Ut},listeners:{"interactions:new":function(e){e.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(e){return Yt(e.interaction)},"interactions:before-action-start":Xt,"interactions:before-action-move":Xt,"interactions:before-action-end":function(e){var t=e.interaction;if(qt(t))return t.move({offset:!0}),t.end(),!1},"interactions:stop":function(e){var t=e.interaction;t.offset.total.x=0,t.offset.total.y=0,t.offset.pending.x=0,t.offset.pending.y=0}}},Jt=Vt;Ft.default=Jt;var Kt={};function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.default=Kt.InertiaState=void 0;var en=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Qt(this,"active",!1),Qt(this,"isModified",!1),Qt(this,"smoothEnd",!1),Qt(this,"allowResume",!1),Qt(this,"modification",void 0),Qt(this,"modifierCount",0),Qt(this,"modifierArg",void 0),Qt(this,"startCoords",void 0),Qt(this,"t0",0),Qt(this,"v0",0),Qt(this,"te",0),Qt(this,"targetOffset",void 0),Qt(this,"modifiedOffset",void 0),Qt(this,"currentOffset",void 0),Qt(this,"lambda_v0",0),Qt(this,"one_ve_v0",0),Qt(this,"timeout",void 0),Qt(this,"interaction",void 0),this.interaction=t}var t,n;return t=e,(n=[{key:"start",value:function(e){var t=this.interaction,n=tn(t);if(!n||!n.enabled)return!1;var i=t.coords.velocity.client,r=(0,R.default)(i.x,i.y),o=this.modification||(this.modification=new ht.default(t));if(o.copyFrom(t.modification),this.t0=t._now(),this.allowResume=n.allowResume,this.v0=r,this.currentOffset={x:0,y:0},this.startCoords=t.coords.cur.page,this.modifierArg=o.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-t.coords.cur.timeStamp<50&&r>n.minSpeed&&r>n.endSpeed)this.startInertia();else{if(o.result=o.setAll(this.modifierArg),!o.result.changed)return!1;this.startSmoothEnd()}return t.modification.result.rect=null,t.offsetBy(this.targetOffset),t._doPhase({interaction:t,event:e,phase:"inertiastart"}),t.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),t.modification.result.rect=null,this.active=!0,t.simulation=this,!0}},{key:"startInertia",value:function(){var e=this,t=this.interaction.coords.velocity.client,n=tn(this.interaction),i=n.resistance,r=-Math.log(n.endSpeed/this.v0)/i;this.targetOffset={x:(t.x-r)/i,y:(t.y-r)/i},this.te=r,this.lambda_v0=i/this.v0,this.one_ve_v0=1-n.endSpeed/this.v0;var o=this.modification,a=this.modifierArg;a.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},o.result=o.setAll(a),o.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+o.result.delta.x,y:this.targetOffset.y+o.result.delta.y}),this.onNextFrame((function(){return e.inertiaTick()}))}},{key:"startSmoothEnd",value:function(){var e=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame((function(){return e.smoothEndTick()}))}},{key:"onNextFrame",value:function(e){var t=this;this.timeout=Oe.default.request((function(){t.active&&e()}))}},{key:"inertiaTick",value:function(){var e,t,n,i,r,o=this,a=this.interaction,s=tn(a).resistance,l=(a._now()-this.t0)/1e3;if(l<this.te){var u,c=1-(Math.exp(-s*l)-this.lambda_v0)/this.one_ve_v0;this.isModified?(e=this.targetOffset.x,t=this.targetOffset.y,n=this.modifiedOffset.x,i=this.modifiedOffset.y,u={x:rn(r=c,0,e,n),y:rn(r,0,t,i)}):u={x:this.targetOffset.x*c,y:this.targetOffset.y*c};var d={x:u.x-this.currentOffset.x,y:u.y-this.currentOffset.y};this.currentOffset.x+=d.x,this.currentOffset.y+=d.y,a.offsetBy(d),a.move(),this.onNextFrame((function(){return o.inertiaTick()}))}else a.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var e=this,t=this.interaction,n=t._now()-this.t0,i=tn(t).smoothEndDuration;if(n<i){var r={x:on(n,0,this.targetOffset.x,i),y:on(n,0,this.targetOffset.y,i)},o={x:r.x-this.currentOffset.x,y:r.y-this.currentOffset.y};this.currentOffset.x+=o.x,this.currentOffset.y+=o.y,t.offsetBy(o),t.move({skipModifiers:this.modifierCount}),this.onNextFrame((function(){return e.smoothEndTick()}))}else t.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(e){var t=e.pointer,n=e.event,i=e.eventTarget,r=this.interaction;r.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),r.updatePointer(t,n,i,!0),r._doPhase({interaction:r,event:n,phase:"resume"}),(0,H.copyCoords)(r.coords.prev,r.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,Oe.default.cancel(this.timeout)}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tn(e){var t=e.interactable,n=e.prepared;return t&&t.options&&n.name&&t.options[n.name].inertia}Kt.InertiaState=en;var nn={id:"inertia",before:["modifiers","actions"],install:function(e){var t=e.defaults;e.usePlugin(Ft.default),e.usePlugin(xt.default),e.actions.phases.inertiastart=!0,e.actions.phases.resume=!0,t.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(e){var t=e.interaction;t.inertia=new en(t)},"interactions:before-action-end":function(e){var t=e.interaction,n=e.event;return(!t._interacting||t.simulation||!t.inertia.start(n))&&null},"interactions:down":function(e){var t=e.interaction,n=e.eventTarget,i=t.inertia;if(i.active)for(var r=n;o.default.element(r);){if(r===t.element){i.resume(e);break}r=S.parentNode(r)}},"interactions:stop":function(e){var t=e.interaction.inertia;t.active&&t.stop()},"interactions:before-action-resume":function(e){var t=e.interaction.modification;t.stop(e),t.start(e,e.interaction.coords.cur.page),t.applyToInteraction(e)},"interactions:before-action-inertiastart":function(e){return e.interaction.modification.setAndApply(e)},"interactions:action-resume":xt.addEventModifiers,"interactions:action-inertiastart":xt.addEventModifiers,"interactions:after-action-inertiastart":function(e){return e.interaction.modification.restoreInteractionCoords(e)},"interactions:after-action-resume":function(e){return e.interaction.modification.restoreInteractionCoords(e)}}};function rn(e,t,n,i){var r=1-e;return r*r*t+2*r*e*n+e*e*i}function on(e,t,n,i){return-n*(e/=i)*(e-2)+t}var an=nn;Kt.default=an;var sn={};function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(e.immediatePropagationStopped)break;i(e)}}Object.defineProperty(sn,"__esModule",{value:!0}),sn.Eventable=void 0;var cn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ln(this,"options",void 0),ln(this,"types",{}),ln(this,"propagationStopped",!1),ln(this,"immediatePropagationStopped",!1),ln(this,"global",void 0),this.options=(0,j.default)({},t||{})}var t,n;return t=e,(n=[{key:"fire",value:function(e){var t,n=this.global;(t=this.types[e.type])&&un(e,t),!e.propagationStopped&&n&&(t=n[e.type])&&un(e,t)}},{key:"on",value:function(e,t){var n=(0,A.default)(e,t);for(e in n)this.types[e]=U.merge(this.types[e]||[],n[e])}},{key:"off",value:function(e,t){var n=(0,A.default)(e,t);for(e in n){var i=this.types[e];if(i&&i.length)for(var r=0;r<n[e].length;r++){var o=n[e][r],a=i.indexOf(o);-1!==a&&i.splice(a,1)}}}},{key:"getRect",value:function(e){return null}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();sn.Eventable=cn;var dn={};Object.defineProperty(dn,"__esModule",{value:!0}),dn.default=function(e,t){if(t.phaselessTypes[e])return!0;for(var n in t.map)if(0===e.indexOf(n)&&e.substr(n.length)in t.phases)return!0;return!1};var pn={};Object.defineProperty(pn,"__esModule",{value:!0}),pn.createInteractStatic=function(e){var t=function t(n,i){var r=e.interactables.get(n,i);return r||((r=e.interactables.new(n,i)).events.global=t.globalEvents),r};return t.getPointerAverage=H.pointerAverage,t.getTouchBBox=H.touchBBox,t.getTouchDistance=H.touchDistance,t.getTouchAngle=H.touchAngle,t.getElementRect=S.getElementRect,t.getElementClientRect=S.getElementClientRect,t.matchesSelector=S.matchesSelector,t.closest=S.closest,t.globalEvents={},t.version="1.10.17",t.scope=e,t.use=function(e,t){return this.scope.usePlugin(e,t),this},t.isSet=function(e,t){return!!this.scope.interactables.get(e,t&&t.context)},t.on=(0,De.warnOnce)((function(e,t,n){if(o.default.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),o.default.array(e)){for(var i=0;i<e.length;i++){var r=e[i];this.on(r,t,n)}return this}if(o.default.object(e)){for(var a in e)this.on(a,e[a],t);return this}return(0,dn.default)(e,this.scope.actions)?this.globalEvents[e]?this.globalEvents[e].push(t):this.globalEvents[e]=[t]:this.scope.events.add(this.scope.document,e,t,{options:n}),this}),"The interact.on() method is being deprecated"),t.off=(0,De.warnOnce)((function(e,t,n){if(o.default.string(e)&&-1!==e.search(" ")&&(e=e.trim().split(/ +/)),o.default.array(e)){for(var i=0;i<e.length;i++){var r=e[i];this.off(r,t,n)}return this}if(o.default.object(e)){for(var a in e)this.off(a,e[a],t);return this}var s;return(0,dn.default)(e,this.scope.actions)?e in this.globalEvents&&-1!==(s=this.globalEvents[e].indexOf(t))&&this.globalEvents[e].splice(s,1):this.scope.events.remove(this.scope.document,e,t,n),this}),"The interact.off() method is being deprecated"),t.debug=function(){return this.scope},t.supportsTouch=function(){return b.default.supportsTouch},t.supportsPointerEvent=function(){return b.default.supportsPointerEvent},t.stop=function(){for(var e=0;e<this.scope.interactions.list.length;e++)this.scope.interactions.list[e].stop();return this},t.pointerMoveTolerance=function(e){return o.default.number(e)?(this.scope.interactions.pointerMoveTolerance=e,this):this.scope.interactions.pointerMoveTolerance},t.addDocument=function(e,t){this.scope.addDocument(e,t)},t.removeDocument=function(e){this.scope.removeDocument(e)},t};var fn={};function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(fn,"__esModule",{value:!0}),fn.Interactable=void 0;var vn=function(){function e(n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),hn(this,"options",void 0),hn(this,"_actions",void 0),hn(this,"target",void 0),hn(this,"events",new sn.Eventable),hn(this,"_context",void 0),hn(this,"_win",void 0),hn(this,"_doc",void 0),hn(this,"_scopeEvents",void 0),hn(this,"_rectChecker",void 0),this._actions=i.actions,this.target=n,this._context=i.context||r,this._win=(0,t.getWindow)((0,S.trySelector)(n)?this._context:n),this._doc=this._win.document,this._scopeEvents=o,this.set(i)}var n,i;return n=e,(i=[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(e,t){return o.default.func(t.onstart)&&this.on("".concat(e,"start"),t.onstart),o.default.func(t.onmove)&&this.on("".concat(e,"move"),t.onmove),o.default.func(t.onend)&&this.on("".concat(e,"end"),t.onend),o.default.func(t.oninertiastart)&&this.on("".concat(e,"inertiastart"),t.oninertiastart),this}},{key:"updatePerActionListeners",value:function(e,t,n){(o.default.array(t)||o.default.object(t))&&this.off(e,t),(o.default.array(n)||o.default.object(n))&&this.on(e,n)}},{key:"setPerAction",value:function(e,t){var n=this._defaults;for(var i in t){var r=i,a=this.options[e],s=t[r];"listeners"===r&&this.updatePerActionListeners(e,a.listeners,s),o.default.array(s)?a[r]=U.from(s):o.default.plainObject(s)?(a[r]=(0,j.default)(a[r]||{},(0,ft.default)(s)),o.default.object(n.perAction[r])&&"enabled"in n.perAction[r]&&(a[r].enabled=!1!==s.enabled)):o.default.bool(s)&&o.default.object(n.perAction[r])?a[r].enabled=s:a[r]=s}}},{key:"getRect",value:function(e){return e=e||(o.default.element(this.target)?this.target:null),o.default.string(this.target)&&(e=e||this._context.querySelector(this.target)),(0,S.getElementRect)(e)}},{key:"rectChecker",value:function(e){var t=this;return o.default.func(e)?(this._rectChecker=e,this.getRect=function(e){var n=(0,j.default)({},t._rectChecker(e));return"width"in n||(n.width=n.right-n.left,n.height=n.bottom-n.top),n},this):null===e?(delete this.getRect,delete this._rectChecker,this):this.getRect}},{key:"_backCompatOption",value:function(e,t){if((0,S.trySelector)(t)||o.default.object(t)){for(var n in this.options[e]=t,this._actions.map)this.options[n][e]=t;return this}return this.options[e]}},{key:"origin",value:function(e){return this._backCompatOption("origin",e)}},{key:"deltaSource",value:function(e){return"page"===e||"client"===e?(this.options.deltaSource=e,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(e){return this._context===e.ownerDocument||(0,S.nodeContains)(this._context,e)}},{key:"testIgnoreAllow",value:function(e,t,n){return!this.testIgnore(e.ignoreFrom,t,n)&&this.testAllow(e.allowFrom,t,n)}},{key:"testAllow",value:function(e,t,n){return!e||!!o.default.element(n)&&(o.default.string(e)?(0,S.matchesUpTo)(n,e,t):!!o.default.element(e)&&(0,S.nodeContains)(e,n))}},{key:"testIgnore",value:function(e,t,n){return!(!e||!o.default.element(n))&&(o.default.string(e)?(0,S.matchesUpTo)(n,e,t):!!o.default.element(e)&&(0,S.nodeContains)(e,n))}},{key:"fire",value:function(e){return this.events.fire(e),this}},{key:"_onOff",value:function(e,t,n,i){o.default.object(t)&&!o.default.array(t)&&(i=n,n=null);var r="on"===e?"add":"remove",a=(0,A.default)(t,n);for(var s in a){"wheel"===s&&(s=b.default.wheelEvent);for(var l=0;l<a[s].length;l++){var u=a[s][l];(0,dn.default)(s,this._actions)?this.events[e](s,u):o.default.string(this.target)?this._scopeEvents["".concat(r,"Delegate")](this.target,this._context,s,u,i):this._scopeEvents[r](this.target,s,u,i)}}return this}},{key:"on",value:function(e,t,n){return this._onOff("on",e,t,n)}},{key:"off",value:function(e,t,n){return this._onOff("off",e,t,n)}},{key:"set",value:function(e){var t=this._defaults;for(var n in o.default.object(e)||(e={}),this.options=(0,ft.default)(t.base),this._actions.methodDict){var i=n,r=this._actions.methodDict[i];this.options[i]={},this.setPerAction(i,(0,j.default)((0,j.default)({},t.perAction),t.actions[i])),this[r](e[i])}for(var a in e)o.default.func(this[a])&&this[a](e[a]);return this}},{key:"unset",value:function(){if(o.default.string(this.target))for(var e in this._scopeEvents.delegatedEvents)for(var t=this._scopeEvents.delegatedEvents[e],n=t.length-1;n>=0;n--){var i=t[n],r=i.selector,a=i.context,s=i.listeners;r===this.target&&a===this._context&&t.splice(n,1);for(var l=s.length-1;l>=0;l--)this._scopeEvents.removeDelegate(this.target,this._context,e,s[l][0],s[l][1])}else this._scopeEvents.remove(this.target,"all")}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();fn.Interactable=vn;var gn={};function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(gn,"__esModule",{value:!0}),gn.InteractableSet=void 0;var mn=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),yn(this,"list",[]),yn(this,"selectorMap",{}),yn(this,"scope",void 0),this.scope=t,t.addListeners({"interactable:unset":function(e){var t=e.interactable,i=t.target,r=t._context,a=o.default.string(i)?n.selectorMap[i]:i[n.scope.id],s=U.findIndex(a,(function(e){return e.context===r}));a[s]&&(a[s].context=null,a[s].interactable=null),a.splice(s,1)}})}var t,n;return t=e,(n=[{key:"new",value:function(e,t){t=(0,j.default)(t||{},{actions:this.scope.actions});var n=new this.scope.Interactable(e,t,this.scope.document,this.scope.events),i={context:n._context,interactable:n};return this.scope.addDocument(n._doc),this.list.push(n),o.default.string(e)?(this.selectorMap[e]||(this.selectorMap[e]=[]),this.selectorMap[e].push(i)):(n.target[this.scope.id]||Object.defineProperty(e,this.scope.id,{value:[],configurable:!0}),e[this.scope.id].push(i)),this.scope.fire("interactable:new",{target:e,options:t,interactable:n,win:this.scope._win}),n}},{key:"get",value:function(e,t){var n=t&&t.context||this.scope.document,i=o.default.string(e),r=i?this.selectorMap[e]:e[this.scope.id];if(!r)return null;var a=U.find(r,(function(t){return t.context===n&&(i||t.interactable.inContext(e))}));return a&&a.interactable}},{key:"forEachMatch",value:function(e,t){for(var n=0;n<this.list.length;n++){var i=this.list[n],r=void 0;if((o.default.string(i.target)?o.default.element(e)&&S.matchesSelector(e,i.target):e===i.target)&&i.inContext(e)&&(r=t(i)),void 0!==r)return r}}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();gn.InteractableSet=mn;var bn={};function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(bn,"__esModule",{value:!0}),bn.default=void 0;var _n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),wn(this,"currentTarget",void 0),wn(this,"originalEvent",void 0),wn(this,"type",void 0),this.originalEvent=t,(0,N.default)(this,t)}var t,n;return t=e,(n=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function On(e){if(!o.default.object(e))return{capture:!!e,passive:!1};var t=(0,j.default)({},e);return t.capture=!!e.capture,t.passive=!!e.passive,t}var kn={id:"events",install:function(e){var t,n=[],i={},r=[],a={add:s,remove:l,addDelegate:function(e,t,n,o,a){var l=On(a);if(!i[n]){i[n]=[];for(var d=0;d<r.length;d++){var p=r[d];s(p,n,u),s(p,n,c,!0)}}var f=i[n],h=U.find(f,(function(n){return n.selector===e&&n.context===t}));h||(h={selector:e,context:t,listeners:[]},f.push(h)),h.listeners.push([o,l])},removeDelegate:function(e,t,n,r,o){var a,s=On(o),d=i[n],p=!1;if(d)for(a=d.length-1;a>=0;a--){var f=d[a];if(f.selector===e&&f.context===t){for(var h=f.listeners,v=h.length-1;v>=0;v--){var g=xn(h[v],2),y=g[0],m=g[1],b=m.capture,w=m.passive;if(y===r&&b===s.capture&&w===s.passive){h.splice(v,1),h.length||(d.splice(a,1),l(t,n,u),l(t,n,c,!0)),p=!0;break}}if(p)break}}},delegateListener:u,delegateUseCapture:c,delegatedEvents:i,documents:r,targets:n,supportsOptions:!1,supportsPassive:!1};function s(e,t,i,r){var o=On(r),s=U.find(n,(function(t){return t.eventTarget===e}));s||(s={eventTarget:e,events:{}},n.push(s)),s.events[t]||(s.events[t]=[]),e.addEventListener&&!U.contains(s.events[t],i)&&(e.addEventListener(t,i,a.supportsOptions?o:o.capture),s.events[t].push(i))}function l(e,t,i,r){var o=On(r),s=U.findIndex(n,(function(t){return t.eventTarget===e})),u=n[s];if(u&&u.events)if("all"!==t){var c=!1,d=u.events[t];if(d){if("all"===i){for(var p=d.length-1;p>=0;p--)l(e,t,d[p],o);return}for(var f=0;f<d.length;f++)if(d[f]===i){e.removeEventListener(t,i,a.supportsOptions?o:o.capture),d.splice(f,1),0===d.length&&(delete u.events[t],c=!0);break}}c&&!Object.keys(u.events).length&&n.splice(s,1)}else for(t in u.events)u.events.hasOwnProperty(t)&&l(e,t,"all")}function u(e,t){for(var n=On(t),r=new _n(e),a=i[e.type],s=xn(H.getEventTargets(e),1)[0],l=s;o.default.element(l);){for(var u=0;u<a.length;u++){var c=a[u],d=c.selector,p=c.context;if(S.matchesSelector(l,d)&&S.nodeContains(p,s)&&S.nodeContains(p,l)){var f=c.listeners;r.currentTarget=l;for(var h=0;h<f.length;h++){var v=xn(f[h],2),g=v[0],y=v[1],m=y.capture,b=y.passive;m===n.capture&&b===n.passive&&g(r)}}}l=S.parentNode(l)}}function c(e){return u(e,!0)}return null==(t=e.document)||t.createElement("div").addEventListener("test",null,{get capture(){return a.supportsOptions=!0},get passive(){return a.supportsPassive=!0}}),e.events=a,a}};bn.default=kn;var In={};Object.defineProperty(In,"__esModule",{value:!0}),In.default=void 0;var En={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(e){for(var t=0;t<En.methodOrder.length;t++){var n;n=En.methodOrder[t];var i=En[n](e);if(i)return i}return null},simulationResume:function(e){var t=e.pointerType,n=e.eventType,i=e.eventTarget,r=e.scope;if(!/down|start/i.test(n))return null;for(var o=0;o<r.interactions.list.length;o++){var a=r.interactions.list[o],s=i;if(a.simulation&&a.simulation.allowResume&&a.pointerType===t)for(;s;){if(s===a.element)return a;s=S.parentNode(s)}}return null},mouseOrPen:function(e){var t,n=e.pointerId,i=e.pointerType,r=e.eventType,o=e.scope;if("mouse"!==i&&"pen"!==i)return null;for(var a=0;a<o.interactions.list.length;a++){var s=o.interactions.list[a];if(s.pointerType===i){if(s.simulation&&!Pn(s,n))continue;if(s.interacting())return s;t||(t=s)}}if(t)return t;for(var l=0;l<o.interactions.list.length;l++){var u=o.interactions.list[l];if(!(u.pointerType!==i||/down/i.test(r)&&u.simulation))return u}return null},hasPointer:function(e){for(var t=e.pointerId,n=e.scope,i=0;i<n.interactions.list.length;i++){var r=n.interactions.list[i];if(Pn(r,t))return r}return null},idle:function(e){for(var t=e.pointerType,n=e.scope,i=0;i<n.interactions.list.length;i++){var r=n.interactions.list[i];if(1===r.pointers.length){var o=r.interactable;if(o&&(!o.options.gesture||!o.options.gesture.enabled))continue}else if(r.pointers.length>=2)continue;if(!r.interacting()&&t===r.pointerType)return r}return null}};function Pn(e,t){return e.pointers.some((function(e){return e.id===t}))}var jn=En;In.default=jn;var Mn={};function Tn(e){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(e)}function Cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function An(e,t){return An=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},An(e,t)}function Dn(e){return Dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dn(e)}Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.default=void 0;var Rn=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function Nn(e,t){return function(n){var i=t.interactions.list,r=H.getPointerType(n),o=Cn(H.getEventTargets(n),2),a=o[0],s=o[1],l=[];if(/^touch/.test(n.type)){t.prevTouchTime=t.now();for(var u=0;u<n.changedTouches.length;u++){var c=n.changedTouches[u],d={pointer:c,pointerId:H.getPointerId(c),pointerType:r,eventType:n.type,eventTarget:a,curEventTarget:s,scope:t},p=Hn(d);l.push([d.pointer,d.eventTarget,d.curEventTarget,p])}}else{var f=!1;if(!b.default.supportsPointerEvent&&/mouse/.test(n.type)){for(var h=0;h<i.length&&!f;h++)f="mouse"!==i[h].pointerType&&i[h].pointerIsDown;f=f||t.now()-t.prevTouchTime<500||0===n.timeStamp}if(!f){var v={pointer:n,pointerId:H.getPointerId(n),pointerType:r,eventType:n.type,curEventTarget:s,eventTarget:a,scope:t},g=Hn(v);l.push([v.pointer,v.eventTarget,v.curEventTarget,g])}}for(var y=0;y<l.length;y++){var m=Cn(l[y],4),w=m[0],x=m[1],S=m[2];m[3][e](w,n,x,S)}}}function Hn(e){var t=e.pointerType,n=e.scope,i={interaction:In.default.search(e),searchDetails:e};return n.fire("interactions:find",i),i.interaction||n.interactions.new({pointerType:t})}function Bn(e,t){var n=e.doc,i=e.scope,r=e.options,o=i.interactions.docEvents,a=i.events,s=a[t];for(var l in i.browser.isIOS&&!r.events&&(r.events={passive:!1}),a.delegatedEvents)s(n,l,a.delegateListener),s(n,l,a.delegateUseCapture,!0);for(var u=r&&r.events,c=0;c<o.length;c++){var d=o[c];s(n,d.type,d.listener,u)}}var Wn={id:"core/interactions",install:function(e){for(var t={},n=0;n<Rn.length;n++){var i=Rn[n];t[i]=Nn(i,e)}var r,o=b.default.pEventTypes;function a(){for(var t=0;t<e.interactions.list.length;t++){var n=e.interactions.list[t];if(n.pointerIsDown&&"touch"===n.pointerType&&!n._interacting)for(var i=function(){var t=n.pointers[r];e.documents.some((function(e){var n=e.doc;return(0,S.nodeContains)(n,t.downTarget)}))||n.removePointer(t.pointer,t.event)},r=0;r<n.pointers.length;r++)i()}}(r=v.default.PointerEvent?[{type:o.down,listener:a},{type:o.down,listener:t.pointerDown},{type:o.move,listener:t.pointerMove},{type:o.up,listener:t.pointerUp},{type:o.cancel,listener:t.pointerUp}]:[{type:"mousedown",listener:t.pointerDown},{type:"mousemove",listener:t.pointerMove},{type:"mouseup",listener:t.pointerUp},{type:"touchstart",listener:a},{type:"touchstart",listener:t.pointerDown},{type:"touchmove",listener:t.pointerMove},{type:"touchend",listener:t.pointerUp},{type:"touchcancel",listener:t.pointerUp}]).push({type:"blur",listener:function(t){for(var n=0;n<e.interactions.list.length;n++)e.interactions.list[n].documentBlur(t)}}),e.prevTouchTime=0,e.Interaction=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&An(e,t)}(s,t);var n,i,r,o,a=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dn(r);if(o){var n=Dn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Tn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),a.apply(this,arguments)}return n=s,(i=[{key:"pointerMoveTolerance",get:function(){return e.interactions.pointerMoveTolerance},set:function(t){e.interactions.pointerMoveTolerance=t}},{key:"_now",value:function(){return e.now()}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),s}(Bt.default),e.interactions={list:[],new:function(t){t.scopeFire=function(t,n){return e.fire(t,n)};var n=new e.Interaction(t);return e.interactions.list.push(n),n},listeners:t,docEvents:r,pointerMoveTolerance:1},e.usePlugin(ot.default)},listeners:{"scope:add-document":function(e){return Bn(e,"add")},"scope:remove-document":function(e){return Bn(e,"remove")},"interactable:unset":function(e,t){for(var n=e.interactable,i=t.interactions.list.length-1;i>=0;i--){var r=t.interactions.list[i];r.interactable===n&&(r.stop(),t.fire("interactions:destroy",{interaction:r}),r.destroy(),t.interactions.list.length>2&&t.interactions.list.splice(i,1))}}},onDocSignal:Bn,doOnInteractions:Nn,methodNames:Rn},$n=Wn;Mn.default=$n;var Ln={};function Gn(e){return Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(e)}function Fn(){return Fn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xn(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},Fn.apply(this,arguments)}function Yn(e,t){return Yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yn(e,t)}function Xn(e){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xn(e)}function qn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Un(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Zn(e,t,n){return t&&Un(e.prototype,t),n&&Un(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.Scope=void 0,Ln.initScope=Kn;var Jn=function(){function e(){var t=this;qn(this,e),Vn(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),Vn(this,"isInitialized",!1),Vn(this,"listenerMaps",[]),Vn(this,"browser",b.default),Vn(this,"defaults",(0,ft.default)(kt.defaults)),Vn(this,"Eventable",sn.Eventable),Vn(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),Vn(this,"interactStatic",(0,pn.createInteractStatic)(this)),Vn(this,"InteractEvent",It.InteractEvent),Vn(this,"Interactable",void 0),Vn(this,"interactables",new gn.InteractableSet(this)),Vn(this,"_win",void 0),Vn(this,"document",void 0),Vn(this,"window",void 0),Vn(this,"documents",[]),Vn(this,"_plugins",{list:[],map:{}}),Vn(this,"onWindowUnload",(function(e){return t.removeDocument(e.target)}));var n=this;this.Interactable=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yn(e,t)}(o,e);var t,i,r=(t=o,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=Xn(t);if(i){var r=Xn(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(e,t){if(t&&("object"===Gn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function o(){return qn(this,o),r.apply(this,arguments)}return Zn(o,[{key:"_defaults",get:function(){return n.defaults}},{key:"set",value:function(e){return Fn(Xn(o.prototype),"set",this).call(this,e),n.fire("interactable:set",{options:e,interactable:this}),this}},{key:"unset",value:function(){Fn(Xn(o.prototype),"unset",this).call(this);var e=n.interactables.list.indexOf(this);e<0||(Fn(Xn(o.prototype),"unset",this).call(this),n.interactables.list.splice(e,1),n.fire("interactable:unset",{interactable:this}))}}]),o}(fn.Interactable)}return Zn(e,[{key:"addListeners",value:function(e,t){this.listenerMaps.push({id:t,map:e})}},{key:"fire",value:function(e,t){for(var n=0;n<this.listenerMaps.length;n++){var i=this.listenerMaps[n].map[e];if(i&&!1===i(t,this,e))return!1}}},{key:"init",value:function(e){return this.isInitialized?this:Kn(this,e)}},{key:"pluginIsInstalled",value:function(e){return this._plugins.map[e.id]||-1!==this._plugins.list.indexOf(e)}},{key:"usePlugin",value:function(e,t){if(!this.isInitialized)return this;if(this.pluginIsInstalled(e))return this;if(e.id&&(this._plugins.map[e.id]=e),this._plugins.list.push(e),e.install&&e.install(this,t),e.listeners&&e.before){for(var n=0,i=this.listenerMaps.length,r=e.before.reduce((function(e,t){return e[t]=!0,e[Qn(t)]=!0,e}),{});n<i;n++){var o=this.listenerMaps[n].id;if(r[o]||r[Qn(o)])break}this.listenerMaps.splice(n,0,{id:e.id,map:e.listeners})}else e.listeners&&this.listenerMaps.push({id:e.id,map:e.listeners});return this}},{key:"addDocument",value:function(e,n){if(-1!==this.getDocIndex(e))return!1;var i=t.getWindow(e);n=n?(0,j.default)({},n):{},this.documents.push({doc:e,options:n}),this.events.documents.push(e),e!==this.document&&this.events.add(i,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:e,window:i,scope:this,options:n})}},{key:"removeDocument",value:function(e){var n=this.getDocIndex(e),i=t.getWindow(e),r=this.documents[n].options;this.events.remove(i,"unload",this.onWindowUnload),this.documents.splice(n,1),this.events.documents.splice(n,1),this.fire("scope:remove-document",{doc:e,window:i,scope:this,options:r})}},{key:"getDocIndex",value:function(e){for(var t=0;t<this.documents.length;t++)if(this.documents[t].doc===e)return t;return-1}},{key:"getDocOptions",value:function(e){var t=this.getDocIndex(e);return-1===t?null:this.documents[t].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),e}();function Kn(e,n){return e.isInitialized=!0,o.default.window(n)&&t.init(n),v.default.init(n),b.default.init(n),Oe.default.init(n),e.window=n,e.document=n.document,e.usePlugin(Mn.default),e.usePlugin(bn.default),e}function Qn(e){return e&&e.replace(/\/.*$/,"")}Ln.Scope=Jn;var ei={};Object.defineProperty(ei,"__esModule",{value:!0}),ei.default=void 0;var ti=new Ln.Scope,ni=ti.interactStatic;ei.default=ni;var ii="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0;ti.init(ii);var ri={};Object.defineProperty(ri,"__esModule",{value:!0}),ri.default=void 0,ri.default=function(){};var oi={};Object.defineProperty(oi,"__esModule",{value:!0}),oi.default=void 0,oi.default=function(){};var ai={};function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return li(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?li(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function li(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(ai,"__esModule",{value:!0}),ai.default=void 0,ai.default=function(e){var t=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((function(t){var n=si(t,2),i=n[0],r=n[1];return i in e||r in e})),n=function(n,i){for(var r=e.range,o=e.limits,a=void 0===o?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:o,s=e.offset,l=void 0===s?{x:0,y:0}:s,u={range:r,grid:e,x:null,y:null},c=0;c<t.length;c++){var d=si(t[c],2),p=d[0],f=d[1],h=Math.round((n-l.x)/e[p]),v=Math.round((i-l.y)/e[f]);u[p]=Math.max(a.left,Math.min(a.right,h*e[p]+l.x)),u[f]=Math.max(a.top,Math.min(a.bottom,v*e[f]+l.y))}return u};return n.grid=e,n.coordFields=t,n};var ui={};Object.defineProperty(ui,"__esModule",{value:!0}),Object.defineProperty(ui,"edgeTarget",{enumerable:!0,get:function(){return ri.default}}),Object.defineProperty(ui,"elements",{enumerable:!0,get:function(){return oi.default}}),Object.defineProperty(ui,"grid",{enumerable:!0,get:function(){return ai.default}});var ci={};Object.defineProperty(ci,"__esModule",{value:!0}),ci.default=void 0;var di={id:"snappers",install:function(e){var t=e.interactStatic;t.snappers=(0,j.default)(t.snappers||{},ui),t.createSnapGrid=t.snappers.grid}},pi=di;ci.default=pi;var fi={};function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach((function(t){gi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(fi,"__esModule",{value:!0}),fi.default=fi.aspectRatio=void 0;var yi={start:function(e){var t=e.state,n=e.rect,i=e.edges,r=e.pageCoords,o=t.options.ratio,a=t.options,s=a.equalDelta,l=a.modifiers;"preserve"===o&&(o=n.width/n.height),t.startCoords=(0,j.default)({},r),t.startRect=(0,j.default)({},n),t.ratio=o,t.equalDelta=s;var u=t.linkedEdges={top:i.top||i.left&&!i.bottom,left:i.left||i.top&&!i.right,bottom:i.bottom||i.right&&!i.top,right:i.right||i.bottom&&!i.left};if(t.xIsPrimaryAxis=!(!i.left&&!i.right),t.equalDelta){var c=(u.left?1:-1)*(u.top?1:-1);t.edgeSign={x:c,y:c}}else t.edgeSign={x:u.left?-1:1,y:u.top?-1:1};if((0,j.default)(e.edges,u),l&&l.length){var d=new ht.default(e.interaction);d.copyFrom(e.interaction.modification),d.prepareStates(l),t.subModification=d,d.startAll(vi({},e))}},set:function(e){var t=e.state,n=e.rect,i=e.coords,r=(0,j.default)({},i),o=t.equalDelta?mi:bi;if(o(t,t.xIsPrimaryAxis,i,n),!t.subModification)return null;var a=(0,j.default)({},n);(0,M.addEdges)(t.linkedEdges,a,{x:i.x-r.x,y:i.y-r.y});var s=t.subModification.setAll(vi(vi({},e),{},{rect:a,edges:t.linkedEdges,pageCoords:i,prevCoords:i,prevRect:a})),l=s.delta;return s.changed&&(o(t,Math.abs(l.x)>Math.abs(l.y),s.coords,s.rect),(0,j.default)(i,s.coords)),s.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function mi(e,t,n){var i=e.startCoords,r=e.edgeSign;t?n.y=i.y+(n.x-i.x)*r.y:n.x=i.x+(n.y-i.y)*r.x}function bi(e,t,n,i){var r=e.startRect,o=e.startCoords,a=e.ratio,s=e.edgeSign;if(t){var l=i.width/a;n.y=o.y+(l-r.height)*s.y}else{var u=i.height*a;n.x=o.x+(u-r.width)*s.x}}fi.aspectRatio=yi;var wi=(0,xt.makeModifier)(yi,"aspectRatio");fi.default=wi;var xi={};Object.defineProperty(xi,"__esModule",{value:!0}),xi.default=void 0;var Si=function(){};Si._defaults={};var _i=Si;xi.default=_i;var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0}),Object.defineProperty(Oi,"default",{enumerable:!0,get:function(){return xi.default}});var ki={};function Ii(e,t,n){return o.default.func(e)?M.resolveRectLike(e,t.interactable,t.element,[n.x,n.y,t]):M.resolveRectLike(e,t.interactable,t.element)}Object.defineProperty(ki,"__esModule",{value:!0}),ki.default=void 0,ki.getRestrictionRect=Ii,ki.restrict=void 0;var Ei={start:function(e){var t=e.rect,n=e.startOffset,i=e.state,r=e.interaction,o=e.pageCoords,a=i.options,s=a.elementRect,l=(0,j.default)({left:0,top:0,right:0,bottom:0},a.offset||{});if(t&&s){var u=Ii(a.restriction,r,o);if(u){var c=u.right-u.left-t.width,d=u.bottom-u.top-t.height;c<0&&(l.left+=c,l.right+=c),d<0&&(l.top+=d,l.bottom+=d)}l.left+=n.left-t.width*s.left,l.top+=n.top-t.height*s.top,l.right+=n.right-t.width*(1-s.right),l.bottom+=n.bottom-t.height*(1-s.bottom)}i.offset=l},set:function(e){var t=e.coords,n=e.interaction,i=e.state,r=i.options,o=i.offset,a=Ii(r.restriction,n,t);if(a){var s=M.xywhToTlbr(a);t.x=Math.max(Math.min(s.right-o.right,t.x),s.left+o.left),t.y=Math.max(Math.min(s.bottom-o.bottom,t.y),s.top+o.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};ki.restrict=Ei;var Pi=(0,xt.makeModifier)(Ei,"restrict");ki.default=Pi;var ji={};Object.defineProperty(ji,"__esModule",{value:!0}),ji.restrictEdges=ji.default=void 0;var Mi={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Ti={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Ci(e,t){for(var n=["top","left","bottom","right"],i=0;i<n.length;i++){var r=n[i];r in e||(e[r]=t[r])}return e}var zi={noInner:Mi,noOuter:Ti,start:function(e){var t,n=e.interaction,i=e.startOffset,r=e.state,o=r.options;if(o){var a=(0,ki.getRestrictionRect)(o.offset,n,n.coords.start.page);t=M.rectToXY(a)}t=t||{x:0,y:0},r.offset={top:t.y+i.top,left:t.x+i.left,bottom:t.y-i.bottom,right:t.x-i.right}},set:function(e){var t=e.coords,n=e.edges,i=e.interaction,r=e.state,o=r.offset,a=r.options;if(n){var s=(0,j.default)({},t),l=(0,ki.getRestrictionRect)(a.inner,i,s)||{},u=(0,ki.getRestrictionRect)(a.outer,i,s)||{};Ci(l,Mi),Ci(u,Ti),n.top?t.y=Math.min(Math.max(u.top+o.top,s.y),l.top+o.top):n.bottom&&(t.y=Math.max(Math.min(u.bottom+o.bottom,s.y),l.bottom+o.bottom)),n.left?t.x=Math.min(Math.max(u.left+o.left,s.x),l.left+o.left):n.right&&(t.x=Math.max(Math.min(u.right+o.right,s.x),l.right+o.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};ji.restrictEdges=zi;var Ai=(0,xt.makeModifier)(zi,"restrictEdges");ji.default=Ai;var Di={};Object.defineProperty(Di,"__esModule",{value:!0}),Di.restrictRect=Di.default=void 0;var Ri=(0,j.default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(e){}},ki.restrict.defaults),Ni={start:ki.restrict.start,set:ki.restrict.set,defaults:Ri};Di.restrictRect=Ni;var Hi=(0,xt.makeModifier)(Ni,"restrictRect");Di.default=Hi;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.restrictSize=Bi.default=void 0;var Wi={width:-1/0,height:-1/0},$i={width:1/0,height:1/0},Li={start:function(e){return ji.restrictEdges.start(e)},set:function(e){var t=e.interaction,n=e.state,i=e.rect,r=e.edges,o=n.options;if(r){var a=M.tlbrToXywh((0,ki.getRestrictionRect)(o.min,t,e.coords))||Wi,s=M.tlbrToXywh((0,ki.getRestrictionRect)(o.max,t,e.coords))||$i;n.options={endOnly:o.endOnly,inner:(0,j.default)({},ji.restrictEdges.noInner),outer:(0,j.default)({},ji.restrictEdges.noOuter)},r.top?(n.options.inner.top=i.bottom-a.height,n.options.outer.top=i.bottom-s.height):r.bottom&&(n.options.inner.bottom=i.top+a.height,n.options.outer.bottom=i.top+s.height),r.left?(n.options.inner.left=i.right-a.width,n.options.outer.left=i.right-s.width):r.right&&(n.options.inner.right=i.left+a.width,n.options.outer.right=i.left+s.width),ji.restrictEdges.set(e),n.options=o}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Bi.restrictSize=Li;var Gi=(0,xt.makeModifier)(Li,"restrictSize");Bi.default=Gi;var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0}),Object.defineProperty(Fi,"default",{enumerable:!0,get:function(){return xi.default}});var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.snap=Yi.default=void 0;var Xi={start:function(e){var t,n=e.interaction,i=e.interactable,r=e.element,o=e.rect,a=e.state,s=e.startOffset,l=a.options,u=l.offsetWithOrigin?function(e){var t=e.interaction.element;return(0,M.rectToXY)((0,M.resolveRectLike)(e.state.options.origin,null,null,[t]))||(0,z.default)(e.interactable,t,e.interaction.prepared.name)}(e):{x:0,y:0};if("startCoords"===l.offset)t={x:n.coords.start.page.x,y:n.coords.start.page.y};else{var c=(0,M.resolveRectLike)(l.offset,i,r,[n]);(t=(0,M.rectToXY)(c)||{x:0,y:0}).x+=u.x,t.y+=u.y}var d=l.relativePoints;a.offsets=o&&d&&d.length?d.map((function(e,n){return{index:n,relativePoint:e,x:s.left-o.width*e.x+t.x,y:s.top-o.height*e.y+t.y}})):[{index:0,relativePoint:null,x:t.x,y:t.y}]},set:function(e){var t=e.interaction,n=e.coords,i=e.state,r=i.options,a=i.offsets,s=(0,z.default)(t.interactable,t.element,t.prepared.name),l=(0,j.default)({},n),u=[];r.offsetWithOrigin||(l.x-=s.x,l.y-=s.y);for(var c=0;c<a.length;c++)for(var d=a[c],p=l.x-d.x,f=l.y-d.y,h=0,v=r.targets.length;h<v;h++){var g,y=r.targets[h];(g=o.default.func(y)?y(p,f,t._proxy,d,h):y)&&u.push({x:(o.default.number(g.x)?g.x:p)+d.x,y:(o.default.number(g.y)?g.y:f)+d.y,range:o.default.number(g.range)?g.range:r.range,source:y,index:h,offset:d})}for(var m={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},b=0;b<u.length;b++){var w=u[b],x=w.range,S=w.x-l.x,_=w.y-l.y,O=(0,R.default)(S,_),k=O<=x;x===1/0&&m.inRange&&m.range!==1/0&&(k=!1),m.target&&!(k?m.inRange&&x!==1/0?O/x<m.distance/m.range:x===1/0&&m.range!==1/0||O<m.distance:!m.inRange&&O<m.distance)||(m.target=w,m.distance=O,m.range=x,m.inRange=k,m.delta.x=S,m.delta.y=_)}return m.inRange&&(n.x=m.target.x,n.y=m.target.y),i.closest=m,m},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};Yi.snap=Xi;var qi=(0,xt.makeModifier)(Xi,"snap");Yi.default=qi;var Ui={};function Zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.snapSize=Ui.default=void 0;var Vi={start:function(e){var t=e.state,n=e.edges,i=t.options;if(!n)return null;e.state={options:{targets:null,relativePoints:[{x:n.left?0:1,y:n.top?0:1}],offset:i.offset||"self",origin:{x:0,y:0},range:i.range}},t.targetFields=t.targetFields||[["width","height"],["x","y"]],Yi.snap.start(e),t.offsets=e.state.offsets,e.state=t},set:function(e){var t,n=e.interaction,i=e.state,r=e.coords,a=i.options,s=i.offsets,l={x:r.x-s[0].x,y:r.y-s[0].y};i.options=(0,j.default)({},a),i.options.targets=[];for(var u=0;u<(a.targets||[]).length;u++){var c=(a.targets||[])[u],d=void 0;if(d=o.default.func(c)?c(l.x,l.y,n):c){for(var p=0;p<i.targetFields.length;p++){var f=function(e){if(Array.isArray(e))return e}(t=i.targetFields[p])||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),2!==o.length);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(t)||function(e,t){if(e){if("string"==typeof e)return Zi(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zi(e,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=f[0],v=f[1];if(h in d||v in d){d.x=d[h],d.y=d[v];break}}i.options.targets.push(d)}}var g=Yi.snap.set(e);return i.options=a,g},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};Ui.snapSize=Vi;var Ji=(0,xt.makeModifier)(Vi,"snapSize");Ui.default=Ji;var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.snapEdges=Ki.default=void 0;var Qi={start:function(e){var t=e.edges;return t?(e.state.targetFields=e.state.targetFields||[[t.left?"left":"right",t.top?"top":"bottom"]],Ui.snapSize.start(e)):null},set:Ui.snapSize.set,defaults:(0,j.default)((0,ft.default)(Ui.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Ki.snapEdges=Qi;var er=(0,xt.makeModifier)(Qi,"snapEdges");Ki.default=er;var tr={};Object.defineProperty(tr,"__esModule",{value:!0}),Object.defineProperty(tr,"default",{enumerable:!0,get:function(){return xi.default}});var nr={};Object.defineProperty(nr,"__esModule",{value:!0}),Object.defineProperty(nr,"default",{enumerable:!0,get:function(){return xi.default}});var ir={};Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=void 0;var rr={aspectRatio:fi.default,restrictEdges:ji.default,restrict:ki.default,restrictRect:Di.default,restrictSize:Bi.default,snapEdges:Ki.default,snap:Yi.default,snapSize:Ui.default,spring:tr.default,avoid:Oi.default,transform:nr.default,rubberband:Fi.default};ir.default=rr;var or={};Object.defineProperty(or,"__esModule",{value:!0}),or.default=void 0;var ar={id:"modifiers",install:function(e){var t=e.interactStatic;for(var n in e.usePlugin(xt.default),e.usePlugin(ci.default),t.modifiers=ir.default,ir.default){var i=ir.default[n],r=i._defaults,o=i._methods;r._methods=o,e.defaults.perAction[n]=r}}},sr=ar;or.default=sr;var lr={};function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function cr(e,t){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},cr(e,t)}function dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pr(e){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pr(e)}Object.defineProperty(lr,"__esModule",{value:!0}),lr.default=lr.PointerEvent=void 0;var fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cr(e,t)}(a,e);var t,n,i,r,o=(i=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pr(i);if(r){var n=pr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ur(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return dr(e)}(this,e)});function a(e,t,n,i,r,s){var l;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),l=o.call(this,r),H.pointerExtend(dr(l),n),n!==t&&H.pointerExtend(dr(l),t),l.timeStamp=s,l.originalEvent=n,l.type=e,l.pointerId=H.getPointerId(t),l.pointerType=H.getPointerType(t),l.target=i,l.currentTarget=null,"tap"===e){var u=r.getPointerIndex(t);l.dt=l.timeStamp-r.pointers[u].downTime;var c=l.timeStamp-r.tapTime;l.double=!!r.prevTap&&"doubletap"!==r.prevTap.type&&r.prevTap.target===l.target&&c<500}else"doubletap"===e&&(l.dt=t.timeStamp-r.tapTime,l.double=!0);return l}return t=a,(n=[{key:"_subtractOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX-=t,this.pageY-=n,this.clientX-=t,this.clientY-=n,this}},{key:"_addOrigin",value:function(e){var t=e.x,n=e.y;return this.pageX+=t,this.pageY+=n,this.clientX+=t,this.clientY+=n,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y.BaseEvent);lr.PointerEvent=lr.default=fr;var hr={};Object.defineProperty(hr,"__esModule",{value:!0}),hr.default=void 0;var vr={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(e){e.pointerEvents=vr,e.defaults.actions.pointerEvents=vr.defaults,(0,j.default)(e.actions.phaselessTypes,vr.types)},listeners:{"interactions:new":function(e){var t=e.interaction;t.prevTap=null,t.tapTime=0},"interactions:update-pointer":function(e){var t=e.down,n=e.pointerInfo;!t&&n.hold||(n.hold={duration:1/0,timeout:null})},"interactions:move":function(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget;e.duplicate||n.pointerIsDown&&!n.pointerWasMoved||(n.pointerIsDown&&mr(e),gr({interaction:n,pointer:i,event:r,eventTarget:o,type:"move"},t))},"interactions:down":function(e,t){!function(e,t){for(var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget,a=e.pointerIndex,s=n.pointers[a].hold,l=S.getPath(o),u={interaction:n,pointer:i,event:r,eventTarget:o,type:"hold",targets:[],path:l,node:null},c=0;c<l.length;c++){var d=l[c];u.node=d,t.fire("pointerEvents:collect-targets",u)}if(u.targets.length){for(var p=1/0,f=0;f<u.targets.length;f++){var h=u.targets[f].eventable.options.holdDuration;h<p&&(p=h)}s.duration=p,s.timeout=setTimeout((function(){gr({interaction:n,eventTarget:o,pointer:i,event:r,type:"hold"},t)}),p)}}(e,t),gr(e,t)},"interactions:up":function(e,t){mr(e),gr(e,t),function(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget;n.pointerWasMoved||gr({interaction:n,eventTarget:o,pointer:i,event:r,type:"tap"},t)}(e,t)},"interactions:cancel":function(e,t){mr(e),gr(e,t)}},PointerEvent:lr.PointerEvent,fire:gr,collectEventTargets:yr,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function gr(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget,a=e.type,s=e.targets,l=void 0===s?yr(e,t):s,u=new lr.PointerEvent(a,i,r,o,n,t.now());t.fire("pointerEvents:new",{pointerEvent:u});for(var c={interaction:n,pointer:i,event:r,eventTarget:o,targets:l,type:a,pointerEvent:u},d=0;d<l.length;d++){var p=l[d];for(var f in p.props||{})u[f]=p.props[f];var h=(0,z.default)(p.eventable,p.node);if(u._subtractOrigin(h),u.eventable=p.eventable,u.currentTarget=p.node,p.eventable.fire(u),u._addOrigin(h),u.immediatePropagationStopped||u.propagationStopped&&d+1<l.length&&l[d+1].node!==u.currentTarget)break}if(t.fire("pointerEvents:fired",c),"tap"===a){var v=u.double?gr({interaction:n,pointer:i,event:r,eventTarget:o,type:"doubletap"},t):u;n.prevTap=v,n.tapTime=v.timeStamp}return u}function yr(e,t){var n=e.interaction,i=e.pointer,r=e.event,o=e.eventTarget,a=e.type,s=n.getPointerIndex(i),l=n.pointers[s];if("tap"===a&&(n.pointerWasMoved||!l||l.downTarget!==o))return[];for(var u=S.getPath(o),c={interaction:n,pointer:i,event:r,eventTarget:o,type:a,path:u,targets:[],node:null},d=0;d<u.length;d++){var p=u[d];c.node=p,t.fire("pointerEvents:collect-targets",c)}return"hold"===a&&(c.targets=c.targets.filter((function(e){var t;return e.eventable.options.holdDuration===(null==(t=n.pointers[s])?void 0:t.hold.duration)}))),c.targets}function mr(e){var t=e.interaction,n=e.pointerIndex,i=t.pointers[n].hold;i&&i.timeout&&(clearTimeout(i.timeout),i.timeout=null)}var br=vr;hr.default=br;var wr={};function xr(e){var t=e.interaction;t.holdIntervalHandle&&(clearInterval(t.holdIntervalHandle),t.holdIntervalHandle=null)}Object.defineProperty(wr,"__esModule",{value:!0}),wr.default=void 0;var Sr={id:"pointer-events/holdRepeat",install:function(e){e.usePlugin(hr.default);var t=e.pointerEvents;t.defaults.holdRepeatInterval=0,t.types.holdrepeat=e.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce((function(e,t){return e["pointerEvents:".concat(t)]=xr,e}),{"pointerEvents:new":function(e){var t=e.pointerEvent;"hold"===t.type&&(t.count=(t.count||0)+1)},"pointerEvents:fired":function(e,t){var n=e.interaction,i=e.pointerEvent,r=e.eventTarget,o=e.targets;if("hold"===i.type&&o.length){var a=o[0].eventable.options.holdRepeatInterval;a<=0||(n.holdIntervalHandle=setTimeout((function(){t.pointerEvents.fire({interaction:n,eventTarget:r,type:"hold",pointer:i,event:i},t)}),a))}}})},_r=Sr;wr.default=_r;var Or={};function kr(e){return(0,j.default)(this.events.options,e),this}Object.defineProperty(Or,"__esModule",{value:!0}),Or.default=void 0;var Ir={id:"pointer-events/interactableTargets",install:function(e){var t=e.Interactable;t.prototype.pointerEvents=kr;var n=t.prototype._backCompatOption;t.prototype._backCompatOption=function(e,t){var i=n.call(this,e,t);return i===this&&(this.events.options[e]=t),i}},listeners:{"pointerEvents:collect-targets":function(e,t){var n=e.targets,i=e.node,r=e.type,o=e.eventTarget;t.interactables.forEachMatch(i,(function(e){var t=e.events,a=t.options;t.types[r]&&t.types[r].length&&e.testIgnoreAllow(a,i,o)&&n.push({node:i,eventable:t,props:{interactable:e}})}))},"interactable:new":function(e){var t=e.interactable;t.events.getRect=function(e){return t.getRect(e)}},"interactable:set":function(e,t){var n=e.interactable,i=e.options;(0,j.default)(n.events.options,t.pointerEvents.defaults),(0,j.default)(n.events.options,i.pointerEvents||{})}}},Er=Ir;Or.default=Er;var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.default=void 0;var jr={id:"pointer-events",install:function(e){e.usePlugin(hr),e.usePlugin(wr.default),e.usePlugin(Or.default)}},Mr=jr;Pr.default=Mr;var Tr={};function Cr(e){var t=e.Interactable;e.actions.phases.reflow=!0,t.prototype.reflow=function(t){return function(e,t,n){for(var i=o.default.string(e.target)?U.from(e._context.querySelectorAll(e.target)):[e.target],r=n.window.Promise,a=r?[]:null,s=function(){var o=i[l],s=e.getRect(o);if(!s)return"break";var u=U.find(n.interactions.list,(function(n){return n.interacting()&&n.interactable===e&&n.element===o&&n.prepared.name===t.name})),c=void 0;if(u)u.move(),a&&(c=u._reflowPromise||new r((function(e){u._reflowResolve=e})));else{var d=(0,M.tlbrToXywh)(s),p={page:{x:d.x,y:d.y},client:{x:d.x,y:d.y},timeStamp:n.now()},f=H.coordsToEvent(p);c=function(e,t,n,i,r){var o=e.interactions.new({pointerType:"reflow"}),a={interaction:o,event:r,pointer:r,eventTarget:n,phase:"reflow"};o.interactable=t,o.element=n,o.prevEvent=r,o.updatePointer(r,r,n,!0),H.setZeroCoords(o.coords.delta),(0,De.copyAction)(o.prepared,i),o._doPhase(a);var s=e.window.Promise,l=s?new s((function(e){o._reflowResolve=e})):void 0;return o._reflowPromise=l,o.start(i,t,n),o._interacting?(o.move(a),o.end(r)):(o.stop(),o._reflowResolve()),o.removePointer(r,r),l}(n,e,o,t,f)}a&&a.push(c)},l=0;l<i.length&&"break"!==s();l++);return a&&r.all(a).then((function(){return e}))}(this,t,e)}}Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.default=void 0,Tr.install=Cr;var zr={id:"reflow",install:Cr,listeners:{"interactions:stop":function(e,t){var n=e.interaction;"reflow"===n.pointerType&&(n._reflowResolve&&n._reflowResolve(),U.remove(t.interactions.list,n))}}},Ar=zr;Tr.default=Ar;var Dr={exports:{}};function Rr(e){return Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rr(e)}Object.defineProperty(Dr.exports,"__esModule",{value:!0}),Dr.exports.default=void 0,ei.default.use(ot.default),ei.default.use(Ft.default),ei.default.use(Pr.default),ei.default.use(Kt.default),ei.default.use(or.default),ei.default.use(it.default),ei.default.use(Se.default),ei.default.use(je.default),ei.default.use(Tr.default);var Nr=ei.default;if(Dr.exports.default=Nr,"object"===Rr(Dr)&&Dr)try{Dr.exports=ei.default}catch(e){}ei.default.default=ei.default,Se.default,je.default,it.default,ot.default,pt.default,Kt.default,ei.default,or.default,Ft.default,Pr.default,Tr.default,Dr=Dr.exports;var Hr={exports:{}};function Br(e){return Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(e)}Object.defineProperty(Hr.exports,"__esModule",{value:!0}),Hr.exports.default=void 0;var Wr=Dr.default;if(Hr.exports.default=Wr,"object"===Br(Hr)&&Hr)try{Hr.exports=Dr.default}catch(e){}return Dr.default.default=Dr.default,Hr.exports}()})),Ot&&Ot.__esModule&&Object.prototype.hasOwnProperty.call(Ot,"default")?Ot.default:Ot);function It(e){for(var t,n=Array(e.length),i=0,r=e.length;i<r;i++)n[i]=(t=e[i],JSON.parse(JSON.stringify(t)));return n}function Et(e,t){return!(e===t||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function Pt(e,t){for(var n=zt(e),i=Rt(e),r=Array(e.length),o={},a=0,s=i.length;a<s;a++){var l=i[a];l.yIndex=o.yIndex||0,l.static||(l=jt(n,l,t),n.push(l)),r[e.indexOf(l)]=l,l.moved=!1,o=l}return r}function jt(e,t,n){if(0===t.yIndex&&n)for(;t.y>0&&!Tt(e,t);)t.y--;for(var i;i=Tt(e,t);)t.y=i.y+i.h,t.yIndex=(i.yIndex||0)+1;return t}function Mt(e,t){for(var n=0,i=e.length;n<i;n++)if(String(e[n].i)===String(t))return e[n]}function Tt(e,t){for(var n=0,i=e.length;n<i;n++)if(Et(e[n],t))return e[n]}function Ct(e,t){return e.filter((function(e){return Et(e,t)}))}function zt(e){return e.filter((function(e){return e.static}))}function At(e,t,n,i,r,o){if(void 0===o&&(o=!1),t.static)return e;var a=t.x,s=t.y,l=i&&t.y>i;"number"==typeof n&&(t.x=n),"number"==typeof i&&(t.y=i),t.moved=!0;var u=Rt(e);l&&(u=u.reverse());var c=Ct(u,t);if(o&&c.length)return t.x=a,t.y=s,t.moved=!1,e;for(var d=0,p=c.length;d<p;d++){var f=c[d];f.moved||t.y>f.y&&t.y-f.y>f.h/4||(e=f.static?Dt(e,f,t,r):Dt(e,t,f,r))}return e}function Dt(e,t,n,i){if(i){var r={x:n.x,y:n.y,w:n.w,h:n.h,i:"-1"};if(r.y=Math.max(t.y-n.h,0),!Tt(e,r))return At(e,n,void 0,r.y,!1)}return At(e,n,void 0,n.y+1,!1)}function Rt(e){return[].concat(e).sort((function(e,t){return e.y===t.y&&e.x===t.x?0:e.y>t.y||e.y===t.y&&e.x>t.x?1:-1}))}function Nt(e){return i=(n=(t=e).target.offsetParent||document.body)===document.body?{left:0,top:0}:n.getBoundingClientRect(),{x:t.clientX+n.scrollLeft-i.left,y:t.clientY+n.scrollTop-i.top};var t,n,i}function Ht(e,t,n,i){var r;return"number"!=typeof(r=e)||isNaN(r)?{deltaX:0,deltaY:0,lastX:n,lastY:i,x:n,y:i}:{deltaX:n-e,deltaY:i-t,lastX:e,lastY:t,x:n,y:i}}function Bt(){return"undefined"!=typeof window}function Wt(){return"undefined"==typeof document?"auto":void 0!==document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir")}var $t=e({name:"GridItem",props:{isDraggable:{type:Boolean,required:!1,default:null},isResizable:{type:Boolean,required:!1,default:null},static:{type:Boolean,required:!1,default:!1},minH:{type:Number,required:!1,default:1},minW:{type:Number,required:!1,default:1},maxH:{type:Number,required:!1,default:1/0},maxW:{type:Number,required:!1,default:1/0},x:{type:Number,required:!0},y:{type:Number,required:!0},w:{type:Number,required:!0},h:{type:Number,required:!0},i:{required:!0},yIndex:{type:Number,default:0},dragIgnoreFrom:{type:String,required:!1,default:"a, button"},dragAllowFrom:{type:String,required:!1,default:null},resizeIgnoreFrom:{type:String,required:!1,default:"a, button"}},inject:["eventBus"],data:function(){return{cols:1,containerWidth:100,rowHeight:30,margin:[10,10],maxRows:1/0,draggable:null,resizable:null,useCssTransforms:!0,isDragging:!1,dragging:null,isResizing:!1,resizing:null,lastX:NaN,lastY:NaN,lastW:NaN,lastH:NaN,style:{},rtl:!1,dragEventSet:!1,resizeEventSet:!1,previousW:null,previousH:null,previousX:null,previousY:null,innerX:this.x,innerY:this.y,innerW:this.w,innerH:this.h}},created:function(){var e=this,t=this;t.updateWidthHandler=function(e){t.updateWidth(e)},t.compactHandler=function(e){t.compact(e)},t.setDraggableHandler=function(e){null===t.isDraggable&&(t.draggable=e)},t.setResizableHandler=function(e){null===t.isResizable&&(t.resizable=e)},t.setRowHeightHandler=function(e){t.rowHeight=e},t.setMaxRowsHandler=function(e){t.maxRows=e},t.directionchangeHandler=function(){e.rtl="rtl"===Wt(),e.compact()},t.setColNum=function(e){t.cols=parseInt(e)},this.eventBus.on("updateWidth",t.updateWidthHandler),this.eventBus.on("compact",t.compactHandler),this.eventBus.on("setDraggable",t.setDraggableHandler),this.eventBus.on("setResizable",t.setResizableHandler),this.eventBus.on("setRowHeight",t.setRowHeightHandler),this.eventBus.on("setMaxRows",t.setMaxRowsHandler),this.eventBus.on("directionchange",t.directionchangeHandler),this.eventBus.on("setColNum",t.setColNum),this.rtl="rtl"===Wt()},beforeUnmount:function(){var e=this;this.eventBus.off("updateWidth",e.updateWidthHandler),this.eventBus.off("compact",e.compactHandler),this.eventBus.off("setDraggable",e.setDraggableHandler),this.eventBus.off("setResizable",e.setResizableHandler),this.eventBus.off("setRowHeight",e.setRowHeightHandler),this.eventBus.off("setMaxRows",e.setMaxRowsHandler),this.eventBus.off("directionchange",e.directionchangeHandler),this.eventBus.off("setColNum",e.setColNum),this.interactObj&&this.interactObj.unset()},mounted:function(){this.cols=this.$parent.colNum,this.rowHeight=this.$parent.rowHeight,this.containerWidth=null!==this.$parent.width?this.$parent.width:100,this.margin=void 0!==this.$parent.margin?this.$parent.margin:[10,10],this.maxRows=this.$parent.maxRows,null===this.isDraggable?this.draggable=this.$parent.isDraggable:this.draggable=this.isDraggable,null===this.isResizable?this.resizable=this.$parent.isResizable:this.resizable=this.isResizable,this.useCssTransforms=this.$parent.useCssTransforms,this.createStyle()},watch:{isDraggable:function(){this.draggable=this.isDraggable},static:function(){this.tryMakeDraggable(),this.tryMakeResizable()},draggable:function(){this.tryMakeDraggable()},isResizable:function(){this.resizable=this.isResizable},resizable:function(){this.tryMakeResizable()},rowHeight:function(){this.createStyle(),this.emitContainerResized()},cols:function(){this.tryMakeResizable(),this.createStyle(),this.emitContainerResized()},containerWidth:function(){this.tryMakeResizable(),this.createStyle(),this.emitContainerResized()},x:function(e){this.innerX=e,this.createStyle()},y:function(e){this.innerY=e,this.createStyle()},h:function(e){this.innerH=e,this.createStyle()},w:function(e){this.innerW=e,this.createStyle()},renderRtl:function(){this.tryMakeResizable(),this.createStyle()},minH:function(){this.tryMakeResizable()},maxH:function(){this.tryMakeResizable()},minW:function(){this.tryMakeResizable()},maxW:function(){this.tryMakeResizable()},"$parent.margin":function(e){!e||e[0]==this.margin[0]&&e[1]==this.margin[1]||(this.margin=e.map((function(e){return Number(e)})),this.createStyle(),this.emitContainerResized())}},computed:{classObj:function(){return{"vue-resizable":this.resizableAndNotStatic,static:this.static,resizing:this.isResizing,"vue-draggable-dragging":this.isDragging,cssTransforms:this.useCssTransforms,"render-rtl":this.renderRtl,"disable-userselect":this.isDragging,"no-touch":this.isAndroid&&this.draggableOrResizableAndNotStatic}},resizableAndNotStatic:function(){return this.resizable&&!this.static},draggableOrResizableAndNotStatic:function(){return(this.draggable||this.resizable)&&!this.static},isAndroid:function(){return-1!==navigator.userAgent.toLowerCase().indexOf("android")},renderRtl:function(){return this.$parent.isMirrored?!this.rtl:this.rtl},resizableHandleClass:function(){return this.renderRtl?"vue-resizable-handle vue-rtl-resizable-handle":"vue-resizable-handle"}},methods:{createStyle:function(){this.x+this.w>this.cols?(this.innerX=0,this.innerW=this.w>this.cols?this.cols:this.w):(this.innerX=this.x,this.innerW=this.w);var e,t,n,i=this.calcPosition(this.innerX,this.innerY,this.innerW,this.innerH,this.yIndex);this.isDragging&&(i.top=this.dragging.top,this.renderRtl?i.right=this.dragging.left:i.left=this.dragging.left),this.isResizing&&(i.width=this.resizing.width,i.height=this.resizing.height),this.useCssTransforms?this.renderRtl?(t=i.top,e={transform:n="translate3d("+-1*i.right+"px,"+t+"px, 0)",WebkitTransform:n,MozTransform:n,msTransform:n,OTransform:n,width:i.width+"px",height:i.height+"px",position:"absolute"}):e=function(e,t,n,i){var r="translate3d("+t+"px,"+e+"px, 0)";return{transform:r,WebkitTransform:r,MozTransform:r,msTransform:r,OTransform:r,width:n+"px",height:i+"px",position:"absolute"}}(i.top,i.left,i.width,i.height):e=this.renderRtl?function(e,t,n,i){return{top:e+"px",right:t+"px",width:n+"px",height:i+"px",position:"absolute"}}(i.top,i.right,i.width,i.height):function(e,t,n,i){return{top:e+"px",left:t+"px",width:n+"px",height:i+"px",position:"absolute"}}(i.top,i.left,i.width,i.height),this.style=e},emitContainerResized:function(){for(var e={},t=0,n=["width","height"];t<n.length;t++){var i=n[t],r=this.style[i].match(/^(\d+)px$/);if(!r)return;e[i]=r[1]}this.$emit("container-resized",this.i,this.h,this.w,e.height,e.width)},handleResize:function(e){if(!this.static){var t=Nt(e);if(null!=t){var n,i=t.x,r=t.y,o={width:0,height:0};switch(e.type){case"resizestart":this.previousW=this.innerW,this.previousH=this.innerH,n=this.calcPosition(this.innerX,this.innerY,this.innerW,this.innerH,this.yIndex),o.width=n.width,o.height=n.height,this.resizing=o,this.isResizing=!0;break;case"resizemove":var a=Ht(this.lastW,this.lastH,i,r);this.renderRtl?o.width=this.resizing.width-a.deltaX:o.width=this.resizing.width+a.deltaX,o.height=this.resizing.height+a.deltaY,this.resizing=o;break;case"resizeend":n=this.calcPosition(this.innerX,this.innerY,this.innerW,this.innerH,this.yIndex),o.width=n.width,o.height=n.height,this.resizing=null,this.isResizing=!1}(n=this.calcWH(o.height,o.width)).w<this.minW&&(n.w=this.minW),n.w>this.maxW&&(n.w=this.maxW),n.h<this.minH&&(n.h=this.minH),n.h>this.maxH&&(n.h=this.maxH),n.h<1&&(n.h=1),n.w<1&&(n.w=1),this.lastW=i,this.lastH=r,this.innerW===n.w&&this.innerH===n.h||this.$emit("resize",this.i,n.h,n.w,o.height,o.width),"resizeend"!==e.type||this.previousW===this.innerW&&this.previousH===this.innerH||this.$emit("resized",this.i,n.h,n.w,o.height,o.width),this.eventBus.emit("resizeEvent",{eventType:e.type,i:this.i,x:this.innerX,y:this.innerY,h:n.h,w:n.w})}}},handleDrag:function(e){var t=e.target;if(!this.static&&!this.isResizing){var n=Nt(e);if(null!==n){var i,r=n.x,o=n.y,a={top:0,left:0};switch(e.type){case"dragstart":this.previousX=this.innerX,this.previousY=this.innerY;var s=t.offsetParent.getBoundingClientRect(),l=t.getBoundingClientRect();this.renderRtl?a.left=-1*(l.right-s.right):a.left=l.left-s.left,a.top=l.top-s.top+this.yIndex*this.margin[1],this.dragging=a,this.isDragging=!0;break;case"dragend":if(!this.isDragging)return;s=t.offsetParent.getBoundingClientRect(),l=t.getBoundingClientRect(),this.renderRtl?a.left=-1*(l.right-s.right):a.left=l.left-s.left,a.top=l.top-s.top+this.yIndex*this.margin[1],this.dragging=null,this.isDragging=!1;break;case"dragmove":var u=Ht(this.lastX,this.lastY,r,o);this.renderRtl?a.left=this.dragging.left-u.deltaX:a.left=this.dragging.left+u.deltaX,a.top=this.dragging.top+u.deltaY,this.dragging=a}this.renderRtl,i=this.calcXY(a.top,a.left),this.lastX=r,this.lastY=o,this.innerX===i.x&&this.innerY===i.y||this.$emit("move",this.i,i.x,i.y),"dragend"!==e.type||this.previousX===this.innerX&&this.previousY===this.innerY||this.$emit("moved",this.i,i.x,i.y),this.eventBus.emit("dragEvent",{eventType:e.type,i:this.i,x:i.x,y:i.y,h:this.innerH,w:this.innerW})}}},calcPosition:function(e,t,n,i,r){var o=this.calcColWidth();return this.renderRtl?{right:Math.round(o*e+(e+1)*this.margin[0]),top:this.rowHeight*t+r*this.margin[1],width:n===1/0?n:Math.round(o*n+Math.max(0,n-1)*this.margin[0]),height:i===1/0?i:this.rowHeight*i}:{left:Math.round(o*e+(e+1)*this.margin[0]),top:this.rowHeight*t+r*this.margin[1],width:n===1/0?n:Math.round(o*n+Math.max(0,n-1)*this.margin[0]),height:i===1/0?i:this.rowHeight*i}},calcXY:function(e,t){var n=this.calcColWidth(),i=Math.round((t-this.margin[0])/(n+this.margin[0])),r=Math.round((e-this.margin[1])/(this.rowHeight+this.margin[1]));return{x:i=Math.max(Math.min(i,this.cols-this.innerW),0),y:r=Math.max(Math.min(r,this.maxRows-this.innerH),0)}},calcColWidth:function(){return(this.containerWidth-this.margin[0]*(this.cols+1))/this.cols},calcWH:function(e,t,n){void 0===n&&(n=!1);var i,r=this.calcColWidth(),o=Math.round((t+this.margin[0])/(r+this.margin[0]));return i=n?Math.ceil((e+this.margin[1])/(this.rowHeight+this.margin[1])):parseInt(String(e/this.rowHeight)),{w:o=Math.max(Math.min(o,this.cols-this.innerX),0),h:i}},updateWidth:function(e,t){this.containerWidth=e,null!=t&&(this.cols=t)},compact:function(){this.createStyle()},tryMakeDraggable:function(){var e=this;if(null!==this.interactObj&&void 0!==this.interactObj||(this.interactObj=kt(this.$refs.item)),this.draggable&&!this.static){var t={ignoreFrom:this.dragIgnoreFrom,allowFrom:this.dragAllowFrom};this.interactObj.draggable(t),this.dragEventSet||(this.dragEventSet=!0,this.interactObj.on("dragstart dragmove dragend",(function(t){e.handleDrag(t)})))}else this.interactObj.draggable({enabled:!1})},tryMakeResizable:function(){var e=this;if(null!==this.interactObj&&void 0!==this.interactObj||(this.interactObj=kt(this.$refs.item)),this.resizable&&!this.static){var t=this.calcPosition(0,0,this.maxW,this.maxH,this.yIndex),n=this.calcPosition(0,0,this.minW,this.minH,this.yIndex),i={preserveAspectRatio:!0,edges:{left:!1,right:"."+this.resizableHandleClass,bottom:"."+this.resizableHandleClass,top:!1},ignoreFrom:this.resizeIgnoreFrom,restrictSize:{min:{height:n.height,width:n.width},max:{height:t.height,width:t.width}}};this.interactObj.resizable(i),this.resizeEventSet||(this.resizeEventSet=!0,this.interactObj.on("resizestart resizemove resizeend",(function(t){e.handleResize(t)})))}else this.interactObj.resizable({enabled:!1})},autoSize:function(){this.previousW=this.innerW,this.previousH=this.innerH;var e=this.$slots.default[0].elm.getBoundingClientRect(),t=this.calcWH(e.height,e.width,!0);t.w<this.minW&&(t.w=this.minW),t.w>this.maxW&&(t.w=this.maxW),t.h<this.minH&&(t.h=this.minH),t.h>this.maxH&&(t.h=this.maxH),t.h<1&&(t.h=1),t.w<1&&(t.w=1),this.innerW===t.w&&this.innerH===t.h||this.$emit("resize",this.i,t.h,t.w,e.height,e.width),this.previousW===t.w&&this.previousH===t.h||(this.$emit("resized",this.i,t.h,t.w,e.height,e.width),this.eventBus.emit("resizeEvent",{eventType:"resizeend",i:this.i,x:this.innerX,y:this.innerY,h:t.h,w:t.w}))}}});function Lt(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}Lt("\n.vue-grid-item {\n    -webkit-transition: all 200ms ease;\n    transition: all 200ms ease;\n    -webkit-transition-property: left, top, right;\n    transition-property: left, top, right;\n    /* add right for rtl */\n}\n.vue-grid-item.no-touch {\n    -ms-touch-action: none;\n    touch-action: none;\n}\n.vue-grid-item.cssTransforms {\n    -webkit-transition-property: -webkit-transform;\n    transition-property: -webkit-transform;\n    transition-property: transform;\n    transition-property: transform, -webkit-transform;\n    left: 0;\n    right: auto;\n}\n.vue-grid-item.cssTransforms.render-rtl {\n    left: auto;\n    right: 0;\n}\n.vue-grid-item.resizing {\n    opacity: 0.6;\n    z-index: 3;\n}\n.vue-grid-item.vue-draggable-dragging {\n    -webkit-transition: none;\n    transition: none;\n    z-index: 3;\n}\n.vue-grid-item.vue-grid-placeholder {\n    background: red;\n    opacity: 0.2;\n    -webkit-transition-duration: 100ms;\n            transition-duration: 100ms;\n    z-index: 2;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    -o-user-select: none;\n    user-select: none;\n}\n.vue-grid-item>.vue-resizable-handle {\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    bottom: 0;\n    right: 0;\n    background: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pg08IS0tIEdlbmVyYXRvcjogQWRvYmUgRmlyZXdvcmtzIENTNiwgRXhwb3J0IFNWRyBFeHRlbnNpb24gYnkgQWFyb24gQmVhbGwgKGh0dHA6Ly9maXJld29ya3MuYWJlYWxsLmNvbSkgLiBWZXJzaW9uOiAwLjYuMSAgLS0+DTwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DTxzdmcgaWQ9IlVudGl0bGVkLVBhZ2UlMjAxIiB2aWV3Qm94PSIwIDAgNiA2IiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjojZmZmZmZmMDAiIHZlcnNpb249IjEuMSINCXhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiDQl4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjZweCIgaGVpZ2h0PSI2cHgiDT4NCTxnIG9wYWNpdHk9IjAuMzAyIj4NCQk8cGF0aCBkPSJNIDYgNiBMIDAgNiBMIDAgNC4yIEwgNCA0LjIgTCA0LjIgNC4yIEwgNC4yIDAgTCA2IDAgTCA2IDYgTCA2IDYgWiIgZmlsbD0iIzAwMDAwMCIvPg0JPC9nPg08L3N2Zz4=');\n    background-position: bottom right;\n    padding: 0 3px 3px 0;\n    background-repeat: no-repeat;\n    background-origin: content-box;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    cursor: se-resize;\n}\n.vue-grid-item>.vue-rtl-resizable-handle {\n    bottom: 0;\n    left: 0;\n    background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAuMDAwMDAwMDAwMDAwMDAyIiBoZWlnaHQ9IjEwLjAwMDAwMDAwMDAwMDAwMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KIDwhLS0gQ3JlYXRlZCB3aXRoIE1ldGhvZCBEcmF3IC0gaHR0cDovL2dpdGh1Yi5jb20vZHVvcGl4ZWwvTWV0aG9kLURyYXcvIC0tPgogPGc+CiAgPHRpdGxlPmJhY2tncm91bmQ8L3RpdGxlPgogIDxyZWN0IGZpbGw9Im5vbmUiIGlkPSJjYW52YXNfYmFja2dyb3VuZCIgaGVpZ2h0PSIxMiIgd2lkdGg9IjEyIiB5PSItMSIgeD0iLTEiLz4KICA8ZyBkaXNwbGF5PSJub25lIiBvdmVyZmxvdz0idmlzaWJsZSIgeT0iMCIgeD0iMCIgaGVpZ2h0PSIxMDAlIiB3aWR0aD0iMTAwJSIgaWQ9ImNhbnZhc0dyaWQiPgogICA8cmVjdCBmaWxsPSJ1cmwoI2dyaWRwYXR0ZXJuKSIgc3Ryb2tlLXdpZHRoPSIwIiB5PSIwIiB4PSIwIiBoZWlnaHQ9IjEwMCUiIHdpZHRoPSIxMDAlIi8+CiAgPC9nPgogPC9nPgogPGc+CiAgPHRpdGxlPkxheWVyIDE8L3RpdGxlPgogIDxsaW5lIGNhbnZhcz0iI2ZmZmZmZiIgY2FudmFzLW9wYWNpdHk9IjEiIHN0cm9rZS1saW5lY2FwPSJ1bmRlZmluZWQiIHN0cm9rZS1saW5lam9pbj0idW5kZWZpbmVkIiBpZD0ic3ZnXzEiIHkyPSItNzAuMTc4NDA3IiB4Mj0iMTI0LjQ2NDE3NSIgeTE9Ii0zOC4zOTI3MzciIHgxPSIxNDQuODIxMjg5IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlPSIjMDAwIiBmaWxsPSJub25lIi8+CiAgPGxpbmUgc3Ryb2tlPSIjNjY2NjY2IiBzdHJva2UtbGluZWNhcD0idW5kZWZpbmVkIiBzdHJva2UtbGluZWpvaW49InVuZGVmaW5lZCIgaWQ9InN2Z181IiB5Mj0iOS4xMDY5NTciIHgyPSIwLjk0NzI0NyIgeTE9Ii0wLjAxODEyOCIgeDE9IjAuOTQ3MjQ3IiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiLz4KICA8bGluZSBzdHJva2UtbGluZWNhcD0idW5kZWZpbmVkIiBzdHJva2UtbGluZWpvaW49InVuZGVmaW5lZCIgaWQ9InN2Z183IiB5Mj0iOSIgeDI9IjEwLjA3MzUyOSIgeTE9IjkiIHgxPSItMC42NTU2NCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2U9IiM2NjY2NjYiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+);\n    background-position: bottom left;\n    padding-left: 3px;\n    background-repeat: no-repeat;\n    background-origin: content-box;\n    cursor: sw-resize;\n    right: auto;\n}\n.vue-grid-item.disable-userselect {\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n}\n"),$t.render=function(e,t,n,i,r,o){return s(),v("div",{ref:"item",class:["vue-grid-item",e.classObj],style:e.style},[u(e.$slots,"default"),e.resizableAndNotStatic?(s(),v("span",{key:0,ref:"handle",class:e.resizableHandleClass},null,2)):c("v-if",!0),c('<span v-if="draggable" ref="dragHandle" class="vue-draggable-handle"></span>')],6)},$t.__file="src/components/GridItem.vue";var Gt=function(){return Gt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Gt.apply(this,arguments)},Ft=_t((function(e){(e.exports={}).forEach=function(e,t){for(var n=0;n<e.length;n++){var i=t(e[n]);if(i)return i}}})),Yt=_t((function(e){var t=e.exports={};t.isIE=function(e){return!(-1===(t=navigator.userAgent.toLowerCase()).indexOf("msie")&&-1===t.indexOf("trident")&&-1===t.indexOf(" edge/")||e&&e!==function(){var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");do{t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e"}while(n[0]);return e>4?e:void 0}());var t},t.isLegacyOpera=function(){return!!window.opera}})),Xt=_t((function(e){(e.exports={}).getOption=function(e,t,n){var i=e[t];return null==i&&void 0!==n?n:i}}));function qt(){var e={},t=0,n=0,i=0;return{add:function(r,o){o||(o=r,r=0),r>n?n=r:r<i&&(i=r),e[r]||(e[r]=[]),e[r].push(o),t++},process:function(){for(var t=i;t<=n;t++)for(var r=e[t],o=0;o<r.length;o++)(0,r[o])()},size:function(){return t}}}var Ut="_erd";function Zt(e){return e[Ut]}var Vt={initState:function(e){return e[Ut]={},Zt(e)},getState:Zt,cleanState:function(e){delete e[Ut]}},Jt=Ft.forEach,Kt=Ft.forEach;function Qt(e){return Array.isArray(e)||void 0!==e.length}function en(e){if(Array.isArray(e))return e;var t=[];return Kt(e,(function(e){t.push(e)})),t}function tn(e){return e&&1===e.nodeType}var nn=function(e){var t,n;if((e=e||{}).idHandler)t={get:function(t){return e.idHandler.get(t,!0)},set:e.idHandler.set};else{var i=function(e){var t=e.idGenerator,n=e.stateHandler.getState;return{get:function(e){var t=n(e);return t&&void 0!==t.id?t.id:null},set:function(e){var i=n(e);if(!i)throw new Error("setId required the element to have a resize detection state.");var r=t.generate();return i.id=r,r}}}({idGenerator:(n=1,{generate:function(){return n++}}),stateHandler:Vt});t=i}var r=e.reporter;r||(r=function(e){function t(){}var n={log:t,warn:t,error:t};if(!e&&window.console){var i=function(e,t){e[t]=function(){var e=console[t];if(e.apply)e.apply(console,arguments);else for(var n=0;n<arguments.length;n++)e(arguments[n])}};i(n,"log"),i(n,"warn"),i(n,"error")}return n}(!1===r));var o=rn(e,"batchProcessor",function(e){var t=(e=e||{}).reporter,n=Xt.getOption(e,"async",!0),i=Xt.getOption(e,"auto",!0);i&&!n&&(t&&t.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),n=!0);var r,o=qt(),a=!1;function s(){for(a=!0;o.size();){var e=o;o=qt(),e.process()}a=!1}function l(){r=setTimeout(s,0)}return{add:function(e,t){!a&&i&&n&&0===o.size()&&l(),o.add(e,t)},force:function(e){a||(void 0===e&&(e=n),r&&(clearTimeout(r),r=null),e?l():s())}}}({reporter:r})),a={};a.callOnAdd=!!rn(e,"callOnAdd",!0),a.debug=!!rn(e,"debug",!1);var s,l=function(e){var t={};function n(n){var i=e.get(n);return void 0===i?[]:t[i]||[]}return{get:n,add:function(n,i){var r=e.get(n);t[r]||(t[r]=[]),t[r].push(i)},removeListener:function(e,t){for(var i=n(e),r=0,o=i.length;r<o;++r)if(i[r]===t){i.splice(r,1);break}},removeAllListeners:function(e){var t=n(e);t&&(t.length=0)}}}(t),u=function(e){var t={stateHandler:Vt}.stateHandler.getState;return{isDetectable:function(e){var n=t(e);return n&&!!n.isDetectable},markAsDetectable:function(e){t(e).isDetectable=!0},isBusy:function(e){return!!t(e).busy},markBusy:function(e,n){t(e).busy=!!n}}}(),c=rn(e,"strategy","object"),d=rn(e,"important",!1),p={reporter:r,batchProcessor:o,stateHandler:Vt,idHandler:t,important:d};if("scroll"===c&&(Yt.isLegacyOpera()?(r.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),c="object"):Yt.isIE(9)&&(r.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),c="object")),"scroll"===c)s=function(e){var t=(e=e||{}).reporter,n=e.batchProcessor,i=e.stateHandler.getState;e.stateHandler.hasState;var r=e.idHandler;if(!n)throw new Error("Missing required dependency: batchProcessor");if(!t)throw new Error("Missing required dependency: reporter.");var o=function(){var e=document.createElement("div");e.style.cssText=l(["position: absolute","width: 1000px","height: 1000px","visibility: hidden","margin: 0","padding: 0"]);var t=document.createElement("div");t.style.cssText=l(["position: absolute","width: 500px","height: 500px","overflow: scroll","visibility: none","top: -1500px","left: -1500px","visibility: hidden","margin: 0","padding: 0"]),t.appendChild(e),document.body.insertBefore(t,document.body.firstChild);var n=500-t.clientWidth,i=500-t.clientHeight;return document.body.removeChild(t),{width:n,height:i}}(),a="erd_scroll_detection_container";function s(e){!function(e,t,n){if(!e.getElementById(t)){var i=n+"_animation",r=n+"_animation_active",o="/* Created by the element-resize-detector library. */\n";o+="."+n+" > div::-webkit-scrollbar { "+l(["display: none"])+" }\n\n",o+="."+r+" { "+l(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+i,"animation-name: "+i])+" }\n",o+="@-webkit-keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",function(n,i){i=i||function(t){e.head.appendChild(t)};var r=e.createElement("style");r.innerHTML=n,r.id=t,i(r)}(o+="@keyframes "+i+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }")}}(e,"erd_scroll_detection_scrollbar_style",a)}function l(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function u(e,n,i){if(e.addEventListener)e.addEventListener(n,i);else{if(!e.attachEvent)return t.error("[scroll] Don't know how to add event listeners.");e.attachEvent("on"+n,i)}}function c(e,n,i){if(e.removeEventListener)e.removeEventListener(n,i);else{if(!e.detachEvent)return t.error("[scroll] Don't know how to remove event listeners.");e.detachEvent("on"+n,i)}}function d(e){return i(e).container.childNodes[0].childNodes[0].childNodes[0]}function p(e){return i(e).container.childNodes[0].childNodes[0].childNodes[1]}return s(window.document),{makeDetectable:function(e,s,c){function f(){if(e.debug){var n=Array.prototype.slice.call(arguments);if(n.unshift(r.get(s),"Scroll: "),t.log.apply)t.log.apply(null,n);else for(var i=0;i<n.length;i++)t.log(n[i])}}function h(e){var t=i(e).container.childNodes[0],n=window.getComputedStyle(t);return!n.width||-1===n.width.indexOf("px")}function v(){var e=window.getComputedStyle(s),t={};return t.position=e.position,t.width=s.offsetWidth,t.height=s.offsetHeight,t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.widthCSS=e.width,t.heightCSS=e.height,t}function g(){if(f("storeStyle invoked."),i(s)){var e=v();i(s).style=e}else f("Aborting because element has been uninstalled")}function y(e,t,n){i(e).lastWidth=t,i(e).lastHeight=n}function m(){return 2*o.width+1}function b(){return 2*o.height+1}function w(e){return e+10+m()}function x(e){return e+10+b()}function S(e,t,n){var i=d(e),r=p(e),o=w(t),a=x(n),s=function(e){return 2*e+m()}(t),l=function(e){return 2*e+b()}(n);i.scrollLeft=o,i.scrollTop=a,r.scrollLeft=s,r.scrollTop=l}function _(){var e=i(s).container;if(!e){(e=document.createElement("div")).className=a,e.style.cssText=l(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(s).container=e,function(e){e.className+=" "+a+"_animation_active"}(e),s.appendChild(e);var t=function(){i(s).onRendered&&i(s).onRendered()};u(e,"animationstart",t),i(s).onAnimationStart=t}return e}function O(){if(f("Injecting elements"),i(s)){!function(){var n=i(s).style;if("static"===n.position){s.style.setProperty("position","relative",e.important?"important":"");var r=function(e,t,n,i){var r=n[i];"auto"!==r&&"0"!==function(e){return e.replace(/[^-\d\.]/g,"")}(r)&&(e.warn("An element that is positioned static has style."+i+"="+r+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+i+" will be set to 0. Element: ",t),t.style[i]=0)};r(t,s,n,"top"),r(t,s,n,"right"),r(t,s,n,"bottom"),r(t,s,n,"left")}}();var n=i(s).container;n||(n=_());var r=o.width,c=o.height,d=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),p=l(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(function(e,t,n,i){return["left: "+(e=e?e+"px":"0"),"top: "+(t=t?t+"px":"0"),"right: "+(i=i?i+"px":"0"),"bottom: "+(n=n?n+"px":"0")]}(-(1+r),-(1+c),-c,-r))),h=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),v=l(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),g=l(["position: absolute","left: 0","top: 0"]),y=l(["position: absolute","width: 200%","height: 200%"]),m=document.createElement("div"),b=document.createElement("div"),w=document.createElement("div"),x=document.createElement("div"),S=document.createElement("div"),O=document.createElement("div");m.dir="ltr",m.style.cssText=d,m.className=a,b.className=a,b.style.cssText=p,w.style.cssText=h,x.style.cssText=g,S.style.cssText=v,O.style.cssText=y,w.appendChild(x),S.appendChild(O),b.appendChild(w),b.appendChild(S),m.appendChild(b),n.appendChild(m),u(w,"scroll",k),u(S,"scroll",I),i(s).onExpandScroll=k,i(s).onShrinkScroll=I}else f("Aborting because element has been uninstalled");function k(){var e=i(s);e&&e.onExpand?e.onExpand():f("Aborting expand scroll handler: element has been uninstalled")}function I(){var e=i(s);e&&e.onShrink?e.onShrink():f("Aborting shrink scroll handler: element has been uninstalled")}}function k(){function o(t,n,i){var r=function(e){return d(e).childNodes[0]}(t),o=w(n),a=x(i);r.style.setProperty("width",o+"px",e.important?"important":""),r.style.setProperty("height",a+"px",e.important?"important":"")}function a(a){var u=s.offsetWidth,c=s.offsetHeight,d=u!==i(s).lastWidth||c!==i(s).lastHeight;f("Storing current size",u,c),y(s,u,c),n.add(0,(function(){if(d)if(i(s))if(l()){if(e.debug){var n=s.offsetWidth,a=s.offsetHeight;n===u&&a===c||t.warn(r.get(s),"Scroll: Size changed before updating detector elements.")}o(s,u,c)}else f("Aborting because element container has not been initialized");else f("Aborting because element has been uninstalled")})),n.add(1,(function(){i(s)?l()?S(s,u,c):f("Aborting because element container has not been initialized"):f("Aborting because element has been uninstalled")})),d&&a&&n.add(2,(function(){i(s)?l()?a():f("Aborting because element container has not been initialized"):f("Aborting because element has been uninstalled")}))}function l(){return!!i(s).container}function u(){f("notifyListenersIfNeeded invoked");var e=i(s);return void 0===i(s).lastNotifiedWidth&&e.lastWidth===e.startSize.width&&e.lastHeight===e.startSize.height?f("Not notifying: Size is the same as the start size, and there has been no notification yet."):e.lastWidth===e.lastNotifiedWidth&&e.lastHeight===e.lastNotifiedHeight?f("Not notifying: Size already notified"):(f("Current size not notified, notifying..."),e.lastNotifiedWidth=e.lastWidth,e.lastNotifiedHeight=e.lastHeight,void Jt(i(s).listeners,(function(e){e(s)})))}function c(){f("Scroll detected."),h(s)?f("Scroll event fired while unrendered. Ignoring..."):a(u)}if(f("registerListenersAndPositionElements invoked."),i(s)){i(s).onRendered=function(){if(f("startanimation triggered."),h(s))f("Ignoring since element is still unrendered...");else{f("Element rendered.");var e=d(s),t=p(s);0!==e.scrollLeft&&0!==e.scrollTop&&0!==t.scrollLeft&&0!==t.scrollTop||(f("Scrollbars out of sync. Updating detector elements..."),a(u))}},i(s).onExpand=c,i(s).onShrink=c;var v=i(s).style;o(s,v.width,v.height)}else f("Aborting because element has been uninstalled")}function I(){if(f("finalizeDomMutation invoked."),i(s)){var e=i(s).style;y(s,e.width,e.height),S(s,e.width,e.height)}else f("Aborting because element has been uninstalled")}function E(){c(s)}function P(){var e;f("Installing..."),i(s).listeners=[],e=v(),i(s).startSize={width:e.width,height:e.height},f("Element start size",i(s).startSize),n.add(0,g),n.add(1,O),n.add(2,k),n.add(3,I),n.add(4,E)}c||(c=s,s=e,e=null),e=e||{},f("Making detectable..."),function(e){return!function(e){var t=e.getRootNode&&e.getRootNode().contains(e);return e===e.ownerDocument.body||e.ownerDocument.body.contains(e)||t}(e)||null===window.getComputedStyle(e)}(s)?(f("Element is detached"),_(),f("Waiting until element is attached..."),i(s).onRendered=function(){f("Element is now attached"),P()}):P()},addListener:function(e,t){if(!i(e).listeners.push)throw new Error("Cannot add listener to an element that is not detectable.");i(e).listeners.push(t)},uninstall:function(e){var t=i(e);t&&(t.onExpandScroll&&c(d(e),"scroll",t.onExpandScroll),t.onShrinkScroll&&c(p(e),"scroll",t.onShrinkScroll),t.onAnimationStart&&c(t.container,"animationstart",t.onAnimationStart),t.container&&e.removeChild(t.container))},initDocument:s}}(p);else{if("object"!==c)throw new Error("Invalid strategy name: "+c);s=function(e){var t=(e=e||{}).reporter,n=e.batchProcessor,i=e.stateHandler.getState;if(!t)throw new Error("Missing required dependency: reporter.");function r(t){var n=e.important?" !important; ":"; ";return(t.join(n)+n).trim()}function o(e){return i(e).object}return{makeDetectable:function(e,o,a){a||(a=o,o=e,e=null),(e=e||{}).debug,Yt.isIE(8)?a(o):function(o,a){var s=r(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),l=!1,u=window.getComputedStyle(o),c=o.offsetWidth,d=o.offsetHeight;function p(){function n(){if("static"===u.position){o.style.setProperty("position","relative",e.important?"important":"");var n=function(t,n,i,r){var o=i[r];"auto"!==o&&"0"!==function(e){return e.replace(/[^-\d\.]/g,"")}(o)&&(t.warn("An element that is positioned static has style."+r+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",n),n.style.setProperty(r,"0",e.important?"important":""))};n(t,o,u,"top"),n(t,o,u,"right"),n(t,o,u,"bottom"),n(t,o,u,"left")}}""!==u.position&&(n(),l=!0);var r=document.createElement("object");r.style.cssText=s,r.tabIndex=-1,r.type="text/html",r.setAttribute("aria-hidden","true"),r.onload=function(){l||n(),function e(t,n){if(!t.contentDocument){var r=i(t);return r.checkForObjectDocumentTimeoutId&&window.clearTimeout(r.checkForObjectDocumentTimeoutId),void(r.checkForObjectDocumentTimeoutId=setTimeout((function(){r.checkForObjectDocumentTimeoutId=0,e(t,n)}),100))}n(t.contentDocument)}(this,(function(e){a(o)}))},Yt.isIE()||(r.data="about:blank"),i(o)&&(o.appendChild(r),i(o).object=r,Yt.isIE()&&(r.data="about:blank"))}i(o).startSize={width:c,height:d},n?n.add(p):p()}(o,a)},addListener:function(e,t){function n(){t(e)}if(Yt.isIE(8))i(e).object={proxy:n},e.attachEvent("onresize",n);else{var r=o(e);if(!r)throw new Error("Element is not detectable by this strategy.");r.contentDocument.defaultView.addEventListener("resize",n)}},uninstall:function(e){if(i(e)){var t=o(e);t&&(Yt.isIE(8)?e.detachEvent("onresize",t.proxy):e.removeChild(t),i(e).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(e).checkForObjectDocumentTimeoutId),delete i(e).object)}}}}(p)}var f={};return{listenTo:function(e,n,i){function o(e){var t=l.get(e);Kt(t,(function(t){t(e)}))}function c(e,t,n){l.add(t,n),e&&n(t)}if(i||(i=n,n=e,e={}),!n)throw new Error("At least one element required.");if(!i)throw new Error("Listener required.");if(tn(n))n=[n];else{if(!Qt(n))return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");n=en(n)}var p=0,h=rn(e,"callOnAdd",a.callOnAdd),v=rn(e,"onReady",(function(){})),g=rn(e,"debug",a.debug);Kt(n,(function(e){Vt.getState(e)||(Vt.initState(e),t.set(e));var a=t.get(e);if(g&&r.log("Attaching listener to element",a,e),!u.isDetectable(e))return g&&r.log(a,"Not detectable."),u.isBusy(e)?(g&&r.log(a,"System busy making it detectable"),c(h,e,i),f[a]=f[a]||[],void f[a].push((function(){++p===n.length&&v()}))):(g&&r.log(a,"Making detectable..."),u.markBusy(e,!0),s.makeDetectable({debug:g,important:d},e,(function(e){if(g&&r.log(a,"onElementDetectable"),Vt.getState(e)){u.markAsDetectable(e),u.markBusy(e,!1),s.addListener(e,o),c(h,e,i);var t=Vt.getState(e);if(t&&t.startSize){var l=e.offsetWidth,d=e.offsetHeight;t.startSize.width===l&&t.startSize.height===d||o(e)}f[a]&&Kt(f[a],(function(e){e()}))}else g&&r.log(a,"Element uninstalled before being detectable.");delete f[a],++p===n.length&&v()})));g&&r.log(a,"Already detecable, adding listener."),c(h,e,i),p++})),p===n.length&&v()},removeListener:l.removeListener,removeAllListeners:l.removeAllListeners,uninstall:function(e){if(!e)return r.error("At least one element is required.");if(tn(e))e=[e];else{if(!Qt(e))return r.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");e=en(e)}Kt(e,(function(e){l.removeAllListeners(e),s.uninstall(e),Vt.cleanState(e)}))},initDocument:function(e){s.initDocument&&s.initDocument(e)}}};function rn(e,t,n){var i=e[t];return null==i&&void 0!==n?n:i}function on(e,t){if(!t[e])throw new Error("ResponsiveGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]}function an(e){return Object.keys(e).sort((function(t,n){return e[t]-e[n]}))}var sn={name:"GridLayout",provide:function(){return{eventBus:this.eventBus}},components:{GridItem:$t},props:{autoSize:{type:Boolean,default:!0},colNum:{type:Number,default:12},rowHeight:{type:Number,default:150},maxRows:{type:Number,default:1/0},margin:{type:Array,default:function(){return[10,10]}},isDraggable:{type:Boolean,default:!0},isResizable:{type:Boolean,default:!0},isMirrored:{type:Boolean,default:!1},useCssTransforms:{type:Boolean,default:!0},verticalCompact:{type:Boolean,default:!0},layout:{type:Array,required:!0},responsive:{type:Boolean,default:!1},responsiveLayouts:{type:Object,default:function(){return{}}},breakpoints:{type:Object,default:function(){return{lg:1200,md:996,sm:768,xs:480,xxs:0}}},cols:{type:Object,default:function(){return{lg:12,md:10,sm:6,xs:4,xxs:2}}},preventCollision:{type:Boolean,default:!1}},data:function(){return{eventBus:{all:e=e||new Map,on:function(t,n){var i=e.get(t);i&&i.push(n)||e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&i.splice(i.indexOf(n)>>>0,1)},emit:function(t,n){(e.get(t)||[]).slice().map((function(e){e(n)})),(e.get("*")||[]).slice().map((function(e){e(t,n)}))}},width:null,mergedStyle:{},lastLayoutLength:0,isDragging:!1,placeholder:{x:0,y:0,w:0,h:0,i:-1,yIndex:0},layouts:{},lastBreakpoint:null,originalLayout:null};var e},created:function(){var e=this;e.resizeEventHandler=function(t){var n=t.eventType,i=t.i,r=t.x,o=t.y,a=t.h,s=t.w;e.resizeEvent(n,i,r,o,a,s)},e.dragEventHandler=function(t){var n=t.eventType,i=t.i,r=t.x,o=t.y,a=t.h,s=t.w;e.dragEvent(n,i,r,o,a,s)},e.eventBus.on("resizeEvent",e.resizeEventHandler),e.eventBus.on("dragEvent",e.dragEventHandler),e.$emit("layout-created",e.layout)},beforeUnmount:function(){var e;this.eventBus.off("resizeEvent",this.resizeEventHandler),this.eventBus.off("dragEvent",this.dragEventHandler),e=this.onWindowResize,Bt&&window.removeEventListener("resize",e),this.erd.uninstall(this.$refs.item)},beforeMount:function(){this.$emit("layout-before-mount",this.layout)},mounted:function(){var e=this;this.$emit("layout-mounted",this.layout),this.$nextTick((function(){!function(e,t){void 0===t&&(t="Layout");var n=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var i=0,r=e.length;i<r;i++){for(var o=e[i],a=0;a<n.length;a++)if("number"!=typeof o[n[a]])throw new Error("VueGridLayout: "+t+"["+i+"]."+n[a]+" must be a number!");if(o.i&&o.i,void 0!==o.static&&"boolean"!=typeof o.static)throw new Error("VueGridLayout: "+t+"["+i+"].static must be a boolean!")}}(e.layout),e.originalLayout=e.layout;var t=e;e.$nextTick((function(){var n;t.onWindowResize(),t.initResponsiveFeatures(),n=t.onWindowResize,Bt?window.addEventListener("resize",n):n(),Pt(t.layout,t.verticalCompact),t.$emit("layout-updated",t.layout),t.updateHeight(),t.$nextTick((function(){e.erd=nn({strategy:"scroll",callOnAdd:!1}),e.erd.listenTo(t.$refs.item,(function(){t.onWindowResize()}))}))}))}))},watch:{width:function(e,t){var n=this,i=this;this.$nextTick((function(){n.eventBus.emit("updateWidth",n.width),null===t&&n.$nextTick((function(){n.$emit("layout-ready",i.layout)})),n.updateHeight()}))},"layout.length":function(){this.layoutUpdate()},layout:function(){this.layoutUpdate()},colNum:function(e){this.eventBus.emit("setColNum",e)},rowHeight:function(){this.eventBus.emit("setRowHeight",this.rowHeight)},isDraggable:function(){this.eventBus.emit("setDraggable",this.isDraggable)},isResizable:function(){this.eventBus.emit("setResizable",this.isResizable)},responsive:function(){this.responsive||(this.$emit("update:layout",this.originalLayout),this.eventBus.emit("setColNum",this.colNum)),this.onWindowResize()},maxRows:function(){this.eventBus.emit("setMaxRows",this.maxRows)},margin:function(){this.updateHeight()}},methods:{layoutUpdate:function(){if(void 0!==this.layout&&null!==this.originalLayout){if(this.layout.length!==this.originalLayout.length){var e=this.findDifference(this.layout,this.originalLayout);e.length>0&&(this.layout.length>this.originalLayout.length?this.originalLayout=this.originalLayout.concat(e):this.originalLayout=this.originalLayout.filter((function(t){return!e.some((function(e){return t.i===e.i}))}))),this.lastLayoutLength=this.layout.length,this.initResponsiveFeatures()}Pt(this.layout,this.verticalCompact),this.eventBus.emit("updateWidth",this.width),this.updateHeight(),this.$emit("layout-updated",this.layout)}},updateHeight:function(){this.mergedStyle={height:this.containerHeight()}},onWindowResize:function(){null!==this.$refs&&null!==this.$refs.item&&void 0!==this.$refs.item&&(this.width=this.$refs.item.offsetWidth),this.eventBus.emit("resizeEvent",{})},containerHeight:function(){if(this.autoSize)return function(e){for(var t,n=0,i=0,r=e.length;i<r;i++)(t=e[i].y+e[i].h)>n&&(n=t);return n}(this.layout)*(this.rowHeight+this.margin[1])+this.margin[1]+"px"},dragEvent:function(e,t,n,i,r,o){var a=this,s=Mt(this.layout,t);null==s&&(s={x:0,y:0}),"dragmove"===e||"dragstart"===e?(this.placeholder.i=t,this.placeholder.x=s.x,this.placeholder.y=s.y,this.placeholder.w=o,this.placeholder.h=r,this.placeholder.yindex=s.yIndex,this.$nextTick((function(){a.isDragging=!0})),this.eventBus.emit("updateWidth",this.width)):this.$nextTick((function(){a.isDragging=!1})),At(this.layout,s,n,i,!0,this.preventCollision),Pt(this.layout,this.verticalCompact),this.eventBus.emit("compact"),this.updateHeight(),"dragend"===e&&this.$emit("layout-updated",this.layout)},resizeEvent:function(e,t,n,i,r,o){var a,s=this,l=Mt(this.layout,t);if(null==l&&(l={h:0,w:0}),this.preventCollision){var u=Ct(this.layout,Gt(Gt({},l),{w:o,h:r})).filter((function(e){return e.i!==l.i}));if(a=u.length>0){var c=1/0,d=1/0;u.forEach((function(e){e.x>l.x&&(c=Math.min(c,e.x)),e.y>l.y&&(d=Math.min(d,e.y))})),Number.isFinite(c)&&(l.w=c-l.x),Number.isFinite(d)&&(l.h=d-l.y)}}a||(l.w=o,l.h=r),"resizestart"===e||"resizemove"===e?(this.placeholder.i=t,this.placeholder.x=n,this.placeholder.y=i,this.placeholder.w=l.w,this.placeholder.h=l.h,this.placeholder.yIndex=l.yIndex,this.$nextTick((function(){s.isDragging=!0})),this.eventBus.emit("updateWidth",this.width)):this.$nextTick((function(){s.isDragging=!1})),this.responsive&&this.responsiveGridLayout(),Pt(this.layout,this.verticalCompact),this.eventBus.emit("compact"),this.updateHeight(),"resizeend"===e&&this.$emit("layout-updated",this.layout)},responsiveGridLayout:function(){var e=function(e,t){for(var n=an(e),i=n[0],r=1,o=n.length;r<o;r++){var a=n[r];t>e[a]&&(i=a)}return i}(this.breakpoints,this.width),t=on(e,this.cols);null==this.lastBreakpoint||this.layouts[this.lastBreakpoint]||(this.layouts[this.lastBreakpoint]=It(this.layout));var n=function(e,t,n,i,r,o,a){if(t[i])return It(t[i]);for(var s=e,l=an(n),u=l.slice(l.indexOf(i)),c=0,d=u.length;c<d;c++){var p=u[c];if(t[p]){s=t[p];break}}return Pt(function(e,t){for(var n=zt(e),i=0,r=e.length;i<r;i++){var o=e[i];if(o.x+o.w>t.cols&&(o.x=t.cols-o.w),o.x<0&&(o.x=0,o.w=t.cols),o.static)for(;Tt(n,o);)o.y++;else n.push(o)}return e}(s=It(s||[]),{cols:o}),a)}(this.originalLayout,this.layouts,this.breakpoints,e,this.lastBreakpoint,t,this.verticalCompact);this.layouts[e]=n,this.lastBreakpoint!==e&&this.$emit("breakpoint-changed",e,n),this.$emit("update:layout",n),this.lastBreakpoint=e,this.eventBus.emit("setColNum",on(e,this.cols))},initResponsiveFeatures:function(){this.layouts=Object.assign({},this.responsiveLayouts)},findDifference:function(e,t){var n=e.filter((function(e){return!t.some((function(t){return e.i===t.i}))})),i=t.filter((function(t){return!e.some((function(e){return t.i===e.i}))}));return n.concat(i)}}};Lt("\n.vue-grid-layout {\n        position: relative;\n        -webkit-transition: height 200ms ease;\n        transition: height 200ms ease;\n}\n"),sn.render=function(e,t,n,i,r,o){const a=b("grid-item");return s(),v("div",{ref:"item",class:"vue-grid-layout",style:e.mergedStyle},[u(e.$slots,"default"),D(w(a,{class:"vue-grid-placeholder",x:e.placeholder.x,y:e.placeholder.y,w:e.placeholder.w,h:e.placeholder.h,i:e.placeholder.i,"y-index":e.placeholder.yIndex},null,8,["x","y","w","h","i","y-index"]),[[R,e.isDragging]])],4)},sn.__file="src/components/GridLayout.vue";const ln={GridLayout:sn,GridItem:$t};const un={install:function e(t){e.installed||(e.installed=!0,Object.keys(ln).forEach((e=>{t.component(e,ln[e])})))}};let cn=null;"undefined"!=typeof window?cn=window.Vue:"undefined"!=typeof global&&(cn=global.Vue),cn&&cn.use(un);const dn={class:"visual"},pn=e({__name:"view",props:{layout:{type:Object,default:()=>({})},group:{type:Object,default:()=>({})},base:{type:Object,default:()=>({})},dataJson:{type:Object,default:()=>({})},slots:{type:Array,default:()=>[]}},emits:["update:slots"],setup(e,{emit:i}){const r=e,a=L(r,"slots",i),{gcUnique:c}=m(Tn)||{},d=n({layoutInit:!1}),p=t((()=>r.base||{})),f=t((()=>r.dataJson||{})),g=t((()=>r.layout||{})),b=t((()=>Object.assign(r.layout.base||{},{isDraggable:!0,isMirrored:!1,isResizable:!0}))),k=t((()=>r.group||{})),I=t((()=>(r.base.layout?.controlIgnore||[]).map((e=>String(e))))),E=n({}),P=h({outputData:{layout:g.value.layout||[]},groupCode:void 0}),M=t((()=>{const e=[];return g.value.layout.map((t=>{const n=k.value[t.i]||{},i=f.value?.[t.i];(n._slots?.length?n._slots:[{slot:t.i}]).map((t=>{e.push({name:t.slot,props:{data:i,group:n}})}))})),e}));function T(e){const t={};return!0===e.hAuto&&(t.height="unset"),t}function D(e=[]){d.value.layoutInit&&(P.outputData.layout=Y(e),W.publish(c+ft,{layout:e}))}function R(){setTimeout((()=>{d.value.layoutInit=!0}),0)}return o(M,(e=>{a.value=e}),{immediate:!0,deep:!0}),(t,n)=>(s(),l("section",dn,[w(C(sn),x({layout:g.value.layout,"onUpdate:layout":n[0]||(n[0]=e=>g.value.layout=e),class:"gridLayout"},b.value,{"auto-size":!0,onLayoutUpdated:D,onLayoutMounted:R}),{default:S((()=>[(s(!0),l(_,null,O(e.layout.layout,((e,n)=>(s(),v(C($t),{key:e.i,class:j(["gridItem",[`grid-item-${e.i}`,{noControl:I.value.includes(String(e.i)),active:E.value.i===e.i}].concat(e.classList||[])]),"data-index":n,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i,"y-index":e.yIndex,style:z(T(e)),onClick:t=>function(e){E.value=e,W.publish(c+pt,{item:e})}(e)},{default:S((()=>[w(Ce,{class:"group-content",options:p.value.style,item:e},{default:S((()=>[k.value[e.i]?(s(),v(st,{key:1,"layout-index":e.i,group:k.value[e.i],data:f.value[e.i],onChange:({btn:t,type:n})=>{return i={layout:e,group:k.value[e.i],btn:t,type:n},void W.publish(c+vt,i);var i}},A({_:2},[O(k.value[e.i]._slots||[],((n,i)=>({name:n.slot,fn:S((()=>[y("section",{class:"engine-child",style:z(n.style||{})},[u(t.$slots,n.slot,{data:f.value[e.i],group:k.value[e.i]},(()=>[w(dt,{group:k.value[e.i],options:n,data:f.value[e.i]},null,8,["group","options","data"])]))],4)]))})))]),1032,["layout-index","group","data","onChange"])):u(t.$slots,e.i,{key:0,data:f.value[e.i]},(()=>[w(dt,{options:e,data:f.value[e.i]},null,8,["options","data"])]))])),_:2},1032,["options","item"])])),_:2},1032,["class","data-index","x","y","w","h","i","y-index","style","onClick"])))),128))])),_:3},16,["layout"])]))}}),fn=he;async function hn(e){const{apis:t,instance:n}=e,i=function(e){if(!e||e.length<1)return;const t=[],n=[];return e.map((e=>{e.lazy?n.push(e):t.push(e)})),{quickApis:t,lazyApis:n}}(t),r=new Map,o={};for(const e in i){const t=i[e];if(!t||!t.length)continue;const a=await vn(t,n);a&&a.map(((e,n)=>{r&&r.set(t[n].unique,e),o[t[n].unique]=e}))}return{dataMap:r,dataJson:o}}async function vn(e,t){if(!e||e.length<1)return;const n=[];e.map(((e,t)=>{const i=n.find((t=>{switch(!0){case"mock"===e.dataSource:return q(t.api.mock,e.mock);case"async"===e.dataSource:return e.options?.url&&q(t.api.options,e.options)}}));i?i.indexs.push(t):n.push({indexs:[t],api:e})}));try{const[...e]=await Promise.all(n.map((e=>{const n=e.api;if(n.lazy&&console.log("load lazy: ",n),!0==("mock"===n.dataSource))return fn.asyncMock(n.mock,n).catch((e=>e));{const e=n.api||"asyncConf";if(fn[e]){return n.options.instance=t,fn[e](n.options,n).catch((e=>e))}}})));if(!e||e.length<1)return[];const i=[];return e.map(((e,t)=>{n[t].indexs.map((t=>i.splice(t,0,e)))})),i}catch(e){return console.log(e),{error:e}}}function gn(e){return`_gcGroup_${e}`}function yn(e,t){const n={};if(e&&!(e.length<1))return e.map((e=>{let i=e.value??"";void 0!==e.path&&t&&(i=F(t,e.path,e.value)),"string"==typeof i&&["[","{"].includes(i.substring(0,1))&&(i=JSON.parse(i)),n[e.key]=i})),n}function mn(e=18,t){const n=[],i="0123456789abcdef";for(let t=0;t<e;t++)n[t]=i.substr(Math.floor(16*Math.random()),1);n[7]="4",n[9]=i.substr(3&n[9]|8,1),n[8]=n[11]="-";return(t||"")+n.join("")}const bn=e({setup(){const{store:e}=ge(),{x:i,y:r,moving:a,on:s,off:l}=function(){const e=n(0),t=n(0),i=n(!1);function r(n){e.value=n.pageX,t.value=n.pageY}function o(){i.value=!1,document.removeEventListener("mousemove",r)}return d((()=>o())),{x:e,y:t,moving:i,on:function(){i.value=!0,document.addEventListener("mousemove",r)},off:o}}(),u=t((()=>e.getters.mode)),c=t((()=>e.getters["view/drag"])),p=h({itemsShow:!1,items:[{label:"开启编辑",code:"active",active:"active"===u.value},{label:"开启拖拉",code:"drag",active:!0===c.value}]});o(i,(()=>console.log("333x: ",i.value,r.value)));const f=t((()=>{const e=i.value-30;return(e>0?e:0)+"px"})),v=t((()=>{const e=r.value-30;return(e>0?e:0)+"px"}));return{state:p,x:f,y:v,moving:a,onMouseover:function(){p.itemsShow=!0},onMouseleave:function(){p.itemsShow=!1},onClicItem:function(t){switch(!0){case"active"===t.code:const n="active"===u.value?"static":"active";t.active="active"===n,e.dispatch("setAppMode",n);break;case"drag"===t.code:const i=!c.value;t.active=!0===i,e.dispatch("view/setViewDrag",i)}},onMousedown:function(){s()},onMouseup:function(){l()}}}}),wn=()=>{N((e=>({"b618095e-x":e.x,"b618095e-y":e.y})))},xn=bn.setup;bn.setup=xn?(e,t)=>(wn(),xn(e,t)):wn;const Sn=bn,_n=(e=>(E("data-v-b618095e"),e=e(),P(),e))((()=>y("section",{class:"operator"},[y("span",null,"小智")],-1))),On={key:0,class:"items"},kn=["onClick"];var In=ee(Sn,[["render",function(e,t,n,i,r,o){return s(),l("section",{id:"sz-xiaozhi",class:j(["gc-active",[{moving:e.moving}]]),onMouseover:t[0]||(t[0]=(...t)=>e.onMouseover&&e.onMouseover(...t)),onMouseleave:t[1]||(t[1]=(...t)=>e.onMouseleave&&e.onMouseleave(...t)),onMousedown:t[2]||(t[2]=(...t)=>e.onMousedown&&e.onMousedown(...t)),onMouseup:t[3]||(t[3]=(...t)=>e.onMouseup&&e.onMouseup(...t))},[_n,e.state.itemsShow?(s(),l("section",On,[(s(!0),l(_,null,O(e.state.items,((t,n)=>(s(),l("section",{key:n,class:j(["item",[{active:!0===t.active}]]),onClick:n=>e.onClicItem(t)},[y("span",null,I(t.label),1)],10,kn)))),128))])):c("v-if",!0)],34)}],["__scopeId","data-v-b618095e"]]);const En={class:"gc-container"},Pn={class:"gc-fixed"},jn=e({__name:"view",props:{options:{type:Object,default:()=>({})},params:Object},emits:["layoutUpdated","onClickItem"],setup(e,{expose:i,emit:d}){const p=e,g={symbol:Symbol("gc-content"),dataJson:{},dataMap:new Map,pathPrefix:"data",groupConf:{group:{component:{}}},asyncConf:{},batchApi:{allApis:[],apis:[],paths:[]},layoutConf:{layout:[],base:{colNum:24,rowHeight:30,isDraggable:!0,isMirrored:!1,isResizable:!0,margin:[20,20],preventCollision:!1,useCssTransforms:!0,verticalCompact:!0}}};i({reloadData:function(){$()}});const m=h({content:Y(g),outputData:{layout:[]},groupCode:void 0,gridSlots:[],waterfallSlots:[],visualSlots:[]}),{options:b,base:w,layoutConf:x,groupConf:_,dataJson:k,paramsData:I,pubsubKeys:E,gcUuid:P,viewKeyRef:j,xiaozhiRef:z}=function(e,i){const a=Z(),s=n({base:{colNum:24,rowHeight:30,isDraggable:!0,isMirrored:!1,isResizable:!0,margin:[20,20],preventCollision:!1,useCssTransforms:!0,verticalCompact:!0},layout:[],type:"grid"}),l=t((()=>e.options)),u=t((()=>l.value.base||{})),c=t((()=>l.value.layoutConf||{})),d=t((()=>c.value.base.options?.activeRowHeight));function p(){const e=c.value,t=s.value=Y(s.value);if((e?.layout?.length||0)<1)return;if(Object.keys(e).length<1)return;t.type=e.type,e.base&&Object.assign(t.base,e.base),e.layout&&(t.layout=e.layout);let n={},i=0;return t.layout.map((e=>{e.y>i&&(i=e.y),e.y+e.h>(n.y||0)+(n.h||0)&&(n=e)})),s.value=t,t}r((()=>p())),o(c,(async()=>{await r(),p()}));const f=t((()=>i.content.groupConf||{})),h=t((()=>i.content.asyncConf||{})),v=t((()=>f.value.group||{})),g=t((()=>e=>{const t=i.content.groupConf[e.i];return t?i.content.dataJson[t._base.code]:null})),y=t((()=>i.content.dataJson||{})),m=t((()=>Object.assign({urlParams:a.query||{}},e.params||{}))),b=t((()=>v.value.component||{items:[{type:"slot",options:{name:i.groupCode}}]})),w=mn(),x={RELOAD:mn(),SINGLE_ASYNC:mn(),GC:w},S=t((()=>l.value.viewKey||"")),_=t((()=>!1)),O=t((()=>l.value.xiaozhi||{hidden:!0}));return{options:l,base:u,layoutConf:s,activeRowHeight:d,groupConf:f,asyncConf:h,group:v,itemData:g,dataJson:y,paramsData:m,component:b,pubsubKeys:x,gcUuid:w,viewKeyRef:S,useMockRef:_,xiaozhiRef:O}}(p,m),D=t((()=>x.value.type||"grid")),R=t((()=>m.content.batchApi.apis)),N=f();function W(){Number(b.value.layoutConf?.layout?.length||0)<1||(m.content=Y(g),function(){const e=b.value.groupConf?.group;!function(e){const{group:t}=e;if(!t||t.length<1)return null;const n=m.content;t.map(((e,t)=>{const i=e.base.layoutIndex;if(!i&&0!==i)return;e._base={layoutIndex:i,code:gn(t),uuid:Pe(8,"gi"),SINGLE_ASYNC:E.SINGLE_ASYNC};const{index:r}=function(e){const t=e?.header?.dimensions||[],n={index:0,dimension:{}};if(!t.length)return n;const i=e.anas||[];return i.map((t=>{X(t,"base.index",Number(e.base.layoutIndex)),t.components&&t.components.length||t.components.push({slot:String(t.base.index),type:"slot",_default:!0})})),t.map(((t,i)=>{!0===t.initChecked?(t.active=!0,n.index=i,n.dimension=t,e.currentAna=e.anas[i]):t.active=!1})),n}(e);e.currentAna=Object.assign(e.currentAna||{},e.anas[r]||{});(e.currentAna.components||[]).length<1?(e.currentAna.components=[],e._slots=e.currentAna.components=[{slot:String(i),type:"slot"}]):e._slots=e.currentAna.components.filter((t=>{if("slot"===t.type||void 0!==t.slot)return t.slot=t.slot||e._base.code,t.type="slot",t._default=!0,t})),n.groupConf[i]=e}))}({group:e})}(),$())}function $(){const e=b.value.asyncConf?.async,t=b.value.groupConf?.group||[];t.map((e=>{!function(e){const t=b.value.asyncConf?.async,n=e.anas||[];n.map((e=>{if(!e.asyncConf)return;const{uniques:n}=e?.asyncConf||{},i=n&&t.filter((e=>n.includes(e.base.unique)))||[];e.asyncConf.apis=i}))}(e)})),!e||e.length<1||(function(e){const{async:t,group:n}=e,i=m.content;i.batchApi.allApis=[],m.content.batchApi.apis=[],i.batchApi.paths=[],t.map((e=>{const t=e.base.layoutIndex,r=e.base?.unique||t,o=n.find((e=>e.base.layoutIndex===t));if(!e.url&&!e.mock)return;const a=yn(e.params,I.value);e.mock=function({asyncItem:e,groupItem:t}){const n=e.base?.unique;if(!n)return;if(!e.mock)return e.mock;const i=t?.anas?.find((e=>e.asyncConf?.uniques.includes(n)));let r=[];e.mock.params||(e.mock.params={});r=e.mock.params.sids||[];const{ids:o}=i?.fieldConf||{};return r=Array.from(new Set(r.concat(o||[]))),e.mock.params.sids=r,e.mock}({asyncItem:e,groupItem:o});const s=function(e){const{asyncItem:t,params:n,unique:i}=e;return{api:t.api,key:t.base.layoutIndex,unique:i,base:t.base||{},async:Y(t),dataSource:t.dataSource||"async",mock:{...t.mock},options:{url:t.url,params:n,type:t.type,config:t.config}}}({asyncItem:e,params:a,unique:r});i.batchApi.allApis.push(s),i.batchApi.paths.push(Object.assign({unique:s.unique,key:t,path:e.path},{asyncConf:s})),i.batchApi.apis.push(s)}))}({async:e,group:t}),async function(){const{dataMap:e,dataJson:t}=await hn({apis:m.content.batchApi.apis.filter((e=>!1!==e.base.active)),instance:N});L({dataMap:e,dataJson:t,paths:m.content.batchApi.paths.filter((e=>!1!==e.asyncConf.base.active))})}())}function L(e){const{dataMap:t,paths:n}=e,i=m.content;!t||t.size<1||!n||n.length<1||(i.dataMap||(i.dataMap=new Map),n.map((e=>{if(!e)return;let n="";const r=t.get(e.unique),o=e.path?i.pathPrefix+"."+e.path:i.pathPrefix;n=F(r,o),i.dataJson[e.key]=n,i.dataMap.set(e.key,n)})))}async function G(e={}){const t=m.content,{key:n,params:i,paramsCacheClean:r,resolve:o,reject:a}=e;if(n)try{const e=_.value[n],a=F(e,"currentAna.asyncConf.uniques",[]),s=(t.batchApi.apis||[]).find((e=>String(e.key)===String(n)&&a.includes(e.base.unique)))||{};if(!s?.options)return;const{unique:l}=s,u=t.batchApi.paths.find((e=>l&&l===e.unique));!0===r&&(s.options.params={});const c=Object.assign({},s.options.params,I.value,i||{}),d=yn(s.async?.params,c);s.options.params=d;const{dataMap:p}=await hn({apis:[s],instance:N});t.dataJson[n]=void 0,t.dataMap.set(n,void 0),L({dataMap:p,paths:[u]}),o&&o({dataJson:t.dataJson,data:t.dataJson[n],params:d})}catch(e){a&&a(e)}}return W(),o(b,(()=>{W(),function(){const e=w.value.menuId;if(!e)return;const{subscribe:i}=function(e){const i=h({menu:{},fn:""}),r=n(e);o(r,(()=>{}));const a=t((()=>i.menu));return async function(){try{const{data:t,success:n}=await fe(e);if(!n)return;i.menu=t||{}}catch(e){console.log("error: ",e)}}(),o(a,(()=>{i.fn&&i.fn(a)})),{tree:t((()=>a.value.tree)).value,list:a.value.list,subscribe:e=>i.fn=e}}(e);i((()=>{}))}()})),a((()=>{m.outputData.layout=x.value.layout})),T(Tn,{pubsubKeys:E,paramsRef:H(p,"params"),gcUnique:P,layoutTypeRef:D,viewKeyRef:j,apis:R}),ve(E.RELOAD).subscribe((()=>{W()})),ve(E.SINGLE_ASYNC).subscribe((e=>G(e))),ve(P+pt).subscribe((e=>{const{item:t}=e||{};d("onClickItem",t)})),ve(P+ft).subscribe((e=>{const{layout:t}=e||{};m.outputData.layout=t,d("layoutUpdated",m.outputData)})),ve(ht).subscribe((e=>{const{index:t}=e||{};x.value.layout.splice(t,1),d("layoutUpdated",m.outputData)})),ve(P+vt).subscribe((e=>{const{layout:t,btn:n,type:i}=e||{};!function(e={}){const{layout:t,btn:n,type:i}=e,r=Y(_.value[t.i]);1==("module"===i)&&(!function(e,t){const{btn:n}=t||{};var i=-1;e.header.dimensions.map(((e,t)=>{e.active=!1,String(e.code)===String(n.code)&&(e.active=!0,i=t)})),i>=0&&(e.currentAna=e.anas[i])}(r,{btn:n}),function(e,t){const{layout:n}=t||{},i=F(e.currentAna,"asyncConf.uniques",[]),r=m.content.batchApi.apis.filter((e=>e.key===n.i));r&&i.length&&r.map((e=>{e.base.active=i.includes(e.base?.unique)}))}(r,{layout:t}),_.value[t.i]=r,G({key:t.i}))}({layout:t,btn:n,type:i})})),(e,t)=>(s(),l("section",En,[c(" grid layout "),"grid"===D.value?(s(),v(yt,{key:0,slots:m.gridSlots,"onUpdate:slots":t[0]||(t[0]=e=>m.gridSlots=e),base:C(w),"data-json":C(k),layout:C(x),group:C(_)},A({_:2},[O(m.gridSlots||[],((t,n)=>({name:t.name,fn:S((()=>[u(e.$slots,t.name,M(B(t.props)),void 0,!0)]))})))]),1032,["slots","base","data-json","layout","group"])):c("v-if",!0),c(" waterfall layout "),"waterfall"===D.value?(s(),v(St,{key:1,slots:m.waterfallSlots,"onUpdate:slots":t[1]||(t[1]=e=>m.waterfallSlots=e),base:C(w),"data-json":C(k),layout:C(x),group:C(_)},A({_:2},[O(m.waterfallSlots||[],((t,n)=>({name:t.name,fn:S((()=>[u(e.$slots,t.name,M(B(t.props)),void 0,!0)]))})))]),1032,["slots","base","data-json","layout","group"])):c("v-if",!0),c(" visual layout "),"visual"===D.value?(s(),v(pn,{key:2,slots:m.visualSlots,"onUpdate:slots":t[2]||(t[2]=e=>m.visualSlots=e),base:C(w),"data-json":C(k),layout:C(x),group:C(_)},A({_:2},[O(m.visualSlots||[],((t,n)=>({name:t.name,fn:S((()=>[u(e.$slots,t.name,M(B(t.props)),void 0,!0)]))})))]),1032,["slots","base","data-json","layout","group"])):c("v-if",!0),y("section",Pn,[!0!==C(z).hidden?(s(),v(In,{key:0})):c("v-if",!0)])]))}});var Mn=ee(jn,[["__scopeId","data-v-426fe76d"]]);const Tn="szzt-components-core-gc",Cn="szzt-components-core-engine";export{Mn as default,Cn as engineInjectionKey,Tn as gcInjectionKey};
